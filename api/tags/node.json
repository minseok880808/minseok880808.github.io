{"name":"node","slug":"node","count":3,"posts":[{"title":"Node.js HTTP Flow","slug":"Node-js-HTTP-Flow","date":"2020-10-05T07:01:42.000Z","updated":"2020-10-05T07:10:14.418Z","comments":true,"pin":null,"path":"api/articles/Node-js-HTTP-Flow.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png","content":"<h2 id=\"API-시스템-구성도\"><a href=\"#API-시스템-구성도\" class=\"headerlink\" title=\"API 시스템 구성도\"></a>API 시스템 구성도</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png\" alt=\"image\"></a></p>\n<ul>\n<li>(IP/Port) or(DNS) 를 통해서 API서버로 요청이 들어온걸로 가정하면,<br> 1) 최초 app.js내에서 Express내 application.js handler 로 진입.(Default Configuration은 기본적으로 수행되니 생략)<br> 2) 핸들러에서 라우터를 확인하고 HTTP Method를 확인한 뒤, Layer Stack을 수정해서 적용하고 Layer로 데이터를 보냄.<br> 3) Layer는 여러 MiddleWare를 사용하며, (proto.process_params)에서 Req, Res 데이터들을 각각 분류하여 저장 및 생성.<br> 4) Layer내에서 모두 셋팅이 끝나면 Router로 해당 데이터를 보냄.<br> 5) 사용자가 요청한 데이터를 req에 받을 수 있고, Method를 통해 res데이터를 주는 것을 미리 Layer에서 셋팅된 res로 셋팅하여 내보낼 수 있음.</li>\n</ul>\n","text":"API 시스템 구성도 [Figure]  5) 사용자가 요청한 데이터를 req에 받을 수 있고, Method를 통해 res데이터를 주는 것을 미리 Layer에서 셋팅된 res로 셋팅하여 내보낼 수 있음.","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":23,"path":"api/categories/tip.json"}],"tags":[{"name":"flow","slug":"flow","count":2,"path":"api/tags/flow.json"},{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"http","slug":"http","count":1,"path":"api/tags/http.json"}]},{"title":"nest.js API Template","slug":"nest-js-API-Template","date":"2020-11-20T07:04:10.000Z","updated":"2020-11-20T08:23:15.233Z","comments":true,"pin":null,"path":"api/articles/nest-js-API-Template.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png","content":"<h2 id=\"API-Template-구조도\"><a href=\"#API-Template-구조도\" class=\"headerlink\" title=\"API Template 구조도\"></a>API Template 구조도</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png\" alt=\"image\"></a></p>\n<h2 id=\"Tree\"><a href=\"#Tree\" class=\"headerlink\" title=\"Tree\"></a>Tree</h2><p>project/<br>　　└─ src<br>　　　　├─ config<br>　　　　│　　├─ constant<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　└─ interface<br>　　　　│　　├─ database<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　├─ interface<br>　　　　│　　│　　├─ module<br>　　　　│　　│　　└─ pool<br>　　　　│　　├─ smtp<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　└─ interface<br>　　　　│　　index.config.ts<br>　　　　├─ device<br>　　　　│　　├─ controller<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　　├─ interceptors<br>　　　　│　　└─ basic.interceptor<br>　　　　├─ mappers<br>　　　　│　　├─ client.xml<br>　　　　│　　├─ code.xml<br>　　　　│　　├─ device.setting.xml<br>　　　　│　　├─ device.xml<br>　　　　│　　├─ email.xml<br>　　　　│　　├─ otp.xml<br>　　　　│　　├─ term.xml<br>　　　　│　　├─ user.dormancy.xml<br>　　　　│　　└─ user.xml<br>　　　　├─ packets<br>　　　　│　　├─ request<br>　　　　│　　│　　├─ login.user<br>　　　　│　　│　　├─ join.user<br>　　　　│　　│　　└─ …<br>　　　　│　　├─ response<br>　　　　│　　│　　├─ common.response.code.json<br>　　　　│　　│　　├─ common.response.code<br>　　　　│　　│　　└─ common.response<br>　　　　│　　└─ validator<br>　　　　│　　　　　├─ login.user.validation<br>　　　　│　　　　　├─ join.user.validation<br>　　　　│　　　　　└─ …<br>　　　　├─ public<br>　　　　│　　├─ confirm_member_account_mail.html<br>　　　　│　　├─ find_member_account_mail.html<br>　　　　│　　├─ find_member_password_mail.html<br>　　　　│　　└─ navien.png<br>　　　　├─ smtp<br>　　　　│　　└─ email.service<br>　　　　├─ user<br>　　　　│　　├─ controller<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　　├─ utilities<br>　　　　│　　├─ common.util<br>　　　　│　　├─ crypto.util<br>　　　　│　　└─ database.util<br>　　　　├─ validate<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　app.module<br>　　　main</p>\n<h4 id=\"Node-js를-도입함에-있어-당장-언어에-대해-공부하기보다는-기존-객체지향에-친숙한-언어를-써서-접근하길-원했음\"><a href=\"#Node-js를-도입함에-있어-당장-언어에-대해-공부하기보다는-기존-객체지향에-친숙한-언어를-써서-접근하길-원했음\" class=\"headerlink\" title=\"Node.js를 도입함에 있어 당장 언어에 대해 공부하기보다는 기존 객체지향에 친숙한 언어를 써서 접근하길 원했음.\"></a>Node.js를 도입함에 있어 당장 언어에 대해 공부하기보다는 기존 객체지향에 친숙한 언어를 써서 접근하길 원했음.</h4><h4 id=\"이에-필요한-템플릿을-찾기-시작했고-Nest-js를-발견하게-되었음\"><a href=\"#이에-필요한-템플릿을-찾기-시작했고-Nest-js를-발견하게-되었음\" class=\"headerlink\" title=\"이에 필요한 템플릿을 찾기 시작했고, Nest.js를 발견하게 되었음.\"></a>이에 필요한 템플릿을 찾기 시작했고, Nest.js를 발견하게 되었음.</h4><h4 id=\"annotation도-유사하게-활용이-가능하며-언어-스타일이-Java와-매우-비슷함\"><a href=\"#annotation도-유사하게-활용이-가능하며-언어-스타일이-Java와-매우-비슷함\" class=\"headerlink\" title=\"annotation도 유사하게 활용이 가능하며, 언어 스타일이 Java와 매우 비슷함.\"></a>annotation도 유사하게 활용이 가능하며, 언어 스타일이 Java와 매우 비슷함.</h4><hr>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"@nestjs/common\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;ConstantImplement&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"./constant.implement\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Env&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"../index.config\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author                  <span class=\"variable\">jms</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since                   </span>2020-10-29</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description             </span>공통설정 환경별 분기</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">@Injectable()</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConstantConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  public constConfig() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> result;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (Env) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'local'</span>:</span><br><span class=\"line\">        result = ConstantImplement.local;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'dev'</span>:</span><br><span class=\"line\">        result = ConstantImplement.dev;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'prod'</span>:</span><br><span class=\"line\">        result = ConstantImplement.prod;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        result = ConstantImplement.dev;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"위-bash처럼-만들어주면-Nest-js가-내용을-그대로-node-js-형태로-만들어줌\"><a href=\"#위-bash처럼-만들어주면-Nest-js가-내용을-그대로-node-js-형태로-만들어줌\" class=\"headerlink\" title=\"위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.\"></a>위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.</h4><h4 id=\"nest형태로-서버에-올리기-싫다면-dist폴더로-추출된-Export-파일들을-그대로-서버로-올려주면-된다\"><a href=\"#nest형태로-서버에-올리기-싫다면-dist폴더로-추출된-Export-파일들을-그대로-서버로-올려주면-된다\" class=\"headerlink\" title=\"nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.\"></a>nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.</h4><h4 id=\"개인적으로-언어의-장벽이-높다고-판단이-되거나-신규-언어에-대한-학습-시간이-없을-경우-빠르게-생산할-경우에-대해-nest는-좋은-선택지가-될-수-있다고-봄\"><a href=\"#개인적으로-언어의-장벽이-높다고-판단이-되거나-신규-언어에-대한-학습-시간이-없을-경우-빠르게-생산할-경우에-대해-nest는-좋은-선택지가-될-수-있다고-봄\" class=\"headerlink\" title=\"개인적으로 언어의 장벽이 높다고 판단이 되거나, 신규 언어에 대한 학습 시간이 없을 경우, 빠르게 생산할 경우에 대해 nest는 좋은 선택지가 될 수 있다고 봄.\"></a>개인적으로 언어의 장벽이 높다고 판단이 되거나, 신규 언어에 대한 학습 시간이 없을 경우, 빠르게 생산할 경우에 대해 nest는 좋은 선택지가 될 수 있다고 봄.</h4><hr>\n<h3 id=\"주요-기능\"><a href=\"#주요-기능\" class=\"headerlink\" title=\"주요 기능\"></a>주요 기능</h3><h4 id=\"1-사용자\"><a href=\"#1-사용자\" class=\"headerlink\" title=\"1. 사용자\"></a>1. 사용자</h4><h5 id=\"1-회원가입\"><a href=\"#1-회원가입\" class=\"headerlink\" title=\"　　1) 회원가입\"></a>　　1) 회원가입</h5><h5 id=\"2-로그인\"><a href=\"#2-로그인\" class=\"headerlink\" title=\"　　2) 로그인\"></a>　　2) 로그인</h5><h5 id=\"3-이메일-인증\"><a href=\"#3-이메일-인증\" class=\"headerlink\" title=\"　　3) 이메일 인증\"></a>　　3) 이메일 인증</h5><h5 id=\"4-인증정보-갱신\"><a href=\"#4-인증정보-갱신\" class=\"headerlink\" title=\"　　4) 인증정보 갱신\"></a>　　4) 인증정보 갱신</h5><h5 id=\"5-회원탈퇴\"><a href=\"#5-회원탈퇴\" class=\"headerlink\" title=\"　　5) 회원탈퇴\"></a>　　5) 회원탈퇴</h5><h5 id=\"6-사용자-정보-복구-휴면\"><a href=\"#6-사용자-정보-복구-휴면\" class=\"headerlink\" title=\"　　6) 사용자 정보 복구(휴면)\"></a>　　6) 사용자 정보 복구(휴면)</h5><h5 id=\"7-사용자-정보-조회\"><a href=\"#7-사용자-정보-조회\" class=\"headerlink\" title=\"　　7) 사용자 정보 조회\"></a>　　7) 사용자 정보 조회</h5><h5 id=\"8-사용자-정보-변경\"><a href=\"#8-사용자-정보-변경\" class=\"headerlink\" title=\"　　8) 사용자 정보 변경\"></a>　　8) 사용자 정보 변경</h5><h5 id=\"9-로그인-ID-찾기\"><a href=\"#9-로그인-ID-찾기\" class=\"headerlink\" title=\"　　9) 로그인 ID 찾기\"></a>　　9) 로그인 ID 찾기</h5><h5 id=\"10-사용자-비밀번호-초기화-찾기\"><a href=\"#10-사용자-비밀번호-초기화-찾기\" class=\"headerlink\" title=\"　　10) 사용자 비밀번호 초기화(찾기)\"></a>　　10) 사용자 비밀번호 초기화(찾기)</h5><h5 id=\"11-이용약관-동의\"><a href=\"#11-이용약관-동의\" class=\"headerlink\" title=\"　　11) 이용약관 동의\"></a>　　11) 이용약관 동의</h5><hr>\n<h4 id=\"2-디바이스\"><a href=\"#2-디바이스\" class=\"headerlink\" title=\"2. 디바이스\"></a>2. 디바이스</h4><h5 id=\"1-디바이스-리스트\"><a href=\"#1-디바이스-리스트\" class=\"headerlink\" title=\"　　1) 디바이스 리스트\"></a>　　1) 디바이스 리스트</h5><h5 id=\"2-디바이스-이름-수정\"><a href=\"#2-디바이스-이름-수정\" class=\"headerlink\" title=\"　　2) 디바이스 이름 수정\"></a>　　2) 디바이스 이름 수정</h5><h5 id=\"3-디바이스-푸시-설정정보-조회\"><a href=\"#3-디바이스-푸시-설정정보-조회\" class=\"headerlink\" title=\"　　3) 디바이스 푸시 설정정보 조회\"></a>　　3) 디바이스 푸시 설정정보 조회</h5><h5 id=\"4-디바이스-푸시-설정정보-변경\"><a href=\"#4-디바이스-푸시-설정정보-변경\" class=\"headerlink\" title=\"　　4) 디바이스 푸시 설정정보 변경\"></a>　　4) 디바이스 푸시 설정정보 변경</h5><h5 id=\"5-디바이스-등록\"><a href=\"#5-디바이스-등록\" class=\"headerlink\" title=\"　　5) 디바이스 등록\"></a>　　5) 디바이스 등록</h5><h5 id=\"6-디바이스-삭제\"><a href=\"#6-디바이스-삭제\" class=\"headerlink\" title=\"　　6) 디바이스 삭제\"></a>　　6) 디바이스 삭제</h5><hr>\n<h3 id=\"사용-Library\"><a href=\"#사용-Library\" class=\"headerlink\" title=\"사용 Library\"></a>사용 Library</h3><h5 id=\"1-로그-nest-winston\"><a href=\"#1-로그-nest-winston\" class=\"headerlink\" title=\"　　1) 로그 : nest-winston\"></a>　　1) 로그 : nest-winston</h5><h5 id=\"2-AWS-aws-sdk\"><a href=\"#2-AWS-aws-sdk\" class=\"headerlink\" title=\"　　2) AWS : aws-sdk\"></a>　　2) AWS : aws-sdk</h5><h5 id=\"3-parameter-검증-joi\"><a href=\"#3-parameter-검증-joi\" class=\"headerlink\" title=\"　　3) parameter 검증 : joi\"></a>　　3) parameter 검증 : joi</h5><h5 id=\"4-단방향Hash-bcryptjs\"><a href=\"#4-단방향Hash-bcryptjs\" class=\"headerlink\" title=\"　　4) 단방향Hash : bcryptjs\"></a>　　4) 단방향Hash : bcryptjs</h5><h5 id=\"5-시간-moment\"><a href=\"#5-시간-moment\" class=\"headerlink\" title=\"　　5) 시간 : moment\"></a>　　5) 시간 : moment</h5><h5 id=\"6-JWT-Token-jsonwebtoken\"><a href=\"#6-JWT-Token-jsonwebtoken\" class=\"headerlink\" title=\"　　6) JWT Token : jsonwebtoken\"></a>　　6) JWT Token : jsonwebtoken</h5><h5 id=\"7-이메일-발송-nestjs-modules-mailer\"><a href=\"#7-이메일-발송-nestjs-modules-mailer\" class=\"headerlink\" title=\"　　7) 이메일 발송 : @nestjs-modules/mailer\"></a>　　7) 이메일 발송 : @nestjs-modules/mailer</h5><h5 id=\"8-양방향-암호화-AES256-crypto\"><a href=\"#8-양방향-암호화-AES256-crypto\" class=\"headerlink\" title=\"　　8) 양방향 암호화 AES256 : crypto\"></a>　　8) 양방향 암호화 AES256 : crypto</h5><h5 id=\"9-Database-pool-mysql2\"><a href=\"#9-Database-pool-mysql2\" class=\"headerlink\" title=\"　　9) Database pool : mysql2\"></a>　　9) Database pool : mysql2</h5><h5 id=\"10-Database-mapper-mybatis-mapper\"><a href=\"#10-Database-mapper-mybatis-mapper\" class=\"headerlink\" title=\"　　10) Database mapper : mybatis-mapper\"></a>　　10) Database mapper : mybatis-mapper</h5><h5 id=\"11-파일시스템-fs\"><a href=\"#11-파일시스템-fs\" class=\"headerlink\" title=\"　　11) 파일시스템 : fs\"></a>　　11) 파일시스템 : fs</h5><h5 id=\"12-임의String생성-rand-token\"><a href=\"#12-임의String생성-rand-token\" class=\"headerlink\" title=\"　　12) 임의String생성 : rand-token\"></a>　　12) 임의String생성 : rand-token</h5><hr>\n<h5 id=\"결국은-2주만에-모든-기능을-만들었다-솔직히-Nest를-활용했기-때문에-빠르게-끝냈을-것으로-보이며-순수-Node-js를-사용했다면-최소-1달-이상은-걸렸을-것이라고-확신한다\"><a href=\"#결국은-2주만에-모든-기능을-만들었다-솔직히-Nest를-활용했기-때문에-빠르게-끝냈을-것으로-보이며-순수-Node-js를-사용했다면-최소-1달-이상은-걸렸을-것이라고-확신한다\" class=\"headerlink\" title=\"결국은 2주만에 모든 기능을 만들었다. 솔직히 Nest를 활용했기 때문에 빠르게 끝냈을 것으로 보이며, 순수 Node.js를 사용했다면 최소 1달 이상은 걸렸을 것이라고 확신한다.\"></a>결국은 2주만에 모든 기능을 만들었다. 솔직히 Nest를 활용했기 때문에 빠르게 끝냈을 것으로 보이며, 순수 Node.js를 사용했다면 최소 1달 이상은 걸렸을 것이라고 확신한다.</h5><h5 id=\"앱과-디바이스쪽-테스트에서도-좋은-성능을-기대한다\"><a href=\"#앱과-디바이스쪽-테스트에서도-좋은-성능을-기대한다\" class=\"headerlink\" title=\"앱과 디바이스쪽 테스트에서도 좋은 성능을 기대한다.\"></a>앱과 디바이스쪽 테스트에서도 좋은 성능을 기대한다.</h5>","text":"API Template 구조도 [Figure] 위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.개인적","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":23,"path":"api/categories/tip.json"}],"tags":[{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"api","slug":"api","count":2,"path":"api/tags/api.json"},{"name":"template","slug":"template","count":1,"path":"api/tags/template.json"}]},{"title":"node.js TypeORM, Sequelize Test","slug":"node-js-TypeORM-Sequelize-Test","date":"2020-11-18T23:32:52.000Z","updated":"2020-11-23T01:24:14.574Z","comments":true,"pin":null,"path":"api/articles/node-js-TypeORM-Sequelize-Test.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png","content":"<h2 id=\"API에서-Sequelize-사용하기\"><a href=\"#API에서-Sequelize-사용하기\" class=\"headerlink\" title=\"API에서 Sequelize 사용하기\"></a>API에서 Sequelize 사용하기</h2><hr>\n<h4 id=\"1-Install\"><a href=\"#1-Install\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g --save mysql2</span><br><span class=\"line\"></span><br><span class=\"line\">npm install -g --save sequelize</span><br><span class=\"line\">npm install -g --save sequelize-cli</span><br><span class=\"line\">npm install -g --save sequelize-auto</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-Sequelize-설정\"><a href=\"#2-Sequelize-설정\" class=\"headerlink\" title=\"2. Sequelize 설정\"></a>2. Sequelize 설정</h4> <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequelize-auto -o [MODEL_PATH] -d [TABLE] -h [DATABASE_ADDRESS] -u [USERID] -x [PASSWORD] -p [DATABASE_PORT] -e [DATABASE_TYPE]</span><br></pre></td></tr></table></figure></div>\n<h5 id=\"1-o-mapper-model\"><a href=\"#1-o-mapper-model\" class=\"headerlink\" title=\"1) -o : mapper model\"></a>1) -o : mapper model</h5><h5 id=\"2-d-table\"><a href=\"#2-d-table\" class=\"headerlink\" title=\"2) -d : table\"></a>2) -d : table</h5><h5 id=\"3-h-database\"><a href=\"#3-h-database\" class=\"headerlink\" title=\"3) -h : database\"></a>3) -h : database</h5><h5 id=\"4-u-userId\"><a href=\"#4-u-userId\" class=\"headerlink\" title=\"4) -u : userId\"></a>4) -u : userId</h5><h5 id=\"5-x-password\"><a href=\"#5-x-password\" class=\"headerlink\" title=\"5) -x : password\"></a>5) -x : password</h5><h5 id=\"6-p-port\"><a href=\"#6-p-port\" class=\"headerlink\" title=\"6) -p : port\"></a>6) -p : port</h5><h5 id=\"7-e-database-type\"><a href=\"#7-e-database-type\" class=\"headerlink\" title=\"7) -e : database type\"></a>7) -e : database type</h5><h4 id=\"3-model-mapper\"><a href=\"#3-model-mapper\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* jshint indent: 2 */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sequelize, DataTypes</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sequelize.define(<span class=\"string\">'userInfo'</span>, &#123;</span><br><span class=\"line\">    seq: &#123;</span><br><span class=\"line\">      autoIncrement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      type: DataTypes.INTEGER(<span class=\"number\">11</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      primaryKey: <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"comment\">/*get() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        const rawValue = this.getDataValue(seq);</span></span><br><span class=\"line\"><span class=\"comment\">        return rawValue ? rawValue.toUpperCase() : null;</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;*/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    id: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">30</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    password: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">100</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    email: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">50</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    loginDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    registDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    tableName: <span class=\"string\">'userInfo'</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-model-index-code\"><a href=\"#4-model-index-code\" class=\"headerlink\" title=\"4. model index code\"></a>4. model index code</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"><span class=\"comment\">//프로젝트의 파일을 읽기위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"comment\">//프로젝트 파일의 경로를 얻기 위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Sequelize = <span class=\"built_in\">require</span>(<span class=\"string\">'sequelize'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> basename = path.basename(__filename);</span><br><span class=\"line\"><span class=\"keyword\">const</span> env = process.env.NODE_ENV;</span><br><span class=\"line\"><span class=\"comment\">//DB 연결정보를 환경변수로 가변설정</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(__dirname + <span class=\"string\">'/../config/dbConfig.json'</span>)[env];</span><br><span class=\"line\"><span class=\"keyword\">const</span> db = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// nodejs에서 mysql 접근을 쉽게 할 수 있도록 하는 라이브러리 사용(ORM 맵핑을 위해 사용한 것으로 파악)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> Sequelize(config.database, config.username, config.password, config);</span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 1. 직접 선언형태의 방법을 사용하는 방법.</span></span><br><span class=\"line\">db.userInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/userInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\">db.deviceInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/deviceInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 2. 자동으로 파일에서 로드하여 필요한 객체를 받아오는 방법.</span></span><br><span class=\"line\"><span class=\"comment\">//https://blog.csdn.net/weixin_34324081/article/details/91445015</span></span><br><span class=\"line\"><span class=\"comment\">//fs를 통해 자동으로 로드되서 실행되고(ORM) 생성된 모델 객체가 db객체 아래에 마운트됨..</span></span><br><span class=\"line\">fs</span><br><span class=\"line\">    .readdirSync(__dirname)</span><br><span class=\"line\">    .filter(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (file.indexOf(<span class=\"string\">'.'</span>) !== <span class=\"number\">0</span>) &amp;&amp; (file !== basename) &amp;&amp; (file.slice(<span class=\"number\">-3</span>) === <span class=\"string\">'.js'</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .forEach(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> model = <span class=\"built_in\">require</span>(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);</span><br><span class=\"line\">        db[model.name] = model;</span><br><span class=\"line\">        <span class=\"comment\">//console.log(model.name);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.keys(db).forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">modelName</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (db[modelName].associate) &#123;</span><br><span class=\"line\">        db[modelName].associate(db);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">db.sequelize = sequelize;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = db;</span><br></pre></td></tr></table></figure></div>\n\n<h2 id=\"API에서-TypeORM-사용하기\"><a href=\"#API에서-TypeORM-사용하기\" class=\"headerlink\" title=\"API에서 TypeORM 사용하기\"></a>API에서 TypeORM 사용하기</h2><h4 id=\"1-Install-1\"><a href=\"#1-Install-1\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save @nestjs/typeorm</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-TypeORM-Repository-활용\"><a href=\"#2-TypeORM-Repository-활용\" class=\"headerlink\" title=\"2. TypeORM.Repository 활용\"></a>2. TypeORM.Repository 활용</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Repository, EntityRepository &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"typeorm\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; User &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../user/entities/user.entity'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@EntityRepository(User)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserRepository</span> <span class=\"keyword\">extends</span> <span class=\"title\">Repository</span>&lt;<span class=\"title\">User</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"3-model-mapper-1\"><a href=\"#3-model-mapper-1\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Entity, Column, PrimaryColumn &#125; <span class=\"keyword\">from</span> <span class=\"string\">'typeorm'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapping &#125; <span class=\"keyword\">from</span> <span class=\"string\">'auto-mapping'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@Entity(<span class=\"string\">'TBL_USERsss'</span>, &#123; <span class=\"attr\">synchronize</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">  @PrimaryColumn(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_id'</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  id: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_pwd'</span>, <span class=\"attr\">length</span>: <span class=\"number\">128</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  password: string;</span><br><span class=\"line\">  <span class=\"comment\">//@ForeignKey(() =&gt; Profile)</span></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'usergroup_id'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Number</span> &#125;)</span><br><span class=\"line\">  userGroupId: number;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_status'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  userStatus: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_name'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  name: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_mobileno'</span>, <span class=\"attr\">length</span>: <span class=\"number\">13</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobile: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_email'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  email: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_birthday'</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  birthday: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'mobile_model'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobileModel: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_type'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  os: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  osVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'app_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">8</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  appVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_logindt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  loginDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_loginip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  loginIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  insertDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  insertIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  updateDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  updateIp: string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-Type-ORM-Method\"><a href=\"#4-Type-ORM-Method\" class=\"headerlink\" title=\"4. Type ORM Method\"></a>4. Type ORM Method</h4><p><a href=\"https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" target=\"_blank\" rel=\"noopener\">https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0</a></p>\n<ul>\n<li>save, findone등 여러 method들이 있다. 활용하면 간단한 SQL은 충분히 날려볼 수 있다.</li>\n</ul>\n<h2 id=\"성능비교\"><a href=\"#성능비교\" class=\"headerlink\" title=\"성능비교\"></a>성능비교</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" alt=\"image\"></a></p>\n<ul>\n<li>너무 차이가 나기에 편리함vs성능 둘 중 어느 것을 택할지는 비지니스 성격에 맞춰야 할 것으로 보임.</li>\n</ul>\n","text":"API에서 Sequelize 사용하기1. Install1<br>2<br>3<br>4<br>5<br>npm install -g --save mysql2<br><br>npm install -g --save sequelize<br>npm install -g","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":23,"path":"api/categories/tip.json"}],"tags":[{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"api","slug":"api","count":2,"path":"api/tags/api.json"},{"name":"ORM","slug":"ORM","count":1,"path":"api/tags/ORM.json"},{"name":"sequelize","slug":"sequelize","count":1,"path":"api/tags/sequelize.json"}]}]}