{"name":"cloudwatch","slug":"cloudwatch","count":1,"posts":[{"title":"Cloudwatch","slug":"Cloudwatch","date":"2020-05-06T03:23:02.000Z","updated":"2020-05-11T01:11:50.837Z","comments":true,"pin":null,"path":"api/articles/Cloudwatch.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/81136824-a1773800-8f97-11ea-92eb-48864ea3c85c.png","content":"<h2 id=\"개발환경-구축\"><a href=\"#개발환경-구축\" class=\"headerlink\" title=\"개발환경 구축\"></a>개발환경 구축</h2><p>※ 기본 개발환경</p>\n<ul>\n<li>IntelliJ</li>\n<li>Java, Spring</li>\n<li>AWS Console</li>\n</ul>\n<h2 id=\"CloudWatch-설명\"><a href=\"#CloudWatch-설명\" class=\"headerlink\" title=\"CloudWatch 설명\"></a>CloudWatch 설명</h2><p>관련정보1 : <a href=\"https://aws.amazon.com/ko/blogs/korea/new-amazon-cloudwatch-logs-insights-fast-interactive-log-analytics/\" target=\"_blank\" rel=\"noopener\">AWS 한국블로그 CloudWatch Logs Insights – 빠른 대화형 로그 분석 기능 출시 (서울 리전 포함)</a><br>관련정보2 : <a href=\"http://labs.brandi.co.kr/2019/05/30/kwakjs.html\" target=\"_blank\" rel=\"noopener\">CloudWatch에 대하여 AWS 리소스를 효과적으로 모니터링하기</a>  / 브랜디 랩스(Brandi Labs) 곽정섭 과장<br>관련정보3 : <a href=\"https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/logs/AnalyzingLogData.html\" target=\"_blank\" rel=\"noopener\">CloudWatch Logs Insights로 로그 데이터 분석 (샘플많음)</a></p>\n<p>Cloudwatch는 통합 뷰를 확보하는데 필요한 데이터를 제공합니다. 뿐만 아니라 이벤트 및 리소스를 이용해 경보를 생성할 수도 있습니다.</p>\n<ol>\n<li>Events</li>\n<li>Logs</li>\n<li>Custom Metrics(맞춤형 지표) 생성하기</li>\n<li>Alarm 생성</li>\n<li>Dashboards<br>쉬어가기: Query 언어가 지원하는 여섯 가지 명령 유형</li>\n</ol>\n<h3 id=\"1-Events\"><a href=\"#1-Events\" class=\"headerlink\" title=\"1. Events\"></a>1. Events</h3><ul>\n<li>CloudWatch Events는 정기적인 일정에서 트리거(trigger)되는 규칙을 생성할 수 있습니다.</li>\n</ul>\n<h4 id=\"1-규칙-생성을-클릭합니다\"><a href=\"#1-규칙-생성을-클릭합니다\" class=\"headerlink\" title=\"1) 규칙 생성을 클릭합니다.\"></a>1) 규칙 생성을 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136824-a1773800-8f97-11ea-92eb-48864ea3c85c.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136824-a1773800-8f97-11ea-92eb-48864ea3c85c.png\" alt=\"cloudwatch_01\"></a></p>\n<h4 id=\"2-대상을-호출할-일정을-설정합니다\"><a href=\"#2-대상을-호출할-일정을-설정합니다\" class=\"headerlink\" title=\"2) 대상을 호출할 일정을 설정합니다.\"></a>2) 대상을 호출할 일정을 설정합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136819-9fad7480-8f97-11ea-82b4-cf0ae2055c46.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136819-9fad7480-8f97-11ea-82b4-cf0ae2055c46.png\" alt=\"cloudwatch_02\"></a></p>\n<ul>\n<li>호출 방식에는 이벤트 패턴과 일정 두 가지가 있습니다. 이벤트 패턴은 json 구조로 표현됩니다. AWS 서비스에서 발생하는 패턴과 일치하면 트리거가 동작합니다. 일정은 지정한 시간과 일치하면 트리거가 동작합니다.</li>\n<li>cron 또는 rate 표현식을 사용해 예약된 모든 이벤트는 UTC+09:00 시간대를 사용합니다. 최초 단위는 1분입니다.</li>\n<li>아래는 각각의 필드에 대한 일정 cron식 설명입니다.<br><a href=\"https://user-images.githubusercontent.com/62123161/81136870-ac31cd00-8f97-11ea-869f-34e38e5832dd.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136870-ac31cd00-8f97-11ea-869f-34e38e5832dd.png\" alt=\"cloudwatch_03\"></a></li>\n</ul>\n<p>이번 예제에서는 특정 시간에 트리거되는 일정으로 설정하겠습니다.</p>\n<pre><code>매일 4시에 동작하도록 설정\n19 + 9(UTC) - 24(하루) = 새벽 4시</code></pre><h4 id=\"3-대상-추가를-선택해-호출할-대상을-지정합니다\"><a href=\"#3-대상-추가를-선택해-호출할-대상을-지정합니다\" class=\"headerlink\" title=\"3) 대상 추가를 선택해 호출할 대상을 지정합니다.\"></a>3) 대상 추가를 선택해 호출할 대상을 지정합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136868-ab993680-8f97-11ea-86ca-acc176cea2ee.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136868-ab993680-8f97-11ea-86ca-acc176cea2ee.png\" alt=\"cloudwatch_04\"></a></p>\n<ul>\n<li>Lambda 함수 외에 여러 서비스를 선택할 수 있지만 이번 예제에서는 Lambda 함수를 지정하여 구성하겠습니다.</li>\n</ul>\n<h4 id=\"4-규칙의-이름과-설명을-등록하고-규칙-생성을-클릭합니다\"><a href=\"#4-규칙의-이름과-설명을-등록하고-규칙-생성을-클릭합니다\" class=\"headerlink\" title=\"4) 규칙의 이름과 설명을 등록하고 규칙 생성을 클릭합니다.\"></a>4) 규칙의 이름과 설명을 등록하고 규칙 생성을 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136867-ab993680-8f97-11ea-8521-791899fc62a1.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136867-ab993680-8f97-11ea-8521-791899fc62a1.png\" alt=\"cloudwatch_05\"></a></p>\n<h4 id=\"5-규칙이-생성된-것을-볼-수-있습니다\"><a href=\"#5-규칙이-생성된-것을-볼-수-있습니다\" class=\"headerlink\" title=\"5) 규칙이 생성된 것을 볼 수 있습니다.\"></a>5) 규칙이 생성된 것을 볼 수 있습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136866-ab00a000-8f97-11ea-85dd-bcc0d63b6a6b.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136866-ab00a000-8f97-11ea-85dd-bcc0d63b6a6b.png\" alt=\"cloudwatch_06\"></a></p>\n<h3 id=\"2-Logs\"><a href=\"#2-Logs\" class=\"headerlink\" title=\"2. Logs\"></a>2. Logs</h3><ul>\n<li>CloudWatch Logs는 운영 중인 애플리케이션 리소스를 기록하고 액세스할 수 있으며, 관련된 로그 데이터를 검색할 수도 있습니다.</li>\n</ul>\n<h4 id=\"1-생성된-규칙이-지정된-시간에-동작하면-CloudWatch-Logs에-로그-그룹이-생성된-걸-확인할-수-있습니다\"><a href=\"#1-생성된-규칙이-지정된-시간에-동작하면-CloudWatch-Logs에-로그-그룹이-생성된-걸-확인할-수-있습니다\" class=\"headerlink\" title=\"1) 생성된 규칙이 지정된 시간에 동작하면 CloudWatch Logs에 로그 그룹이 생성된 걸 확인할 수 있습니다.\"></a>1) 생성된 규칙이 지정된 시간에 동작하면 CloudWatch Logs에 로그 그룹이 생성된 걸 확인할 수 있습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136865-ab00a000-8f97-11ea-90ac-b424d7c50232.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136865-ab00a000-8f97-11ea-90ac-b424d7c50232.png\" alt=\"cloudwatch_07\"></a></p>\n<h4 id=\"2-Lambda-함수에서-실행된-로그-메시지를-확인할-수-있으며-필터링도-가능합니다\"><a href=\"#2-Lambda-함수에서-실행된-로그-메시지를-확인할-수-있으며-필터링도-가능합니다\" class=\"headerlink\" title=\"2) Lambda 함수에서 실행된 로그 메시지를 확인할 수 있으며 필터링도 가능합니다.\"></a>2) Lambda 함수에서 실행된 로그 메시지를 확인할 수 있으며 필터링도 가능합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136864-aa680980-8f97-11ea-8eef-41e82e9dc268.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136864-aa680980-8f97-11ea-8eef-41e82e9dc268.png\" alt=\"cloudwatch_08\"></a></p>\n<h4 id=\"3-로그-그룹에-이벤트-만료-시점을-설정해-오래된-데이터는-모두-자동으로-삭제되도록-설정할-수-있습니다\"><a href=\"#3-로그-그룹에-이벤트-만료-시점을-설정해-오래된-데이터는-모두-자동으로-삭제되도록-설정할-수-있습니다\" class=\"headerlink\" title=\"3) 로그 그룹에 이벤트 만료 시점을 설정해 오래된 데이터는 모두 자동으로 삭제되도록 설정할 수 있습니다.\"></a>3) 로그 그룹에 이벤트 만료 시점을 설정해 오래된 데이터는 모두 자동으로 삭제되도록 설정할 수 있습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136863-aa680980-8f97-11ea-8c89-481f9d2a5e96.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136863-aa680980-8f97-11ea-8c89-481f9d2a5e96.png\" alt=\"cloudwatch_09\"></a></p>\n<h3 id=\"3-Custom-Metrics-맞춤형-지표-생성하기\"><a href=\"#3-Custom-Metrics-맞춤형-지표-생성하기\" class=\"headerlink\" title=\"3. Custom Metrics(맞춤형 지표) 생성하기\"></a>3. Custom Metrics(맞춤형 지표) 생성하기</h3><ul>\n<li>모니터링하고자 하는 통계치를 직접 선정하고, CloudWatch로 보내 관리하는 지표를 생성해보겠습니다.</li>\n</ul>\n<h4 id=\"1-Log-Groups에-대한-지표를-생성하겠습니다-해당-Log-Groups에-‘Filters’를-클릭합니다\"><a href=\"#1-Log-Groups에-대한-지표를-생성하겠습니다-해당-Log-Groups에-‘Filters’를-클릭합니다\" class=\"headerlink\" title=\"1) Log Groups에 대한 지표를 생성하겠습니다. 해당 Log Groups에 ‘Filters’를 클릭합니다.\"></a>1) Log Groups에 대한 지표를 생성하겠습니다. 해당 Log Groups에 ‘Filters’를 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136861-a9cf7300-8f97-11ea-962b-2ae12f327932.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136861-a9cf7300-8f97-11ea-962b-2ae12f327932.png\" alt=\"cloudwatch_10\"></a></p>\n<h4 id=\"2-‘Add-Metric-Filter’를-클릭합니다\"><a href=\"#2-‘Add-Metric-Filter’를-클릭합니다\" class=\"headerlink\" title=\"2) ‘Add Metric Filter’를 클릭합니다.\"></a>2) ‘Add Metric Filter’를 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136860-a9cf7300-8f97-11ea-8fcb-f458d334ba84.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136860-a9cf7300-8f97-11ea-8fcb-f458d334ba84.png\" alt=\"cloudwatch_11\"></a></p>\n<h4 id=\"3-로그-지표에-대한-필터-패턴을-정의합니다\"><a href=\"#3-로그-지표에-대한-필터-패턴을-정의합니다\" class=\"headerlink\" title=\"3) 로그 지표에 대한 필터 패턴을 정의합니다.\"></a>3) 로그 지표에 대한 필터 패턴을 정의합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136859-a936dc80-8f97-11ea-98e9-17f750bde971.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136859-a936dc80-8f97-11ea-98e9-17f750bde971.png\" alt=\"cloudwatch_12\"></a></p>\n<p>[Filter Pattern]</p>\n<ul>\n<li>“INFO Success 200” → 세 단어를 모두 포함하는 로그 이벤트 메시지와 일치</li>\n<li>“INFO - Start - End” → ‘INFO’ 포함된 메시지 중에 ‘Start’, ‘End’ 제외된 필터 로그 이벤트 메시지와 일치</li>\n</ul>\n<h4 id=\"4-필터-및-지표-정보를-입력한-후-‘Create-Filter’를-클릭합니다\"><a href=\"#4-필터-및-지표-정보를-입력한-후-‘Create-Filter’를-클릭합니다\" class=\"headerlink\" title=\"4) 필터 및 지표 정보를 입력한 후 ‘Create Filter’를 클릭합니다.\"></a>4) 필터 및 지표 정보를 입력한 후 ‘Create Filter’를 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136858-a936dc80-8f97-11ea-882c-d3ccae0441c8.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136858-a936dc80-8f97-11ea-882c-d3ccae0441c8.png\" alt=\"cloudwatch_13\"></a></p>\n<p>[Metric Details]</p>\n<ul>\n<li>Metric Namespace → CloudWatch 지표에 대한 대상 네임 스페이스</li>\n<li>Metric Name → 모니터링된 로그 정보가 게시되는 CloudWatch 지표의 이름</li>\n<li>Metric Value → 일치하는 로그가 발견될 때마다 지표에 게시하는 숫자 값</li>\n<li>Default Value → 일치하는 로그가 발견되지 않은 기간 동안 지표 필터에 보고되는 값</li>\n</ul>\n<h4 id=\"5-두-가지-케이스의-필터를-생성했습니다\"><a href=\"#5-두-가지-케이스의-필터를-생성했습니다\" class=\"headerlink\" title=\"5) 두 가지 케이스의 필터를 생성했습니다.\"></a>5) 두 가지 케이스의 필터를 생성했습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136857-a89e4600-8f97-11ea-9084-35ce4d7b7fc8.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136857-a89e4600-8f97-11ea-9084-35ce4d7b7fc8.png\" alt=\"cloudwatch_14\"></a></p>\n<h3 id=\"4-Alarm-생성\"><a href=\"#4-Alarm-생성\" class=\"headerlink\" title=\"4. Alarm 생성\"></a>4. Alarm 생성</h3><ul>\n<li>단일 CloudWatch 지표를 감시하거나 CloudWatch 측정치를 기반으로 하는 수학 표현식의 결과를 감시하는 CloudWatch 경보를 생성할 수 있습니다. 지표가 지정된 임계값에 도달하면 자동으로 이메일을 보내는 Alarm을 만들어보겠습니다.</li>\n</ul>\n<h4 id=\"1-추가된-지표-필터에-‘Create-Alarm’-버튼을-클릭해-경보를-추가합니다\"><a href=\"#1-추가된-지표-필터에-‘Create-Alarm’-버튼을-클릭해-경보를-추가합니다\" class=\"headerlink\" title=\"1) 추가된 지표 필터에 ‘Create Alarm’ 버튼을 클릭해 경보를 추가합니다.\"></a>1) 추가된 지표 필터에 ‘Create Alarm’ 버튼을 클릭해 경보를 추가합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136856-a805af80-8f97-11ea-94ee-0f7a54314ac6.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136856-a805af80-8f97-11ea-94ee-0f7a54314ac6.png\" alt=\"cloudwatch_15\"></a></p>\n<h4 id=\"2-경보-세부-정보-및-수행할-작업을-정의합니다\"><a href=\"#2-경보-세부-정보-및-수행할-작업을-정의합니다\" class=\"headerlink\" title=\"2) 경보 세부 정보 및 수행할 작업을 정의합니다.\"></a>2) 경보 세부 정보 및 수행할 작업을 정의합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136853-a805af80-8f97-11ea-88ae-7f0f0004a3f9.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136853-a805af80-8f97-11ea-88ae-7f0f0004a3f9.png\" alt=\"cloudwatch_16\"></a></p>\n<p>[경보 평가]</p>\n<ul>\n<li>경보를 생성할 때, CloudWatch가 경보 상태를 변경하는 조건 세 가지에 대한 설정을 지정할 수 있습니다.</li>\n<li>기간은 경보에 대해 개별 데이터 포인트를 생성하기 위해 지표 또는 표현식을 평가하는 기간입니다. 초로 표시됩니다. 1분을 기간으로 선택하면 1분마다 하나의 데이터 포인트가 생성됩니다.</li>\n<li>Evaluation Period(평가 기간)는 경보 상태를 결정할 때 평가할 가장 최근의 기간 또는 데이터 포인트의 수입니다.</li>\n<li>Datapoints to Alarm(경보에 대한 데이터포인트)는 평가 기간에 경보가 ALARM상태에 도달하게 만드는 위반 데이터 포인트의 수입니다. 위반 데이터 포인트가 연속적일 필요는 없습니다. Evaluation Period(평가 기간)와 동일한 마지막 데이터 포인트의 수 이내면 됩니다.</li>\n</ul>\n<h4 id=\"3-경보가-발생할-Alarm-상태와-알림-받을-이메일을-등록합니다\"><a href=\"#3-경보가-발생할-Alarm-상태와-알림-받을-이메일을-등록합니다\" class=\"headerlink\" title=\"3) 경보가 발생할 Alarm 상태와 알림 받을 이메일을 등록합니다.\"></a>3) 경보가 발생할 Alarm 상태와 알림 받을 이메일을 등록합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136851-a76d1900-8f97-11ea-935c-e3f135265dad.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136851-a76d1900-8f97-11ea-935c-e3f135265dad.png\" alt=\"cloudwatch_17\"></a></p>\n<p>[경보 상태]</p>\n<ul>\n<li>/OK/ 지표 또는 표현식이 정의된 임계값 내에 있습니다.</li>\n<li>/ALARM/ 지표 또는 표현식이 정의된 임계값을 벗어났습니다.</li>\n<li>/INSUFFICIENT_DATA/ 경보가 방금 시작되었거나, 측정치를 사용할 수 없거나, 또는 측정치를 통해 경보 상태를 결정하는데 사용할 충분한 데이터가 없습니다.</li>\n</ul>\n<h4 id=\"4-이메일-수신함에서-‘AWS-알림-구독-확인’이라는-제목의-메일을-클릭합니다-내용에-포함된-링크를-클릭해-알림을-수신할-것을-확인합니다-AWS는-확인된-주소로만-알림을-전송할-수-있습니다\"><a href=\"#4-이메일-수신함에서-‘AWS-알림-구독-확인’이라는-제목의-메일을-클릭합니다-내용에-포함된-링크를-클릭해-알림을-수신할-것을-확인합니다-AWS는-확인된-주소로만-알림을-전송할-수-있습니다\" class=\"headerlink\" title=\"4) 이메일 수신함에서 ‘AWS 알림 - 구독 확인’이라는 제목의 메일을 클릭합니다. 내용에 포함된 링크를 클릭해 알림을 수신할 것을 확인합니다. (AWS는 확인된 주소로만 알림을 전송할 수 있습니다.)\"></a>4) 이메일 수신함에서 ‘AWS 알림 - 구독 확인’이라는 제목의 메일을 클릭합니다. 내용에 포함된 링크를 클릭해 알림을 수신할 것을 확인합니다. (AWS는 확인된 주소로만 알림을 전송할 수 있습니다.)</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136849-a76d1900-8f97-11ea-82db-d3e87858e425.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136849-a76d1900-8f97-11ea-82db-d3e87858e425.png\" alt=\"cloudwatch_18\"></a></p>\n<h4 id=\"5-이메일-수신함을-확인해-‘Confirm-subscription’을-클릭합니다\"><a href=\"#5-이메일-수신함을-확인해-‘Confirm-subscription’을-클릭합니다\" class=\"headerlink\" title=\"5) 이메일 수신함을 확인해 ‘Confirm subscription’을 클릭합니다.\"></a>5) 이메일 수신함을 확인해 ‘Confirm subscription’을 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136848-a6d48280-8f97-11ea-8f5d-8002c1d79f6e.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136848-a6d48280-8f97-11ea-8f5d-8002c1d79f6e.png\" alt=\"cloudwatch_19\"></a></p>\n<h4 id=\"6-등록한-이메일이-확인되었습니다\"><a href=\"#6-등록한-이메일이-확인되었습니다\" class=\"headerlink\" title=\"6) 등록한 이메일이 확인되었습니다.\"></a>6) 등록한 이메일이 확인되었습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136846-a6d48280-8f97-11ea-9330-9c8e104c4c71.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136846-a6d48280-8f97-11ea-9330-9c8e104c4c71.png\" alt=\"cloudwatch_20\"></a></p>\n<h4 id=\"7-AWS에-이메일이-정상적으로-등록되었는지-SNS-Subscriptions-메뉴에서-확인합니다\"><a href=\"#7-AWS에-이메일이-정상적으로-등록되었는지-SNS-Subscriptions-메뉴에서-확인합니다\" class=\"headerlink\" title=\"7) AWS에 이메일이 정상적으로 등록되었는지 SNS Subscriptions 메뉴에서 확인합니다.\"></a>7) AWS에 이메일이 정상적으로 등록되었는지 SNS Subscriptions 메뉴에서 확인합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136843-a63bec00-8f97-11ea-8d8c-62337063d511.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136843-a63bec00-8f97-11ea-8d8c-62337063d511.png\" alt=\"cloudwatch_21\"></a></p>\n<h4 id=\"8-Lambda를-실행해-Alarm-상태를-변경해보겠습니다\"><a href=\"#8-Lambda를-실행해-Alarm-상태를-변경해보겠습니다\" class=\"headerlink\" title=\"8) Lambda를 실행해 Alarm 상태를 변경해보겠습니다.\"></a>8) Lambda를 실행해 Alarm 상태를 변경해보겠습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136842-a5a35580-8f97-11ea-855d-fd985915dced.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136842-a5a35580-8f97-11ea-855d-fd985915dced.png\" alt=\"cloudwatch_22\"></a></p>\n<h4 id=\"9-등록한-이메일-주소로-Alarm-메일이-도착했습니다\"><a href=\"#9-등록한-이메일-주소로-Alarm-메일이-도착했습니다\" class=\"headerlink\" title=\"9) 등록한 이메일 주소로 Alarm 메일이 도착했습니다.\"></a>9) 등록한 이메일 주소로 Alarm 메일이 도착했습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136841-a5a35580-8f97-11ea-959b-6309f5e07572.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136841-a5a35580-8f97-11ea-959b-6309f5e07572.png\" alt=\"cloudwatch_23\"></a></p>\n<h3 id=\"5-Dashboards\"><a href=\"#5-Dashboards\" class=\"headerlink\" title=\"5. Dashboards\"></a>5. Dashboards</h3><ul>\n<li>CloudWatch를 통해 리소스를 손쉽게 모니터링할 수 있는 맞춤형 통계 기능입니다.</li>\n</ul>\n<h4 id=\"1-Metric-Filter에서-추가된-Custom-Namespaces를-클릭합니다\"><a href=\"#1-Metric-Filter에서-추가된-Custom-Namespaces를-클릭합니다\" class=\"headerlink\" title=\"1) Metric Filter에서 추가된 Custom Namespaces를 클릭합니다.\"></a>1) Metric Filter에서 추가된 Custom Namespaces를 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136840-a50abf00-8f97-11ea-8cbe-0e2430cf7490.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136840-a50abf00-8f97-11ea-8cbe-0e2430cf7490.png\" alt=\"cloudwatch_24\"></a></p>\n<h4 id=\"2-생성된-Metrics를-선택한-후-Graphed-metrics-Tab을-클릭합니다\"><a href=\"#2-생성된-Metrics를-선택한-후-Graphed-metrics-Tab을-클릭합니다\" class=\"headerlink\" title=\"2) 생성된 Metrics를 선택한 후, Graphed metrics Tab을 클릭합니다.\"></a>2) 생성된 Metrics를 선택한 후, Graphed metrics Tab을 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136839-a50abf00-8f97-11ea-8ee6-8cb8911478b0.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136839-a50abf00-8f97-11ea-8ee6-8cb8911478b0.png\" alt=\"cloudwatch_25\"></a></p>\n<h4 id=\"3-Metrics에-표시될-그래프를-설정합니다\"><a href=\"#3-Metrics에-표시될-그래프를-설정합니다\" class=\"headerlink\" title=\"3) Metrics에 표시될 그래프를 설정합니다.\"></a>3) Metrics에 표시될 그래프를 설정합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136838-a4722880-8f97-11ea-97c4-43f2206da42b.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136838-a4722880-8f97-11ea-97c4-43f2206da42b.png\" alt=\"cloudwatch_26\"></a><br>1)그래프 제목 : testLambda1<br>2)그래프 표시 : 숫자<br>3)그래프 라벨 : testMetrics-400, testMetrics-200<br>4)통계 : 합계<br>5)기간 : 1 Day</p>\n<h4 id=\"4-수식을-응용하여-여러-형식의-Metrics-표현식을-추가하겠습니다\"><a href=\"#4-수식을-응용하여-여러-형식의-Metrics-표현식을-추가하겠습니다\" class=\"headerlink\" title=\"4) 수식을 응용하여 여러 형식의 Metrics 표현식을 추가하겠습니다.\"></a>4) 수식을 응용하여 여러 형식의 Metrics 표현식을 추가하겠습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136836-a4722880-8f97-11ea-907d-beb1c41de5d7.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136836-a4722880-8f97-11ea-907d-beb1c41de5d7.png\" alt=\"cloudwatch_27\"></a><br>지표 수식 함수</p>\n<ul>\n<li>METRICS() : 요청에 모든 지표를 반환</li>\n<li>SUM(METRICS()) : 모든 지표의 합계</li>\n<li>AVG(METRICS()) : 모든 지표의 평균</li>\n<li>MIN(METRICS()) : 모든 지표의 최소값</li>\n<li>MAX(METRICS()) : 모든 지표의 최대값</li>\n<li>ABS(METRICS()) : 각 요소의 절대값</li>\n<li>RATE(METRICS()) : 각 요소의 초당 변경 비율</li>\n</ul>\n<h4 id=\"5-완성된-지표-Source를-복사합니다\"><a href=\"#5-완성된-지표-Source를-복사합니다\" class=\"headerlink\" title=\"5) 완성된 지표 Source를 복사합니다.\"></a>5) 완성된 지표 Source를 복사합니다.</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">        <span class=\"string\">\"metrics\"</span>: [</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"SUM(METRICS())\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"합계\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e1\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"AVG(METRICS())\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"평균\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e2\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"MIN(METRICS())\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"최소값\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e3\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"MAX(METRICS())\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"최대값\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e4\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"SUM(METRICS())/SUM(m1)\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"SUM(METRICS())/SUM(m1)\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e5\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ &#123; <span class=\"string\">\"expression\"</span>: <span class=\"string\">\"SUM(100/[m1, m2])\"</span>, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"SUM(100/[m1, m2])\"</span>, <span class=\"string\">\"id\"</span>: <span class=\"string\">\"e6\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400 &#125; ],</span><br><span class=\"line\">            [ <span class=\"string\">\"testMetrics\"</span>, <span class=\"string\">\"testMetrics1\"</span>, &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"m1\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"testMetrics-400\"</span> &#125; ],</span><br><span class=\"line\">            [ <span class=\"string\">\".\"</span>, <span class=\"string\">\"testMetrics2\"</span>, &#123; <span class=\"string\">\"id\"</span>: <span class=\"string\">\"m2\"</span>, <span class=\"string\">\"stat\"</span>: <span class=\"string\">\"Sum\"</span>, <span class=\"string\">\"period\"</span>: 86400, <span class=\"string\">\"label\"</span>: <span class=\"string\">\"testMetrics-200\"</span> &#125; ]</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"string\">\"view\"</span>: <span class=\"string\">\"singleValue\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"stacked\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">\"region\"</span>: <span class=\"string\">\"ap-northeast-1\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"title\"</span>: <span class=\"string\">\"testLambda1\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"period\"</span>: 300</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"6-Dashboard-name을-입력한-후-‘Create-dashboard’를-클릭합니다\"><a href=\"#6-Dashboard-name을-입력한-후-‘Create-dashboard’를-클릭합니다\" class=\"headerlink\" title=\"6) Dashboard name을 입력한 후 ‘Create dashboard’를 클릭합니다.\"></a>6) Dashboard name을 입력한 후 ‘Create dashboard’를 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136835-a3d99200-8f97-11ea-8191-b4e2c9f02c03.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136835-a3d99200-8f97-11ea-8191-b4e2c9f02c03.png\" alt=\"cloudwatch_28\"></a></p>\n<h4 id=\"7-‘Add-widget’을-클릭해-Number-유형을-선택합니다\"><a href=\"#7-‘Add-widget’을-클릭해-Number-유형을-선택합니다\" class=\"headerlink\" title=\"7) ‘Add widget’을 클릭해 Number 유형을 선택합니다.\"></a>7) ‘Add widget’을 클릭해 Number 유형을 선택합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136834-a3d99200-8f97-11ea-8da8-927ad96585d7.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136834-a3d99200-8f97-11ea-8da8-927ad96585d7.png\" alt=\"cloudwatch_29\"></a></p>\n<h4 id=\"8-Source-Tab에서-복사해-둔-지표-Source를-붙여-넣고-‘Create-widget’을-클릭합니다\"><a href=\"#8-Source-Tab에서-복사해-둔-지표-Source를-붙여-넣고-‘Create-widget’을-클릭합니다\" class=\"headerlink\" title=\"8) Source Tab에서 복사해 둔 지표 Source를 붙여 넣고, ‘Create widget’을 클릭합니다.\"></a>8) Source Tab에서 복사해 둔 지표 Source를 붙여 넣고, ‘Create widget’을 클릭합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136832-a340fb80-8f97-11ea-8f4d-77fe2cfd7a4c.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136832-a340fb80-8f97-11ea-8f4d-77fe2cfd7a4c.png\" alt=\"cloudwatch_30\"></a></p>\n<h4 id=\"9-위젯이-추가되었습니다-추가된-위젯은-‘Save-dashboard’-버튼을-클릭해야-최종-저장됩니다\"><a href=\"#9-위젯이-추가되었습니다-추가된-위젯은-‘Save-dashboard’-버튼을-클릭해야-최종-저장됩니다\" class=\"headerlink\" title=\"9) 위젯이 추가되었습니다. 추가된 위젯은 ‘Save dashboard’ 버튼을 클릭해야 최종 저장됩니다.\"></a>9) 위젯이 추가되었습니다. 추가된 위젯은 ‘Save dashboard’ 버튼을 클릭해야 최종 저장됩니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136831-a340fb80-8f97-11ea-9b4f-5ab95ce56018.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136831-a340fb80-8f97-11ea-9b4f-5ab95ce56018.png\" alt=\"cloudwatch_31\"></a></p>\n<h4 id=\"10-이번에는-로그-메시지-결과를-확인할-수-있는-Query-result-유형을-추가해보겠습니다-먼저-Query-result-유형을-선택합니다\"><a href=\"#10-이번에는-로그-메시지-결과를-확인할-수-있는-Query-result-유형을-추가해보겠습니다-먼저-Query-result-유형을-선택합니다\" class=\"headerlink\" title=\"10) 이번에는 로그 메시지 결과를 확인할 수 있는 Query result 유형을 추가해보겠습니다. 먼저 Query result 유형을 선택합니다.\"></a>10) 이번에는 로그 메시지 결과를 확인할 수 있는 Query result 유형을 추가해보겠습니다. 먼저 Query result 유형을 선택합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136829-a2a86500-8f97-11ea-91d0-d110cf5c29f5.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136829-a2a86500-8f97-11ea-91d0-d110cf5c29f5.png\" alt=\"cloudwatch_32\"></a></p>\n<h4 id=\"11-로그-메시지에-조건을-추가해-필터링합니다\"><a href=\"#11-로그-메시지에-조건을-추가해-필터링합니다\" class=\"headerlink\" title=\"11) 로그 메시지에 조건을 추가해 필터링합니다.\"></a>11) 로그 메시지에 조건을 추가해 필터링합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136827-a20fce80-8f97-11ea-9f19-6cfd6beb18eb.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136827-a20fce80-8f97-11ea-9f19-6cfd6beb18eb.png\" alt=\"cloudwatch_33\"></a></p>\n<h3 id=\"잠시-쉬어가기-Query-언어가-지원하는-여섯-가지-명령-유형\"><a href=\"#잠시-쉬어가기-Query-언어가-지원하는-여섯-가지-명령-유형\" class=\"headerlink\" title=\"잠시 쉬어가기!: Query 언어가 지원하는 여섯 가지 명령 유형\"></a>잠시 쉬어가기!: Query 언어가 지원하는 여섯 가지 명령 유형</h3><ul>\n<li>fields : 지정한 필드를 검색합니다. 필드 명령 내에서 함수 및 연산을 사용할 수 있습니다. 만약 @ 기호, 마침표(.) 및 영숫자 문자 이외의 문자가 포함된 로그 필드가 쿼리에 명명되어 있으면 해당 필드 이름은 억음 기호로 둘러싸야 합니다.</li>\n<li>filter : 하나 이상의 조건으로 필터링합니다. filter statusCode like /2\\d\\d/ → 필드 statusCode의 값이 200~299인 로그 이벤트를 반환합니다.</li>\n<li>stats : 로그 필드에 대한 지정된 시간 간격의 집계 통계를 계산합니다.</li>\n<li>sort : 검색된 로그 이벤트를 정렬합니다.</li>\n<li>limit : 쿼리에서 반환되는 로그 이벤트 수를 제한합니다.</li>\n<li>parse : 로그 필드에서 데이터를 추출하고 쿼리로 추가 처리할 수 있는 임시 필드가 하나 이상 생성됩니다.</li>\n</ul>\n<h4 id=\"12-추가된-위젯은-이름과-사이즈를-조절한-후-‘Save-dashboard’-버튼을-클릭해-최종-저장합니다\"><a href=\"#12-추가된-위젯은-이름과-사이즈를-조절한-후-‘Save-dashboard’-버튼을-클릭해-최종-저장합니다\" class=\"headerlink\" title=\"12) 추가된 위젯은 이름과 사이즈를 조절한 후, ‘Save dashboard’ 버튼을 클릭해 최종 저장합니다.\"></a>12) 추가된 위젯은 이름과 사이즈를 조절한 후, ‘Save dashboard’ 버튼을 클릭해 최종 저장합니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136826-a20fce80-8f97-11ea-9d48-15aaf95ed8f1.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136826-a20fce80-8f97-11ea-9d48-15aaf95ed8f1.png\" alt=\"cloudwatch_34\"></a></p>\n<h4 id=\"13-생성한-Alarm을-Dashboard에-추가하겠습니다\"><a href=\"#13-생성한-Alarm을-Dashboard에-추가하겠습니다\" class=\"headerlink\" title=\"13) 생성한 Alarm을 Dashboard에 추가하겠습니다.\"></a>13) 생성한 Alarm을 Dashboard에 추가하겠습니다.</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81136825-a1773800-8f97-11ea-8fdd-f1feabed06f6.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81136825-a1773800-8f97-11ea-8fdd-f1feabed06f6.png\" alt=\"cloudwatch_35\"></a></p>\n<h4 id=\"14-Dashboard가-완성되었습니다\"><a href=\"#14-Dashboard가-완성되었습니다\" class=\"headerlink\" title=\"14) Dashboard가 완성되었습니다!\"></a>14) Dashboard가 완성되었습니다!</h4><p><a href=\"https://user-images.githubusercontent.com/62123161/81138255-6b888280-8f9c-11ea-9951-642b9679774b.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/81138255-6b888280-8f9c-11ea-9951-642b9679774b.png\" alt=\"cloudwatch_36\"></a></p>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><p>지금까지 CloudWatch 서비스를 소개했습니다. 이 서비스를 이용하면 로그와 지표를 쉽게 시각화할 수 있고, 작업을 자동화할 수도 있는 것을 확인했습니다. CloudWatch를 이용해 애플리케이션을 최적화하고, 원활하게 실행해보는 건 어떨까요. 분명 리소스를 효과적으로 다룰 수 있을 겁니다.</p>\n","text":"개발환경 구축※ 기본 개발환경IntelliJJava, SpringAWS ConsoleCloudWatch 설명관련정보1 : AWS 한국블로그 CloudWatch Logs Insights – 빠른 대화형 로그 분석 기능 출시 (서울 리전 포함)<br>관련","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":21,"path":"api/categories/tip.json"}],"tags":[{"name":"AWS","slug":"AWS","count":14,"path":"api/tags/AWS.json"},{"name":"cloudwatch","slug":"cloudwatch","count":1,"path":"api/tags/cloudwatch.json"},{"name":"event","slug":"event","count":1,"path":"api/tags/event.json"}]}]}