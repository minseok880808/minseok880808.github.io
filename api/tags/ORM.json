{"name":"ORM","slug":"ORM","count":1,"posts":[{"title":"node.js TypeORM, Sequelize Test","slug":"node-js-TypeORM-Sequelize-Test","date":"2020-11-18T23:32:52.000Z","updated":"2020-11-23T01:29:12.138Z","comments":true,"pin":null,"path":"api/articles/node-js-TypeORM-Sequelize-Test.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png","content":"<h2 id=\"API에서-Sequelize-사용하기\"><a href=\"#API에서-Sequelize-사용하기\" class=\"headerlink\" title=\"API에서 Sequelize 사용하기\"></a>API에서 Sequelize 사용하기</h2><hr>\n<h4 id=\"1-Install\"><a href=\"#1-Install\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g --save mysql2</span><br><span class=\"line\"></span><br><span class=\"line\">npm install -g --save sequelize</span><br><span class=\"line\">npm install -g --save sequelize-cli</span><br><span class=\"line\">npm install -g --save sequelize-auto</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-Sequelize-설정\"><a href=\"#2-Sequelize-설정\" class=\"headerlink\" title=\"2. Sequelize 설정\"></a>2. Sequelize 설정</h4> <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequelize-auto -o [MODEL_PATH] -d [TABLE] -h [DATABASE_ADDRESS] -u [USERID] -x [PASSWORD] -p [DATABASE_PORT] -e [DATABASE_TYPE]</span><br></pre></td></tr></table></figure></div>\n<h5 id=\"1-o-mapper-model\"><a href=\"#1-o-mapper-model\" class=\"headerlink\" title=\"1) -o : mapper model\"></a>1) -o : mapper model</h5><h5 id=\"2-d-table\"><a href=\"#2-d-table\" class=\"headerlink\" title=\"2) -d : table\"></a>2) -d : table</h5><h5 id=\"3-h-database\"><a href=\"#3-h-database\" class=\"headerlink\" title=\"3) -h : database\"></a>3) -h : database</h5><h5 id=\"4-u-userId\"><a href=\"#4-u-userId\" class=\"headerlink\" title=\"4) -u : userId\"></a>4) -u : userId</h5><h5 id=\"5-x-password\"><a href=\"#5-x-password\" class=\"headerlink\" title=\"5) -x : password\"></a>5) -x : password</h5><h5 id=\"6-p-port\"><a href=\"#6-p-port\" class=\"headerlink\" title=\"6) -p : port\"></a>6) -p : port</h5><h5 id=\"7-e-database-type\"><a href=\"#7-e-database-type\" class=\"headerlink\" title=\"7) -e : database type\"></a>7) -e : database type</h5><h4 id=\"3-model-mapper\"><a href=\"#3-model-mapper\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* jshint indent: 2 */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sequelize, DataTypes</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sequelize.define(<span class=\"string\">'userInfo'</span>, &#123;</span><br><span class=\"line\">    seq: &#123;</span><br><span class=\"line\">      autoIncrement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      type: DataTypes.INTEGER(<span class=\"number\">11</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      primaryKey: <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"comment\">/*get() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        const rawValue = this.getDataValue(seq);</span></span><br><span class=\"line\"><span class=\"comment\">        return rawValue ? rawValue.toUpperCase() : null;</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;*/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    id: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">30</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    password: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">100</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    email: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">50</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    loginDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    registDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    tableName: <span class=\"string\">'userInfo'</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-model-index-code\"><a href=\"#4-model-index-code\" class=\"headerlink\" title=\"4. model index code\"></a>4. model index code</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"><span class=\"comment\">//프로젝트의 파일을 읽기위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"comment\">//프로젝트 파일의 경로를 얻기 위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Sequelize = <span class=\"built_in\">require</span>(<span class=\"string\">'sequelize'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> basename = path.basename(__filename);</span><br><span class=\"line\"><span class=\"keyword\">const</span> env = process.env.NODE_ENV;</span><br><span class=\"line\"><span class=\"comment\">//DB 연결정보를 환경변수로 가변설정</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(__dirname + <span class=\"string\">'/../config/dbConfig.json'</span>)[env];</span><br><span class=\"line\"><span class=\"keyword\">const</span> db = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// nodejs에서 mysql 접근을 쉽게 할 수 있도록 하는 라이브러리 사용(ORM 맵핑을 위해 사용한 것으로 파악)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> Sequelize(config.database, config.username, config.password, config);</span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 1. 직접 선언형태의 방법을 사용하는 방법.</span></span><br><span class=\"line\">db.userInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/userInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\">db.deviceInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/deviceInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 2. 자동으로 파일에서 로드하여 필요한 객체를 받아오는 방법.</span></span><br><span class=\"line\"><span class=\"comment\">//https://blog.csdn.net/weixin_34324081/article/details/91445015</span></span><br><span class=\"line\"><span class=\"comment\">//fs를 통해 자동으로 로드되서 실행되고(ORM) 생성된 모델 객체가 db객체 아래에 마운트됨..</span></span><br><span class=\"line\">fs</span><br><span class=\"line\">    .readdirSync(__dirname)</span><br><span class=\"line\">    .filter(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (file.indexOf(<span class=\"string\">'.'</span>) !== <span class=\"number\">0</span>) &amp;&amp; (file !== basename) &amp;&amp; (file.slice(<span class=\"number\">-3</span>) === <span class=\"string\">'.js'</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .forEach(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> model = <span class=\"built_in\">require</span>(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);</span><br><span class=\"line\">        db[model.name] = model;</span><br><span class=\"line\">        <span class=\"comment\">//console.log(model.name);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.keys(db).forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">modelName</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (db[modelName].associate) &#123;</span><br><span class=\"line\">        db[modelName].associate(db);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">db.sequelize = sequelize;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = db;</span><br></pre></td></tr></table></figure></div>\n\n<h2 id=\"API에서-TypeORM-사용하기\"><a href=\"#API에서-TypeORM-사용하기\" class=\"headerlink\" title=\"API에서 TypeORM 사용하기\"></a>API에서 TypeORM 사용하기</h2><h4 id=\"1-Install-1\"><a href=\"#1-Install-1\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save @nestjs/typeorm</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-TypeORM-Repository-활용\"><a href=\"#2-TypeORM-Repository-활용\" class=\"headerlink\" title=\"2. TypeORM.Repository 활용\"></a>2. TypeORM.Repository 활용</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Repository, EntityRepository &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"typeorm\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; User &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../user/entities/user.entity'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@EntityRepository(User)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserRepository</span> <span class=\"keyword\">extends</span> <span class=\"title\">Repository</span>&lt;<span class=\"title\">User</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"3-model-mapper-1\"><a href=\"#3-model-mapper-1\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Entity, Column, PrimaryColumn &#125; <span class=\"keyword\">from</span> <span class=\"string\">'typeorm'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapping &#125; <span class=\"keyword\">from</span> <span class=\"string\">'auto-mapping'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@Entity(<span class=\"string\">'TBL_USERsss'</span>, &#123; <span class=\"attr\">synchronize</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">  @PrimaryColumn(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_id'</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  id: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_pwd'</span>, <span class=\"attr\">length</span>: <span class=\"number\">128</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  password: string;</span><br><span class=\"line\">  <span class=\"comment\">//@ForeignKey(() =&gt; Profile)</span></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'usergroup_id'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Number</span> &#125;)</span><br><span class=\"line\">  userGroupId: number;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_status'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  userStatus: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_name'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  name: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_mobileno'</span>, <span class=\"attr\">length</span>: <span class=\"number\">13</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobile: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_email'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  email: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_birthday'</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  birthday: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'mobile_model'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobileModel: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_type'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  os: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  osVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'app_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">8</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  appVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_logindt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  loginDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_loginip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  loginIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  insertDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  insertIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  updateDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  updateIp: string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-Type-ORM-Method\"><a href=\"#4-Type-ORM-Method\" class=\"headerlink\" title=\"4. Type ORM Method\"></a>4. Type ORM Method</h4><p><a href=\"https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" target=\"_blank\" rel=\"noopener\">https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0</a></p>\n<ul>\n<li>save, findone등 여러 method들이 있다. 활용하면 간단한 SQL은 충분히 날려볼 수 있다.</li>\n</ul>\n<h2 id=\"성능비교\"><a href=\"#성능비교\" class=\"headerlink\" title=\"성능비교\"></a>성능비교</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" alt=\"image\"></a></p>\n<ul>\n<li>너무 차이가 나기에 편리함vs성능 둘 중 어느 것을 택할지는 비지니스 성격에 맞춰야 할 것으로 보임.</li>\n</ul>\n","text":"API에서 Sequelize 사용하기1. Install1<br>2<br>3<br>4<br>5<br>npm install -g --save mysql2<br><br>npm install -g --save sequelize<br>npm install -g","link":"","raw":null,"photos":[],"categories":[{"name":"nodejs","slug":"nodejs","count":3,"path":"api/categories/nodejs.json"}],"tags":[{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"api","slug":"api","count":2,"path":"api/tags/api.json"},{"name":"ORM","slug":"ORM","count":1,"path":"api/tags/ORM.json"},{"name":"sequelize","slug":"sequelize","count":1,"path":"api/tags/sequelize.json"}]}]}