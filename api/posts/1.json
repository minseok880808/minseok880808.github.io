{"total":25,"pageSize":10,"pageCount":3,"data":[{"title":"Studio 3T Guide","slug":"Studio-3T-Guide","date":"2021-02-09T03:45:15.000Z","updated":"2021-02-09T03:45:15.469Z","comments":true,"pin":null,"path":"api/articles/Studio-3T-Guide.json","excerpt":"","keywords":null,"cover":null,"content":"","text":"","link":"","raw":null,"photos":[],"categories":[],"tags":[]},{"title":"DocumentDB(MongoDB) Setting","slug":"DocumentDB-MongoDB-Setting","date":"2020-12-18T05:36:38.000Z","updated":"2021-02-09T03:51:34.842Z","comments":true,"pin":null,"path":"api/articles/DocumentDB-MongoDB-Setting.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/56995911/107305217-e6e80900-6ac5-11eb-9b86-081655884a9a.png","content":"<h2 id=\"서문\"><a href=\"#서문\" class=\"headerlink\" title=\"서문\"></a>서문</h2><ul>\n<li>시작에 앞서 DocumentDB를 사용하게 된 사유는 MongoDB &amp; AWS DocumentDB 에 나와있듯이 1000만 Row 이하의 데이터의 경우 DocumentDB가 훨씬 이득이었다.</li>\n<li>이득인 사유<br>1) 1000만 row 이하로 사용하는 서비스가 대부분임.<br>2) 자동 백업, 복구 스토리지 제공(Snapshot)<br>3) 인스턴스 &amp; 클러스터 관리 거의 불필요(설정과 관리는 다른개념)</li>\n<li>툴은 AWS에서도 가이드로 제공해주는 툴 중에 요즘 뜨고 있는 툴이라고 생각되어 Studio 3T를 사용.</li>\n<li>최근 정정(2021-01-20) : Studio 3T는 무료가 아니라 유료 라이센스이며, 간단한 정도라면 MongoDB에서 무료로 제공중인 Compass를 사용하는 것이 좋음.<br><a href=\"https://user-images.githubusercontent.com/56995911/107305217-e6e80900-6ac5-11eb-9b86-081655884a9a.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107305217-e6e80900-6ac5-11eb-9b86-081655884a9a.png\" alt=\"image\"></a></li>\n</ul>\n<h2 id=\"본문\"><a href=\"#본문\" class=\"headerlink\" title=\"본문\"></a>본문</h2><h3 id=\"1-EC2-설정-설치\"><a href=\"#1-EC2-설정-설치\" class=\"headerlink\" title=\"1. EC2 설정(설치)\"></a>1. EC2 설정(설치)</h3><ul>\n<li>깔끔하게 Linux로 가보자.</li>\n<li>(제목은 DocumentDB면서 왜 갑자기 EC2를 설치하냐고 물어볼 수 있는데, Windows가 있어야 카카오톡을 깔 수 있듯이 OS가 있어야한다는 개념으로 생각하면 편하다.)</li>\n</ul>\n<h4 id=\"1-메인화면에서-EC2생성-클릭\"><a href=\"#1-메인화면에서-EC2생성-클릭\" class=\"headerlink\" title=\"1) 메인화면에서 EC2생성 클릭\"></a>1) 메인화면에서 EC2생성 클릭</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107311500-cd4cbe80-6ad1-11eb-8657-60dd6818a3f9.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311500-cd4cbe80-6ad1-11eb-8657-60dd6818a3f9.png\" alt=\"image\"></a></p>\n<h4 id=\"2-EC2엔진-설정\"><a href=\"#2-EC2엔진-설정\" class=\"headerlink\" title=\"2) EC2엔진 설정\"></a>2) EC2엔진 설정</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107311634-0d13a600-6ad2-11eb-8d85-aefd481a5fb0.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311634-0d13a600-6ad2-11eb-8d85-aefd481a5fb0.png\" alt=\"image\"></a></p>\n<ul>\n<li>EC2의 수많은 OS를 선택할 수 있었지만, 난 스펙은 사실 잘 모른다. 잘 돌아가기만 하면 된다고 생각하기에…</li>\n<li>따라서, 가이드와 동일하게 Linux 2 AMI를 사용하기로 한다.</li>\n<li>뒤로 t3.micro를 씀으로 일단은 저렴한 걸로 생성해보고자 한다.</li>\n<li>이후, [Review and Launch] 버튼 클릭해서 총 7단계인 복잡한놈을 빨리 끝내기로 한다.</li>\n</ul>\n<h4 id=\"3-EC2그룹설정\"><a href=\"#3-EC2그룹설정\" class=\"headerlink\" title=\"3) EC2그룹설정\"></a>3) EC2그룹설정</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107311743-38969080-6ad2-11eb-8ba1-42c26d3bf022.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311743-38969080-6ad2-11eb-8ba1-42c26d3bf022.png\" alt=\"image\"></a></p>\n<ul>\n<li><p>다른건 모르겠고, 일단 7단계로 건너뛰어 왔다. </p>\n</li>\n<li><p>AWS에서 가장 중요하게 생각하는 권한과 보안중의 한 축을 담당하는 Security Group을 설정하자.(아래 사진처럼 이름넣고 Source만 수정해주면 끝난다)<br><a href=\"https://user-images.githubusercontent.com/56995911/107311775-4ba96080-6ad2-11eb-99f7-e888ad89c100.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311775-4ba96080-6ad2-11eb-99f7-e888ad89c100.png\" alt=\"image\"></a></p>\n</li>\n<li><p>설정이 끝났으면 [Review and Launch]버튼을 가차없이 누른다.</p>\n</li>\n</ul>\n<h4 id=\"4-검토-및-설치\"><a href=\"#4-검토-및-설치\" class=\"headerlink\" title=\"4) 검토 및 설치\"></a>4) 검토 및 설치</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107311827-6c71b600-6ad2-11eb-8576-7d2551c1f053.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311827-6c71b600-6ad2-11eb-8576-7d2551c1f053.png\" alt=\"image\"></a></p>\n<ul>\n<li>설정한 내용들을 확인한 후 [Launch]버튼을 클릭한다.<br><img src=\"https://user-images.githubusercontent.com/56995911/107311894-975c0a00-6ad2-11eb-8ad1-bb52fc3eecba.png\" alt=\"image\"></li>\n<li>시간이 좀 흐른 뒤에 위와 같이 하나의 Linux 서버가 만들어 진 것을 확인할 수 있다.</li>\n</ul>\n<h3 id=\"2-보안그룹-생성\"><a href=\"#2-보안그룹-생성\" class=\"headerlink\" title=\"2. 보안그룹 생성\"></a>2. 보안그룹 생성</h3><ul>\n<li>자, 이제 클러스터(DocumentDB)와 연결할 보안그룹을 만들어보자.</li>\n<li>참고로, 아까 EC2만들면서 만든 보안그룹은 EC2에서 사용하는 보안그룹이다. (착각하지말자)</li>\n</ul>\n<p><a href=\"https://user-images.githubusercontent.com/56995911/107311951-b78bc900-6ad2-11eb-91dd-f32bf4b6eaa1.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311951-b78bc900-6ad2-11eb-91dd-f32bf4b6eaa1.png\" alt=\"image\"></a></p>\n<ul>\n<li>보안그룹은 별내용없다. </li>\n<li>[이름입력] → [Custom TCP : 27017] → source 설정 하면 끝난다. 그림으로 대체한다.<br><a href=\"https://user-images.githubusercontent.com/56995911/107311981-ca060280-6ad2-11eb-883d-0d92ec57f2bd.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107311981-ca060280-6ad2-11eb-883d-0d92ec57f2bd.png\" alt=\"image\"></a></li>\n</ul>\n<h3 id=\"3-Document-Cluster-생성\"><a href=\"#3-Document-Cluster-생성\" class=\"headerlink\" title=\"3. Document Cluster 생성\"></a>3. Document Cluster 생성</h3><ul>\n<li>EC2인지 뭔지를 지나 결국 목적지에 왔지만, 이제 본게임이라고 생각할 것이다.</li>\n<li>하지만, 걱정말자. 너무 쉽다.</li>\n</ul>\n<h4 id=\"1-클러스터-생성\"><a href=\"#1-클러스터-생성\" class=\"headerlink\" title=\"1) 클러스터 생성\"></a>1) 클러스터 생성</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107312022-e144f000-6ad2-11eb-8ea9-269406a851ed.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312022-e144f000-6ad2-11eb-8ea9-269406a851ed.png\" alt=\"image\"></a></p>\n<ul>\n<li>가이드에 맞춰 검은색으로 칠해진 모든 곳을 입력하자.</li>\n<li>테스트용도라면 Instance class 와 Number of instance 는 가급적 가장 낮은 사양으로 했으면 한다. </li>\n</ul>\n<h4 id=\"2-추가설정\"><a href=\"#2-추가설정\" class=\"headerlink\" title=\"2) 추가설정\"></a>2) 추가설정</h4><p><img src=\"https://user-images.githubusercontent.com/56995911/107312076-f6ba1a00-6ad2-11eb-9c8c-629e249a503e.png\" alt=\"image\"></p>\n<ul>\n<li>버튼클릭하면 어마어마한 옵션설정이 나온다.</li>\n</ul>\n<h5 id=\"i-Network-Settings\"><a href=\"#i-Network-Settings\" class=\"headerlink\" title=\"i) Network Settings\"></a>i) Network Settings</h5><p><a href=\"https://user-images.githubusercontent.com/56995911/107312104-076a9000-6ad3-11eb-98f7-ab6722bccc2e.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312104-076a9000-6ad3-11eb-98f7-ab6722bccc2e.png\" alt=\"image\"></a></p>\n<ul>\n<li>아까 2번에서 생성했던 보안그룹이 생각나는가? 그걸 여기 쓰면 된다. </li>\n<li>다시말하지만, 처음 EC2에서 보안그룹을 생성했던건 EC2에서 끝난다. 2번에서 생성한 것은 Cluster에서 사용하기 위한 용도이다.</li>\n</ul>\n<h5 id=\"ii-Cluster-Options\"><a href=\"#ii-Cluster-Options\" class=\"headerlink\" title=\"ii) Cluster Options\"></a>ii) Cluster Options</h5><p><a href=\"https://user-images.githubusercontent.com/56995911/107312141-1c472380-6ad3-11eb-923f-1b00dcfdb91f.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312141-1c472380-6ad3-11eb-923f-1b00dcfdb91f.png\" alt=\"image\"></a></p>\n<ul>\n<li>이 Cluster Parameter Group 셋팅법은 따로 아래에서 설명하겠다.</li>\n<li>사용하는 이유는, 우린 툴을 쓸거니까…….툴에 맞춘 사양이 들어가야 하니까…..</li>\n</ul>\n<h5 id=\"iii-Etc\"><a href=\"#iii-Etc\" class=\"headerlink\" title=\"iii) Etc\"></a>iii) Etc</h5><p><a href=\"https://user-images.githubusercontent.com/56995911/107312202-3123b700-6ad3-11eb-98bb-4de25042a2f4.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312202-3123b700-6ad3-11eb-98bb-4de25042a2f4.png\" alt=\"image\"></a><br><a href=\"https://user-images.githubusercontent.com/56995911/107312217-3a148880-6ad3-11eb-97d0-23789966611e.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312217-3a148880-6ad3-11eb-97d0-23789966611e.png\" alt=\"image\"></a></p>\n<ul>\n<li>기타 등등이라고 명칭한 이유는, 기본값을 쓸거기때문에..</li>\n<li>태그는 설정해주면 검색하기 좋을 것이고, Protection은 클러스터를 보호해주는 역할이다.<br>나중에 체크를 풀어줄 수도 있지만, 인스턴스와 클러스터를 지우지 못하게 방어막을 한번 걸어주는 것이다. </li>\n<li>테스트이므로 풀어주어도 상관없다.</li>\n</ul>\n<h5 id=\"iv-클러스터-확인\"><a href=\"#iv-클러스터-확인\" class=\"headerlink\" title=\"iv) 클러스터 확인\"></a>iv) 클러스터 확인</h5><p><a href=\"https://user-images.githubusercontent.com/56995911/107312253-4c8ec200-6ad3-11eb-88a0-7978bd757975.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312253-4c8ec200-6ad3-11eb-88a0-7978bd757975.png\" alt=\"image\"></a></p>\n<h3 id=\"4-EC2-내에서-클러스터-연결-및-설정\"><a href=\"#4-EC2-내에서-클러스터-연결-및-설정\" class=\"headerlink\" title=\"4. EC2 내에서 클러스터 연결 및 설정\"></a>4. EC2 내에서 클러스터 연결 및 설정</h3><p><a href=\"https://user-images.githubusercontent.com/56995911/107312284-5ca6a180-6ad3-11eb-8e9c-ede43d055fcb.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312284-5ca6a180-6ad3-11eb-8e9c-ede43d055fcb.png\" alt=\"image\"></a></p>\n<ul>\n<li><p>인스턴스를 선택하고 Connect하면 웹페이지로 linux서버를 들어갈 수 있는 Terminal이 생긴다.<br><a href=\"https://user-images.githubusercontent.com/56995911/107312307-6c25ea80-6ad3-11eb-9d9e-a04e810fb022.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312307-6c25ea80-6ad3-11eb-9d9e-a04e810fb022.png\" alt=\"image\"></a></p>\n</li>\n<li><p>To install the mongo shell on Amazon Linux</p>\n</li>\n<li><p>1)Create the repository file. At the command line of your EC2 instance, execute the follow command:</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"[mongodb-org-3.6] \\nname=MongoDB Repository\\nbaseurl=https://repo.mongodb.org/yum/amazon/2013.03/mongodb-org/3.6/x86_64/\\ngpgcheck=1 \\nenabled=1 \\ngpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc\"</span> | sudo tee /etc/yum.repos.d/mongodb-org-3.6.repo</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">echo</span> -e <span class=\"string\">\"[mongodb-org-4.0] \\nname=MongoDB Repository\\nbaseurl=https://repo.mongodb.org/yum/amazon/2013.03/mongodb-org/4.0/x86_64/\\ngpgcheck=1 \\nenabled=1 \\ngpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc\"</span> | sudo tee /etc/yum.repos.d/mongodb-org-4.0.repo</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>2)When it is complete, install the mongo shell by executing the following command:</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y mongodb-org-shell</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>3)Download the CA certificate for Amazon DocumentDB</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://s3.amazonaws.com/rds-downloads/rds-combined-ca-bundle.pem</span><br></pre></td></tr></table></figure></div>\n\n\n</li>\n</ul>\n<ul>\n<li>아래 사진의 [Connect to this cluster with the mongo shell] 의 값을 Linux Terminal 환경에서 동작시키면 비밀번호 설정이 나온다<br><a href=\"https://user-images.githubusercontent.com/56995911/107312451-cc1c9100-6ad3-11eb-9781-23f81607c345.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312451-cc1c9100-6ad3-11eb-9781-23f81607c345.png\" alt=\"image\"></a></li>\n<li>사용할 비밀번호를 입력하면  rs0:PRIMARY&gt; 라는Prompt가 나오면서 각종 명령어를 쳐볼 수 있다.</li>\n<li>[Connect to this cluster with an application] 값은 아래 5번에서 사용한다.</li>\n</ul>\n<h3 id=\"5-Studio-3T-에서-사용\"><a href=\"#5-Studio-3T-에서-사용\" class=\"headerlink\" title=\"5. Studio 3T 에서 사용\"></a>5. Studio 3T 에서 사용</h3><ul>\n<li><p>여기서 한참 헤멘거같다.</p>\n</li>\n<li><p>연결이 되지 않으니 EC2인스턴스를 생성했다 지웠다를 반복한듯.<br><a href=\"https://user-images.githubusercontent.com/56995911/107312498-eeaeaa00-6ad3-11eb-8587-ad2874b069a1.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312498-eeaeaa00-6ad3-11eb-8587-ad2874b069a1.png\" alt=\"image\"></a></p>\n</li>\n<li><p>메인화면에서 Connect를 누르면 위와 같은 창이 나오는데 [From URI…] 를 선택하고 [Connect to this cluster with an application] 에 나와있는 값에서 비밀번호를 수정하고 확인을 누른다.</p>\n</li>\n<li><p>이후 화면들을 아래와 같이 동일하게 설정해주면 된다.<br><a href=\"https://user-images.githubusercontent.com/56995911/107312526-0128e380-6ad4-11eb-8f6e-be11ad2d7a2e.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312526-0128e380-6ad4-11eb-8f6e-be11ad2d7a2e.png\" alt=\"image\"></a><br><a href=\"https://user-images.githubusercontent.com/56995911/107312540-04bc6a80-6ad4-11eb-8418-997a0a3b1ca2.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312540-04bc6a80-6ad4-11eb-8418-997a0a3b1ca2.png\" alt=\"image\"></a><br><a href=\"https://user-images.githubusercontent.com/56995911/107312547-0a19b500-6ad4-11eb-8ccc-b3b216131a14.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312547-0a19b500-6ad4-11eb-8ccc-b3b216131a14.png\" alt=\"image\"></a></p>\n</li>\n<li><p>3번째 사진의 값은 아래와 같다<br>1) SSH Address는 1번에서 생성한 EC2의 [Public IPv4 address]<br>2) SSH User name 도 1번에서 생성할 때 사용자 이름으로 넣었던 이름.<br>3) SSH Auth Mode는 EC2생성시 PK생성한 값이 있으므로 Private Key로 설정<br>4) Private Key는 해당 서버 *.pem 파일을 넣음.</p>\n</li>\n</ul>\n<h2 id=\"결론\"><a href=\"#결론\" class=\"headerlink\" title=\"결론\"></a>결론</h2><ul>\n<li>이로써, 구성을 끝냈다.<br><a href=\"https://user-images.githubusercontent.com/56995911/107312613-29184700-6ad4-11eb-9269-0916ed69f9b5.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312613-29184700-6ad4-11eb-9269-0916ed69f9b5.png\" alt=\"image\"></a></li>\n<li>보안적으로 좀 아쉬운 부분은 있지만, 테스트 상으로는 크게 문제가 되지 않을 것으로 보인다.</li>\n</ul>\n<h2 id=\"별첨\"><a href=\"#별첨\" class=\"headerlink\" title=\"별첨\"></a>별첨</h2><h3 id=\"1-Parameter-Group-설정\"><a href=\"#1-Parameter-Group-설정\" class=\"headerlink\" title=\"1.Parameter Group 설정\"></a>1.Parameter Group 설정</h3><p><a href=\"https://user-images.githubusercontent.com/56995911/107312664-44835200-6ad4-11eb-98a6-7a8e5bb20709.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312664-44835200-6ad4-11eb-98a6-7a8e5bb20709.png\" alt=\"image\"></a></p>\n<h4 id=\"1-Create\"><a href=\"#1-Create\" class=\"headerlink\" title=\"1) Create\"></a>1) Create</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107312695-536a0480-6ad4-11eb-934a-8d23d2c4ecca.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312695-536a0480-6ad4-11eb-934a-8d23d2c4ecca.png\" alt=\"image\"></a></p>\n<h4 id=\"2-Setting\"><a href=\"#2-Setting\" class=\"headerlink\" title=\"2) Setting\"></a>2) Setting</h4><p><a href=\"https://user-images.githubusercontent.com/56995911/107312715-61b82080-6ad4-11eb-878e-a5bf796b1719.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/56995911/107312715-61b82080-6ad4-11eb-878e-a5bf796b1719.png\" alt=\"image\"></a></p>\n<ul>\n<li>tls와 ttl_monitor를 Disable로 맞춰주어야 한다고 한다.</li>\n<li>이유는 나도 공부를 해서 찾아본 뒤 적도록 하겠다.(암호화 통신을 설정하면 어떻게되지?)</li>\n</ul>\n<h3 id=\"2-관련자료\"><a href=\"#2-관련자료\" class=\"headerlink\" title=\"2. 관련자료\"></a>2. 관련자료</h3><p><a href=\"https://docs.aws.amazon.com/documentdb/latest/developerguide/connect-ec2.html#connect-ec2.security-group\" target=\"_blank\" rel=\"noopener\">https://docs.aws.amazon.com/documentdb/latest/developerguide/connect-ec2.html#connect-ec2.security-group</a><br><a href=\"https://docs.aws.amazon.com/ko_kr/documentdb/latest/developerguide/studio3t.html\" target=\"_blank\" rel=\"noopener\">https://docs.aws.amazon.com/ko_kr/documentdb/latest/developerguide/studio3t.html</a><br><a href=\"https://stackoverflow.com/questions/54384253/aws-documentdb-with-robo-3t-robomongo\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/54384253/aws-documentdb-with-robo-3t-robomongo</a><br><a href=\"https://geekflare.com/nosql-client/\" target=\"_blank\" rel=\"noopener\">https://geekflare.com/nosql-client/</a><br><a href=\"https://aws.amazon.com/ko/blogs/database/part-1-getting-started-with-amazon-documentdb-using-amazon-ec2/\" target=\"_blank\" rel=\"noopener\">https://aws.amazon.com/ko/blogs/database/part-1-getting-started-with-amazon-documentdb-using-amazon-ec2/</a></p>\n","text":"서문시작에 앞서 DocumentDB를 사용하게 된 사유는 MongoDB &amp; AWS DocumentDB 에 나와있듯이 1000만 Row 이하의 데이터의 경우 DocumentDB가 훨씬 이득이었다.이득인 사유<br>1) 1000만 row 이하로 사","link":"","raw":null,"photos":[],"categories":[{"name":"AWS","slug":"AWS","count":1,"path":"api/categories/AWS.json"}],"tags":[{"name":"Document DB","slug":"Document-DB","count":1,"path":"api/tags/Document-DB.json"},{"name":"Mongo","slug":"Mongo","count":1,"path":"api/tags/Mongo.json"}]},{"title":"nest.js API Template","slug":"nest-js-API-Template","date":"2020-11-20T07:04:10.000Z","updated":"2020-11-23T01:31:25.294Z","comments":true,"pin":null,"path":"api/articles/nest-js-API-Template.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png","content":"<h2 id=\"API-Template-구조도\"><a href=\"#API-Template-구조도\" class=\"headerlink\" title=\"API Template 구조도\"></a>API Template 구조도</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/99770052-9dcd8c00-2b4a-11eb-9beb-f6922414758d.png\" alt=\"image\"></a></p>\n<h2 id=\"Tree\"><a href=\"#Tree\" class=\"headerlink\" title=\"Tree\"></a>Tree</h2><p>project/<br>　　└─ src<br>　　　　├─ config<br>　　　　│　　├─ constant<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　└─ interface<br>　　　　│　　├─ database<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　├─ interface<br>　　　　│　　│　　├─ module<br>　　　　│　　│　　└─ pool<br>　　　　│　　├─ smtp<br>　　　　│　　│　　├─ config<br>　　　　│　　│　　├─ implement<br>　　　　│　　│　　└─ interface<br>　　　　│　　index.config.ts<br>　　　　├─ device<br>　　　　│　　├─ controller<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　　├─ interceptors<br>　　　　│　　└─ basic.interceptor<br>　　　　├─ mappers<br>　　　　│　　├─ client.xml<br>　　　　│　　├─ code.xml<br>　　　　│　　├─ device.setting.xml<br>　　　　│　　├─ device.xml<br>　　　　│　　├─ email.xml<br>　　　　│　　├─ otp.xml<br>　　　　│　　├─ term.xml<br>　　　　│　　├─ user.dormancy.xml<br>　　　　│　　└─ user.xml<br>　　　　├─ packets<br>　　　　│　　├─ request<br>　　　　│　　│　　├─ login.user<br>　　　　│　　│　　├─ join.user<br>　　　　│　　│　　└─ …<br>　　　　│　　├─ response<br>　　　　│　　│　　├─ common.response.code.json<br>　　　　│　　│　　├─ common.response.code<br>　　　　│　　│　　└─ common.response<br>　　　　│　　└─ validator<br>　　　　│　　　　　├─ login.user.validation<br>　　　　│　　　　　├─ join.user.validation<br>　　　　│　　　　　└─ …<br>　　　　├─ public<br>　　　　│　　├─ confirm_member_account_mail.html<br>　　　　│　　├─ find_member_account_mail.html<br>　　　　│　　├─ find_member_password_mail.html<br>　　　　│　　└─ navien.png<br>　　　　├─ smtp<br>　　　　│　　└─ email.service<br>　　　　├─ user<br>　　　　│　　├─ controller<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　　├─ utilities<br>　　　　│　　├─ common.util<br>　　　　│　　├─ crypto.util<br>　　　　│　　└─ database.util<br>　　　　├─ validate<br>　　　　│　　├─ module<br>　　　　│　　└─ service<br>　　　app.module<br>　　　main</p>\n<h4 id=\"Node-js를-도입함에-있어-당장-언어에-대해-공부하기보다는-기존-객체지향에-친숙한-언어를-써서-접근하길-원했음\"><a href=\"#Node-js를-도입함에-있어-당장-언어에-대해-공부하기보다는-기존-객체지향에-친숙한-언어를-써서-접근하길-원했음\" class=\"headerlink\" title=\"Node.js를 도입함에 있어 당장 언어에 대해 공부하기보다는 기존 객체지향에 친숙한 언어를 써서 접근하길 원했음.\"></a>Node.js를 도입함에 있어 당장 언어에 대해 공부하기보다는 기존 객체지향에 친숙한 언어를 써서 접근하길 원했음.</h4><h4 id=\"이에-필요한-템플릿을-찾기-시작했고-Nest-js를-발견하게-되었음\"><a href=\"#이에-필요한-템플릿을-찾기-시작했고-Nest-js를-발견하게-되었음\" class=\"headerlink\" title=\"이에 필요한 템플릿을 찾기 시작했고, Nest.js를 발견하게 되었음.\"></a>이에 필요한 템플릿을 찾기 시작했고, Nest.js를 발견하게 되었음.</h4><h4 id=\"annotation도-유사하게-활용이-가능하며-언어-스타일이-Java와-매우-비슷함\"><a href=\"#annotation도-유사하게-활용이-가능하며-언어-스타일이-Java와-매우-비슷함\" class=\"headerlink\" title=\"annotation도 유사하게 활용이 가능하며, 언어 스타일이 Java와 매우 비슷함.\"></a>annotation도 유사하게 활용이 가능하며, 언어 스타일이 Java와 매우 비슷함.</h4><hr>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;Injectable&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"@nestjs/common\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;ConstantImplement&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"./constant.implement\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;Env&#125; <span class=\"keyword\">from</span> <span class=\"string\">\"../index.config\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author                  <span class=\"variable\">jms</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@since                   </span>2020-10-29</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description             </span>공통설정 환경별 분기</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">@Injectable()</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConstantConfig</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  public constConfig() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> result;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (Env) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'local'</span>:</span><br><span class=\"line\">        result = ConstantImplement.local;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'dev'</span>:</span><br><span class=\"line\">        result = ConstantImplement.dev;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">'prod'</span>:</span><br><span class=\"line\">        result = ConstantImplement.prod;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        result = ConstantImplement.dev;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"위-bash처럼-만들어주면-Nest-js가-내용을-그대로-node-js-형태로-만들어줌\"><a href=\"#위-bash처럼-만들어주면-Nest-js가-내용을-그대로-node-js-형태로-만들어줌\" class=\"headerlink\" title=\"위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.\"></a>위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.</h4><h4 id=\"nest형태로-서버에-올리기-싫다면-dist폴더로-추출된-Export-파일들을-그대로-서버로-올려주면-된다\"><a href=\"#nest형태로-서버에-올리기-싫다면-dist폴더로-추출된-Export-파일들을-그대로-서버로-올려주면-된다\" class=\"headerlink\" title=\"nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.\"></a>nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.</h4><h4 id=\"개인적으로-언어의-장벽이-높다고-판단이-되거나-신규-언어에-대한-학습-시간이-없을-경우-빠르게-생산할-경우에-대해-nest는-좋은-선택지가-될-수-있다고-봄\"><a href=\"#개인적으로-언어의-장벽이-높다고-판단이-되거나-신규-언어에-대한-학습-시간이-없을-경우-빠르게-생산할-경우에-대해-nest는-좋은-선택지가-될-수-있다고-봄\" class=\"headerlink\" title=\"개인적으로 언어의 장벽이 높다고 판단이 되거나, 신규 언어에 대한 학습 시간이 없을 경우, 빠르게 생산할 경우에 대해 nest는 좋은 선택지가 될 수 있다고 봄.\"></a>개인적으로 언어의 장벽이 높다고 판단이 되거나, 신규 언어에 대한 학습 시간이 없을 경우, 빠르게 생산할 경우에 대해 nest는 좋은 선택지가 될 수 있다고 봄.</h4><hr>\n<h3 id=\"주요-기능\"><a href=\"#주요-기능\" class=\"headerlink\" title=\"주요 기능\"></a>주요 기능</h3><h4 id=\"1-사용자\"><a href=\"#1-사용자\" class=\"headerlink\" title=\"1. 사용자\"></a>1. 사용자</h4><h5 id=\"1-회원가입\"><a href=\"#1-회원가입\" class=\"headerlink\" title=\"　　1) 회원가입\"></a>　　1) 회원가입</h5><h5 id=\"2-로그인\"><a href=\"#2-로그인\" class=\"headerlink\" title=\"　　2) 로그인\"></a>　　2) 로그인</h5><h5 id=\"3-이메일-인증\"><a href=\"#3-이메일-인증\" class=\"headerlink\" title=\"　　3) 이메일 인증\"></a>　　3) 이메일 인증</h5><h5 id=\"4-인증정보-갱신\"><a href=\"#4-인증정보-갱신\" class=\"headerlink\" title=\"　　4) 인증정보 갱신\"></a>　　4) 인증정보 갱신</h5><h5 id=\"5-회원탈퇴\"><a href=\"#5-회원탈퇴\" class=\"headerlink\" title=\"　　5) 회원탈퇴\"></a>　　5) 회원탈퇴</h5><h5 id=\"6-사용자-정보-복구-휴면\"><a href=\"#6-사용자-정보-복구-휴면\" class=\"headerlink\" title=\"　　6) 사용자 정보 복구(휴면)\"></a>　　6) 사용자 정보 복구(휴면)</h5><h5 id=\"7-사용자-정보-조회\"><a href=\"#7-사용자-정보-조회\" class=\"headerlink\" title=\"　　7) 사용자 정보 조회\"></a>　　7) 사용자 정보 조회</h5><h5 id=\"8-사용자-정보-변경\"><a href=\"#8-사용자-정보-변경\" class=\"headerlink\" title=\"　　8) 사용자 정보 변경\"></a>　　8) 사용자 정보 변경</h5><h5 id=\"9-로그인-ID-찾기\"><a href=\"#9-로그인-ID-찾기\" class=\"headerlink\" title=\"　　9) 로그인 ID 찾기\"></a>　　9) 로그인 ID 찾기</h5><h5 id=\"10-사용자-비밀번호-초기화-찾기\"><a href=\"#10-사용자-비밀번호-초기화-찾기\" class=\"headerlink\" title=\"　　10) 사용자 비밀번호 초기화(찾기)\"></a>　　10) 사용자 비밀번호 초기화(찾기)</h5><h5 id=\"11-이용약관-동의\"><a href=\"#11-이용약관-동의\" class=\"headerlink\" title=\"　　11) 이용약관 동의\"></a>　　11) 이용약관 동의</h5><hr>\n<h4 id=\"2-디바이스\"><a href=\"#2-디바이스\" class=\"headerlink\" title=\"2. 디바이스\"></a>2. 디바이스</h4><h5 id=\"1-디바이스-리스트\"><a href=\"#1-디바이스-리스트\" class=\"headerlink\" title=\"　　1) 디바이스 리스트\"></a>　　1) 디바이스 리스트</h5><h5 id=\"2-디바이스-이름-수정\"><a href=\"#2-디바이스-이름-수정\" class=\"headerlink\" title=\"　　2) 디바이스 이름 수정\"></a>　　2) 디바이스 이름 수정</h5><h5 id=\"3-디바이스-푸시-설정정보-조회\"><a href=\"#3-디바이스-푸시-설정정보-조회\" class=\"headerlink\" title=\"　　3) 디바이스 푸시 설정정보 조회\"></a>　　3) 디바이스 푸시 설정정보 조회</h5><h5 id=\"4-디바이스-푸시-설정정보-변경\"><a href=\"#4-디바이스-푸시-설정정보-변경\" class=\"headerlink\" title=\"　　4) 디바이스 푸시 설정정보 변경\"></a>　　4) 디바이스 푸시 설정정보 변경</h5><h5 id=\"5-디바이스-등록\"><a href=\"#5-디바이스-등록\" class=\"headerlink\" title=\"　　5) 디바이스 등록\"></a>　　5) 디바이스 등록</h5><h5 id=\"6-디바이스-삭제\"><a href=\"#6-디바이스-삭제\" class=\"headerlink\" title=\"　　6) 디바이스 삭제\"></a>　　6) 디바이스 삭제</h5><hr>\n<h3 id=\"사용-Library\"><a href=\"#사용-Library\" class=\"headerlink\" title=\"사용 Library\"></a>사용 Library</h3><h5 id=\"1-로그-nest-winston\"><a href=\"#1-로그-nest-winston\" class=\"headerlink\" title=\"　　1) 로그 : nest-winston\"></a>　　1) 로그 : nest-winston</h5><h5 id=\"2-AWS-aws-sdk\"><a href=\"#2-AWS-aws-sdk\" class=\"headerlink\" title=\"　　2) AWS : aws-sdk\"></a>　　2) AWS : aws-sdk</h5><h5 id=\"3-parameter-검증-joi\"><a href=\"#3-parameter-검증-joi\" class=\"headerlink\" title=\"　　3) parameter 검증 : joi\"></a>　　3) parameter 검증 : joi</h5><h5 id=\"4-단방향Hash-bcryptjs\"><a href=\"#4-단방향Hash-bcryptjs\" class=\"headerlink\" title=\"　　4) 단방향Hash : bcryptjs\"></a>　　4) 단방향Hash : bcryptjs</h5><h5 id=\"5-시간-moment\"><a href=\"#5-시간-moment\" class=\"headerlink\" title=\"　　5) 시간 : moment\"></a>　　5) 시간 : moment</h5><h5 id=\"6-JWT-Token-jsonwebtoken\"><a href=\"#6-JWT-Token-jsonwebtoken\" class=\"headerlink\" title=\"　　6) JWT Token : jsonwebtoken\"></a>　　6) JWT Token : jsonwebtoken</h5><h5 id=\"7-이메일-발송-nestjs-modules-mailer\"><a href=\"#7-이메일-발송-nestjs-modules-mailer\" class=\"headerlink\" title=\"　　7) 이메일 발송 : @nestjs-modules/mailer\"></a>　　7) 이메일 발송 : @nestjs-modules/mailer</h5><h5 id=\"8-양방향-암호화-AES256-crypto\"><a href=\"#8-양방향-암호화-AES256-crypto\" class=\"headerlink\" title=\"　　8) 양방향 암호화 AES256 : crypto\"></a>　　8) 양방향 암호화 AES256 : crypto</h5><h5 id=\"9-Database-pool-mysql2\"><a href=\"#9-Database-pool-mysql2\" class=\"headerlink\" title=\"　　9) Database pool : mysql2\"></a>　　9) Database pool : mysql2</h5><h5 id=\"10-Database-mapper-mybatis-mapper\"><a href=\"#10-Database-mapper-mybatis-mapper\" class=\"headerlink\" title=\"　　10) Database mapper : mybatis-mapper\"></a>　　10) Database mapper : mybatis-mapper</h5><h5 id=\"11-파일시스템-fs\"><a href=\"#11-파일시스템-fs\" class=\"headerlink\" title=\"　　11) 파일시스템 : fs\"></a>　　11) 파일시스템 : fs</h5><h5 id=\"12-임의String생성-rand-token\"><a href=\"#12-임의String생성-rand-token\" class=\"headerlink\" title=\"　　12) 임의String생성 : rand-token\"></a>　　12) 임의String생성 : rand-token</h5><hr>\n<h5 id=\"결국은-2주만에-모든-기능을-만들었다-솔직히-Nest를-활용했기-때문에-빠르게-끝냈을-것으로-보이며-순수-Node-js를-사용했다면-최소-1달-이상은-걸렸을-것이라고-확신한다\"><a href=\"#결국은-2주만에-모든-기능을-만들었다-솔직히-Nest를-활용했기-때문에-빠르게-끝냈을-것으로-보이며-순수-Node-js를-사용했다면-최소-1달-이상은-걸렸을-것이라고-확신한다\" class=\"headerlink\" title=\"결국은 2주만에 모든 기능을 만들었다. 솔직히 Nest를 활용했기 때문에 빠르게 끝냈을 것으로 보이며, 순수 Node.js를 사용했다면 최소 1달 이상은 걸렸을 것이라고 확신한다.\"></a>결국은 2주만에 모든 기능을 만들었다. 솔직히 Nest를 활용했기 때문에 빠르게 끝냈을 것으로 보이며, 순수 Node.js를 사용했다면 최소 1달 이상은 걸렸을 것이라고 확신한다.</h5><h5 id=\"앱과-디바이스쪽-테스트에서도-좋은-성능을-기대한다\"><a href=\"#앱과-디바이스쪽-테스트에서도-좋은-성능을-기대한다\" class=\"headerlink\" title=\"앱과 디바이스쪽 테스트에서도 좋은 성능을 기대한다.\"></a>앱과 디바이스쪽 테스트에서도 좋은 성능을 기대한다.</h5>","text":"API Template 구조도 [Figure] 위 bash처럼 만들어주면, Nest.js가 내용을 그대로 node.js 형태로 만들어줌.nest형태로 서버에 올리기 싫다면, dist폴더로 추출된 Export 파일들을 그대로 서버로 올려주면 된다.개인적","link":"","raw":null,"photos":[],"categories":[{"name":"nodejs","slug":"nodejs","count":3,"path":"api/categories/nodejs.json"}],"tags":[{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"api","slug":"api","count":2,"path":"api/tags/api.json"},{"name":"template","slug":"template","count":1,"path":"api/tags/template.json"}]},{"title":"node.js TypeORM, Sequelize Test","slug":"node-js-TypeORM-Sequelize-Test","date":"2020-11-18T23:32:52.000Z","updated":"2020-11-23T01:29:12.138Z","comments":true,"pin":null,"path":"api/articles/node-js-TypeORM-Sequelize-Test.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png","content":"<h2 id=\"API에서-Sequelize-사용하기\"><a href=\"#API에서-Sequelize-사용하기\" class=\"headerlink\" title=\"API에서 Sequelize 사용하기\"></a>API에서 Sequelize 사용하기</h2><hr>\n<h4 id=\"1-Install\"><a href=\"#1-Install\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g --save mysql2</span><br><span class=\"line\"></span><br><span class=\"line\">npm install -g --save sequelize</span><br><span class=\"line\">npm install -g --save sequelize-cli</span><br><span class=\"line\">npm install -g --save sequelize-auto</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-Sequelize-설정\"><a href=\"#2-Sequelize-설정\" class=\"headerlink\" title=\"2. Sequelize 설정\"></a>2. Sequelize 설정</h4> <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sequelize-auto -o [MODEL_PATH] -d [TABLE] -h [DATABASE_ADDRESS] -u [USERID] -x [PASSWORD] -p [DATABASE_PORT] -e [DATABASE_TYPE]</span><br></pre></td></tr></table></figure></div>\n<h5 id=\"1-o-mapper-model\"><a href=\"#1-o-mapper-model\" class=\"headerlink\" title=\"1) -o : mapper model\"></a>1) -o : mapper model</h5><h5 id=\"2-d-table\"><a href=\"#2-d-table\" class=\"headerlink\" title=\"2) -d : table\"></a>2) -d : table</h5><h5 id=\"3-h-database\"><a href=\"#3-h-database\" class=\"headerlink\" title=\"3) -h : database\"></a>3) -h : database</h5><h5 id=\"4-u-userId\"><a href=\"#4-u-userId\" class=\"headerlink\" title=\"4) -u : userId\"></a>4) -u : userId</h5><h5 id=\"5-x-password\"><a href=\"#5-x-password\" class=\"headerlink\" title=\"5) -x : password\"></a>5) -x : password</h5><h5 id=\"6-p-port\"><a href=\"#6-p-port\" class=\"headerlink\" title=\"6) -p : port\"></a>6) -p : port</h5><h5 id=\"7-e-database-type\"><a href=\"#7-e-database-type\" class=\"headerlink\" title=\"7) -e : database type\"></a>7) -e : database type</h5><h4 id=\"3-model-mapper\"><a href=\"#3-model-mapper\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* jshint indent: 2 */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">sequelize, DataTypes</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sequelize.define(<span class=\"string\">'userInfo'</span>, &#123;</span><br><span class=\"line\">    seq: &#123;</span><br><span class=\"line\">      autoIncrement: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      type: DataTypes.INTEGER(<span class=\"number\">11</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      primaryKey: <span class=\"literal\">true</span></span><br><span class=\"line\">      <span class=\"comment\">/*get() &#123;</span></span><br><span class=\"line\"><span class=\"comment\">        const rawValue = this.getDataValue(seq);</span></span><br><span class=\"line\"><span class=\"comment\">        return rawValue ? rawValue.toUpperCase() : null;</span></span><br><span class=\"line\"><span class=\"comment\">      &#125;*/</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    id: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">30</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    password: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">100</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    email: &#123;</span><br><span class=\"line\">      type: DataTypes.STRING(<span class=\"number\">50</span>),</span><br><span class=\"line\">      allowNull: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    loginDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    registDate: &#123;</span><br><span class=\"line\">      type: DataTypes.DATEONLY,</span><br><span class=\"line\">      allowNull: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    sequelize,</span><br><span class=\"line\">    tableName: <span class=\"string\">'userInfo'</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-model-index-code\"><a href=\"#4-model-index-code\" class=\"headerlink\" title=\"4. model index code\"></a>4. model index code</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span>;</span><br><span class=\"line\"><span class=\"comment\">//프로젝트의 파일을 읽기위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"comment\">//프로젝트 파일의 경로를 얻기 위한 용도</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> Sequelize = <span class=\"built_in\">require</span>(<span class=\"string\">'sequelize'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> basename = path.basename(__filename);</span><br><span class=\"line\"><span class=\"keyword\">const</span> env = process.env.NODE_ENV;</span><br><span class=\"line\"><span class=\"comment\">//DB 연결정보를 환경변수로 가변설정</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"built_in\">require</span>(__dirname + <span class=\"string\">'/../config/dbConfig.json'</span>)[env];</span><br><span class=\"line\"><span class=\"keyword\">const</span> db = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// nodejs에서 mysql 접근을 쉽게 할 수 있도록 하는 라이브러리 사용(ORM 맵핑을 위해 사용한 것으로 파악)</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sequelize = <span class=\"keyword\">new</span> Sequelize(config.database, config.username, config.password, config);</span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 1. 직접 선언형태의 방법을 사용하는 방법.</span></span><br><span class=\"line\">db.userInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/userInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\">db.deviceInfo = <span class=\"built_in\">require</span>(<span class=\"string\">'../model/deviceInfo'</span>)(sequelize, Sequelize);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> 2. 자동으로 파일에서 로드하여 필요한 객체를 받아오는 방법.</span></span><br><span class=\"line\"><span class=\"comment\">//https://blog.csdn.net/weixin_34324081/article/details/91445015</span></span><br><span class=\"line\"><span class=\"comment\">//fs를 통해 자동으로 로드되서 실행되고(ORM) 생성된 모델 객체가 db객체 아래에 마운트됨..</span></span><br><span class=\"line\">fs</span><br><span class=\"line\">    .readdirSync(__dirname)</span><br><span class=\"line\">    .filter(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> (file.indexOf(<span class=\"string\">'.'</span>) !== <span class=\"number\">0</span>) &amp;&amp; (file !== basename) &amp;&amp; (file.slice(<span class=\"number\">-3</span>) === <span class=\"string\">'.js'</span>);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    .forEach(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> model = <span class=\"built_in\">require</span>(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);</span><br><span class=\"line\">        db[model.name] = model;</span><br><span class=\"line\">        <span class=\"comment\">//console.log(model.name);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">Object</span>.keys(db).forEach(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">modelName</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (db[modelName].associate) &#123;</span><br><span class=\"line\">        db[modelName].associate(db);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">db.sequelize = sequelize;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = db;</span><br></pre></td></tr></table></figure></div>\n\n<h2 id=\"API에서-TypeORM-사용하기\"><a href=\"#API에서-TypeORM-사용하기\" class=\"headerlink\" title=\"API에서 TypeORM 사용하기\"></a>API에서 TypeORM 사용하기</h2><h4 id=\"1-Install-1\"><a href=\"#1-Install-1\" class=\"headerlink\" title=\"1. Install\"></a>1. Install</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save @nestjs/typeorm</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"2-TypeORM-Repository-활용\"><a href=\"#2-TypeORM-Repository-활용\" class=\"headerlink\" title=\"2. TypeORM.Repository 활용\"></a>2. TypeORM.Repository 활용</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Repository, EntityRepository &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"typeorm\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; User &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../user/entities/user.entity'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@EntityRepository(User)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserRepository</span> <span class=\"keyword\">extends</span> <span class=\"title\">Repository</span>&lt;<span class=\"title\">User</span>&gt;</span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"3-model-mapper-1\"><a href=\"#3-model-mapper-1\" class=\"headerlink\" title=\"3. model mapper\"></a>3. model mapper</h4><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"JAVASCRIPT\"><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Entity, Column, PrimaryColumn &#125; <span class=\"keyword\">from</span> <span class=\"string\">'typeorm'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mapping &#125; <span class=\"keyword\">from</span> <span class=\"string\">'auto-mapping'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">@Entity(<span class=\"string\">'TBL_USERsss'</span>, &#123; <span class=\"attr\">synchronize</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">  @PrimaryColumn(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_id'</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  id: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_pwd'</span>, <span class=\"attr\">length</span>: <span class=\"number\">128</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  password: string;</span><br><span class=\"line\">  <span class=\"comment\">//@ForeignKey(() =&gt; Profile)</span></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'usergroup_id'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Number</span> &#125;)</span><br><span class=\"line\">  userGroupId: number;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_status'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  userStatus: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_name'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  name: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_mobileno'</span>, <span class=\"attr\">length</span>: <span class=\"number\">13</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobile: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_email'</span>, <span class=\"attr\">length</span>: <span class=\"number\">50</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  email: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_birthday'</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  birthday: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'mobile_model'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  mobileModel: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_type'</span>, <span class=\"attr\">length</span>: <span class=\"number\">1</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  os: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'os_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">30</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  osVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'app_ver'</span>, <span class=\"attr\">length</span>: <span class=\"number\">8</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  appVer: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_logindt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  loginDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'user_loginip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  loginIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  insertDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123;<span class=\"attr\">name</span>:<span class=\"string\">'insert_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span>&#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  insertIp: string;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_dt'</span>, <span class=\"attr\">default</span>: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"string\">`now()`</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">Date</span> &#125;)</span><br><span class=\"line\">  updateDate: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  @Column(&#123; <span class=\"attr\">name</span>: <span class=\"string\">'update_ip'</span>, <span class=\"attr\">length</span>: <span class=\"number\">45</span>, <span class=\"attr\">nullable</span>: <span class=\"literal\">false</span> &#125;)</span><br><span class=\"line\">  @mapping(&#123; <span class=\"attr\">type</span>: <span class=\"built_in\">String</span> &#125;)</span><br><span class=\"line\">  updateIp: string;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h4 id=\"4-Type-ORM-Method\"><a href=\"#4-Type-ORM-Method\" class=\"headerlink\" title=\"4. Type ORM Method\"></a>4. Type ORM Method</h4><p><a href=\"https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" target=\"_blank\" rel=\"noopener\">https://velog.io/@josworks27/typeORM-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0</a></p>\n<ul>\n<li>save, findone등 여러 method들이 있다. 활용하면 간단한 SQL은 충분히 날려볼 수 있다.</li>\n</ul>\n<h2 id=\"성능비교\"><a href=\"#성능비교\" class=\"headerlink\" title=\"성능비교\"></a>성능비교</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/99920422-c16d1e00-2d66-11eb-8e89-c64081815bfe.png\" alt=\"image\"></a></p>\n<ul>\n<li>너무 차이가 나기에 편리함vs성능 둘 중 어느 것을 택할지는 비지니스 성격에 맞춰야 할 것으로 보임.</li>\n</ul>\n","text":"API에서 Sequelize 사용하기1. Install1<br>2<br>3<br>4<br>5<br>npm install -g --save mysql2<br><br>npm install -g --save sequelize<br>npm install -g","link":"","raw":null,"photos":[],"categories":[{"name":"nodejs","slug":"nodejs","count":3,"path":"api/categories/nodejs.json"}],"tags":[{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"api","slug":"api","count":2,"path":"api/tags/api.json"},{"name":"ORM","slug":"ORM","count":1,"path":"api/tags/ORM.json"},{"name":"sequelize","slug":"sequelize","count":1,"path":"api/tags/sequelize.json"}]},{"title":"Node.js HTTP Flow","slug":"Node-js-HTTP-Flow","date":"2020-10-05T07:01:42.000Z","updated":"2020-11-23T01:29:16.594Z","comments":true,"pin":null,"path":"api/articles/Node-js-HTTP-Flow.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png","content":"<h2 id=\"API-시스템-구성도\"><a href=\"#API-시스템-구성도\" class=\"headerlink\" title=\"API 시스템 구성도\"></a>API 시스템 구성도</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95049128-22dc1d80-0724-11eb-96fa-47644f63fcbe.png\" alt=\"image\"></a></p>\n<ul>\n<li>(IP/Port) or(DNS) 를 통해서 API서버로 요청이 들어온걸로 가정하면,<br> 1) 최초 app.js내에서 Express내 application.js handler 로 진입.(Default Configuration은 기본적으로 수행되니 생략)<br> 2) 핸들러에서 라우터를 확인하고 HTTP Method를 확인한 뒤, Layer Stack을 수정해서 적용하고 Layer로 데이터를 보냄.<br> 3) Layer는 여러 MiddleWare를 사용하며, (proto.process_params)에서 Req, Res 데이터들을 각각 분류하여 저장 및 생성.<br> 4) Layer내에서 모두 셋팅이 끝나면 Router로 해당 데이터를 보냄.<br> 5) 사용자가 요청한 데이터를 req에 받을 수 있고, Method를 통해 res데이터를 주는 것을 미리 Layer에서 셋팅된 res로 셋팅하여 내보낼 수 있음.</li>\n</ul>\n","text":"API 시스템 구성도 [Figure]  5) 사용자가 요청한 데이터를 req에 받을 수 있고, Method를 통해 res데이터를 주는 것을 미리 Layer에서 셋팅된 res로 셋팅하여 내보낼 수 있음.","link":"","raw":null,"photos":[],"categories":[{"name":"nodejs","slug":"nodejs","count":3,"path":"api/categories/nodejs.json"}],"tags":[{"name":"flow","slug":"flow","count":2,"path":"api/tags/flow.json"},{"name":"node","slug":"node","count":3,"path":"api/tags/node.json"},{"name":"http","slug":"http","count":1,"path":"api/tags/http.json"}]},{"title":"JWT(AccessToken)","slug":"JWT-AccessToken","date":"2020-10-05T06:48:50.000Z","updated":"2020-11-23T01:31:25.287Z","comments":true,"pin":null,"path":"api/articles/JWT-AccessToken.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/95048615-1acfae00-0723-11eb-8f8b-36a2cff3b14a.png","content":"<h1 id=\"구성-요소\"><a href=\"#구성-요소\" class=\"headerlink\" title=\"구성 요소\"></a>구성 요소</h1><ul>\n<li>Header : 암호화할 방식(alg), 타입(type) 등</li>\n<li>Payload : 서버에서 보낼 데이터가 들어갑니다. 일반적으로 유저의 고유 ID값, 유효기간이 들어갑니다.</li>\n<li>Verify Signature : Base64 방식으로 인코딩한 Header,payload 그리고 SECRET KEY를 더한 후 서명됩니다.</li>\n</ul>\n<h2 id=\"최종Return값\"><a href=\"#최종Return값\" class=\"headerlink\" title=\"최종Return값\"></a>최종Return값</h2><ul>\n<li>Encoded Header + “.” + Encoded Payload + “.” + Verify Signature</li>\n</ul>\n<h2 id=\"Flow-Chart\"><a href=\"#Flow-Chart\" class=\"headerlink\" title=\"Flow Chart\"></a>Flow Chart</h2><p><a href=\"https://user-images.githubusercontent.com/62123161/95048615-1acfae00-0723-11eb-8f8b-36a2cff3b14a.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95048615-1acfae00-0723-11eb-8f8b-36a2cff3b14a.png\" alt=\"image\"></a><br>    1. 사용자가 로그인을 한다.<br>    2. 서버에서는 계정정보를 읽어 사용자를 확인 후, 사용자의 고유한 ID값을 부여한 후, 기타 정보와 함께 Payload에 넣습니다.<br>    3. JWT 토큰의 유효기간을 설정합니다.<br>    4. 암호화할 SECRET KEY를 이용해 ACCESS TOKEN을 발급합니다.<br>    5. 사용자는 Access Token을 받아 저장한 후, 인증이 필요한 요청마다 토큰을 헤더에 실어 보냅니다.<br>    6. 서버에서는 해당 토큰의 Verify Signature를 SECRET KEY로 복호화한 후, 조작 여부, 유효기간을 확인합니다.<br>    7. 검증이 완료된다면, Payload를 디코딩하여 사용자의 ID에 맞는 데이터를 가져옵니다.  </p>\n","text":"구성 요소Header : 암호화할 방식(alg), 타입(type) 등Payload : 서버에서 보낼 데이터가 들어갑니다. 일반적으로 유저의 고유 ID값, 유효기간이 들어갑니다.Verify Signature : Base64 방식으로 인코딩한 Header","link":"","raw":null,"photos":[],"categories":[{"name":"etc","slug":"etc","count":1,"path":"api/categories/etc.json"}],"tags":[{"name":"JWT","slug":"JWT","count":1,"path":"api/tags/JWT.json"},{"name":"Structure","slug":"Structure","count":1,"path":"api/tags/Structure.json"},{"name":"flow","slug":"flow","count":2,"path":"api/tags/flow.json"}]},{"title":"MQTT 비교","slug":"MQTT-Info","date":"2020-10-05T06:07:26.000Z","updated":"2020-11-23T01:31:25.288Z","comments":true,"pin":null,"path":"api/articles/MQTT-Info.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/95045402-f2dd4c00-071c-11eb-9c49-2510fce691c3.png","content":"<h1 id=\"공통적인-MQTT-특성\"><a href=\"#공통적인-MQTT-특성\" class=\"headerlink\" title=\"공통적인 MQTT 특성\"></a>공통적인 MQTT 특성</h1><ul>\n<li><dl><dt>QOS (QUALITY OF SERVICE)</dt><dd>MQTT는 시스템에 참여하는 장치들의 처리 능력, 네트워크 대역폭, 메시지 오버헤드 등 주변상황에 맞게 시스템이 동작할 수 있도록 3단계 QoS(Quality of Service) 를 제공합니다.</dd></dl><ul>\n<li><p>0 : 메시지는 한번만 전달하며, 전달여부를 확인하지 않는다. Fire and Forget 타입이다.</p>\n</li>\n<li><p>1 : 메시지는 반드시 한번 이상 전달된다. 하지만 메시지의 핸드셰이킹 과정을 엄밀하게 추적하지 않기 때문에, 중복전송될 수도 있다.</p>\n</li>\n<li><p>2 : 메시지는 한번만 전달된다. 메시지의 핸드셰이킹 과정을 추적한다. 높은 품질을 보장하지만 성능의 희생이 따른다.</p>\n</li>\n<li><p>0에 가까울수록 메시지 처리에 대한 부하가 적은 대신 메시지 손실 위험이 높아집니다. 2에 가까울수록 메시지 손실 위험은 줄어들지만 메시지 처리 부하가 급격히 늘어납니다.<br>(보통 0~1 정도의 QoS를 사용하면서 메시지 손실등의 위험은 상위 어플리케이션 차원에서 관리하도록 하는듯 합니다.)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"Mosquitto-특성\"><a href=\"#Mosquitto-특성\" class=\"headerlink\" title=\"Mosquitto 특성\"></a>Mosquitto 특성</h1><p><a href=\"https://user-images.githubusercontent.com/62123161/95045402-f2dd4c00-071c-11eb-9c49-2510fce691c3.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95045402-f2dd4c00-071c-11eb-9c49-2510fce691c3.png\" alt=\"image\"></a><br>    - 단일 스레드 방식로 구현 : poll() 메소드를 이용하여 루프를 계속해서 반복하며 데이터를 받고 처리.<br>    - MQTT의 기본 기능을 충실히 지원하는 가벼운 MQTT 브로커<br>    - will(유언)<br>        a. –will-topic : 연결이 끊어지면 메세지 보낼 토픽<br>        b. –will-qos : 연결이 끊어지면 어떤 qos level로 보낼지(0~2)<br>        c. –will-payload : 연결이 끊어지면 보낼 메세지<br>    - Topic<br>        a. +, # 등 wildcard 사용가능<br>    - Session<br>        a. cleanSession 명령어를 false로 두면 완전히 연결을 끊지 않고 대기로 전환.(연결되면 자동활성화)<br>        b. HeartBeat을 전송하고 응답없으면 끊어버림. (시간, 일, 주, 월, 연도로 변경가능)<br>    - QoS(Default 0)<br>    - Client Size<br>        a. Default : 512개<br>    - MySQL과 연동<br>    - Protocol Version : 3.1 / 3.1.1<br>    - WebSocket 사용가능<br>    - 명령어 Page(<a href=\"https://mosquitto.org/man/mosquitto-8.html\" target=\"_blank\" rel=\"noopener\">https://mosquitto.org/man/mosquitto-8.html</a>)<br>    - 라이센스 없음.</p>\n<h2 id=\"Mosquitto-테스트\"><a href=\"#Mosquitto-테스트\" class=\"headerlink\" title=\"Mosquitto 테스트\"></a>Mosquitto 테스트</h2><pre><code>- https://ddnemo.tistory.com/120\n    a. https://midnightcow.tistory.com/36\n- https://deneb21.tistory.com/416</code></pre><h1 id=\"RabitMQ-특성\"><a href=\"#RabitMQ-특성\" class=\"headerlink\" title=\"RabitMQ 특성\"></a>RabitMQ 특성</h1><p>1) 신뢰성<br>    - RabbitMQ는 성능과 맞바꿀 수 있는 다양한 특성들을 제공하는데, 안정성, 영속성 배달 확인, 발행자 보증, 그리고 고가용성등이 있다.</p>\n<p>2) 유연한 라우팅<br>    - 메시지는 큐에 도착하기 전에 exchange를 통해 라우트된다.<br>    - RabbitMQ는 전형적인 라우팅 로직을 위한 몇몇 내장된 exchange 타입을 가지고 있다.<br>    - 좀 더 복잡한 라우팅을 위해서 exchange들을 서로 연결하거나, 자신만의 exchange 타입을 플러그인으로 만들수도 있다.</p>\n<p>3) 클러스터링<br>    - 지역 네트워크상에서 여러개의 RabbitMQ 서버들이 함께 클러스터링되어 단일한 논리적 브로커를 형성할 수 있다.</p>\n<p>4) 연합체(Federation)<br>    - 클러스터링이 허용하는 것보다는 좀 더 느슨하고 신뢰할 필요가 없는 연결을 필요로 하는 서버들에 대해서, RabbitMQ는 연합모델(federation model)을 제공한다.</p>\n<p>5) 고가용적 큐<br>    - 큐는 클러스터내의 여러 머신들에 걸쳐 복제될 수 있는데, 이는 하드웨어 결함시에 여러분의 메시지의 안전을 보장한다.</p>\n<p>6) 다중 프로토콜<br>    - RabbitMQ는 다양한 형태의 메시징 프로토콜을 통해서 메시징을 제공한다.</p>\n<p>7) 많은 클라이언트<br>    - 여러분이 생각할 수 있는 거의 모든 언어에 대해 RabbitMQ 클라이언트가 있다.</p>\n<p>8) 관리 UI<br>    - RabbitMQ는 메시지 브로커의 모든 것들을 모니터하고 컨트롤할 수 있는 사용하기 쉬운 관리 UI를 함께 제공한다.</p>\n<p>9) 추적(Tracing)<br>    - 만약 여러분의 메시징 시스템이 잘못 동작한다면, RabbitMQ는 여러분이 무엇이 잘못되고 있는지를 밝혀낼 수 있도록 추적 기능을 제공한다.</p>\n<p>10) 플러그인 시스템<br>    - RabbitMQ는 다른 방법으로 RabbitMQ를 확장시킬 수 있는 다양한 플러그인을 제공하는데, 여러분 스스로 플러그인을 제작할 수도 있다.</p>\n<p>11) 용어정리<br>    - Vhost(virutal host)<br>        a. Virtual Host를 통해서 하나의 RabbitMQ 인스턴스 안에 사용하고 있는 Application을 분리할 수 있습니다.<br>    - Connection<br>        a. 물리적인 TCP Connection, HTTPS -&gt; TLS(SSL) Connection을 사용<br>    - Channel<br>        a. 하나의 물리적인 Connection 내에 생성되는 가상의 Connection<br>        b. Consumer의 process나 thread는 각자 Channel을 통해 Queue에 연결 될 수 있습니다.</p>\n<p>12) Message Queue 및 Message 보존방법<br>    - RabbitMQ server가 종료(어떤 이유에서든지)후 재기동하면, 기본적으로 Queue는 모두 제거됩니다.<br>    - 이를 막기 위해서는 Queue를 생성할 때, Durable 옵션에 true를 주고 생성해야 하며, Producer가 메세지를 발송할 때, PERSISTENT_TEXT_PLAIN 옵션을 주어야 메세지가 보존됩니다.<br>    a. Queue 생성<br>    <div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmqChannel.queueDeclare(rabbitmqQueueName, <span class=\"literal\">true</span>, <span class=\"literal\">false</span>, <span class=\"literal\">false</span>, null); //QueueName 다음의 <span class=\"literal\">true</span>가 durable option</span><br></pre></td></tr></table></figure></div></p>\n<pre><code>b. Message 발송\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rabbitmqChannel.basicPublish(exchangeName, routingKey, MessageProperties.PERSISTENT_TEXT_PLAIN, message.getBytes());</span><br></pre></td></tr></table></figure></div></code></pre><p>13) 라이센스 있음(<a href=\"https://ko.wikipedia.org/wiki/%EB%AA%A8%EC%A7%88%EB%9D%BC_%EA%B3%B5%EC%9A%A9_%ED%97%88%EA%B0%80%EC%84%9C\" target=\"_blank\" rel=\"noopener\">https://ko.wikipedia.org/wiki/%EB%AA%A8%EC%A7%88%EB%9D%BC_%EA%B3%B5%EC%9A%A9_%ED%97%88%EA%B0%80%EC%84%9C</a>)</p>\n<h1 id=\"RabitMQ-개념-5개\"><a href=\"#RabitMQ-개념-5개\" class=\"headerlink\" title=\"RabitMQ 개념(5개)\"></a>RabitMQ 개념(5개)</h1><p><a href=\"https://user-images.githubusercontent.com/62123161/95046057-48662880-071e-11eb-9d24-ae595f6a6042.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95046057-48662880-071e-11eb-9d24-ae595f6a6042.png\" alt=\"image\"></a><br>    - Producer<br>        a. 메세지를 생성하고 발송하는 주체<br>        b.Producer는 Queue에 직접 접근하지 않고, 항상 Exchange를 통해 접근<br>    - Consumer<br>        a. 메세지를 수신하는 주체<br>        b. Consumer는 Queue에 직접 접근하여 메세지를 가져옴<br>    - Queue<br>        a. 메세지들이 Consumer가 소비하기 전까지 보관되는 장소<br>        b. 같은 이름과 같은 설정으로 Queue를 생성하면 에러 없이 기존 Queue에 연결되지만, 같은 이름과 다른 설정으로 Queue를 생성하려고 시도하면 에러<br>    - Exchange<br>        a. Producer들에게서 전달받은 메세지들을 어떤 Queue들에게 발송할지를 결정하는 객체<br>        b. 총 4개의 Type을 보유하며, Router 개념으로 생각하면 됨.<br>            i. Direct(default)<br>                1. Routing key가 정확히 일치하는 Queue에 메세지 전송(Unicast)<br>                2. 예시<br>                <a href=\"https://user-images.githubusercontent.com/62123161/95046159-8cf1c400-071e-11eb-8106-45aace9bedc2.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95046159-8cf1c400-071e-11eb-8106-45aace9bedc2.png\" alt=\"image\"></a><br>                (error 메세지만 저장소에 기록하고, info와 warning을 포함한 모든 정보를 디스플레이에 출력할 때를 나타내는 모식도)<br>            ii. Topic<br>                1. Routing key 패턴이 일치하는 Queue에 메세지 전송(Multicast)<br>                2. 예시<br>                <a href=\"https://user-images.githubusercontent.com/62123161/95046205-b14da080-071e-11eb-901a-b31040e5ed16.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95046205-b14da080-071e-11eb-901a-b31040e5ed16.png\" alt=\"image\"></a><br>                (라우팅 키가 example.orange.rabbit 인 경우 메세지가 Q1, Q2에 모두 전달되고, 라우팅 키가 example.orange.turtle 인 경우 메세지가 Q1에만 전달. 라우팅 키가 lazy.grape.rabbit인 경우엔 메세지가 Q2에 한 번만 전달이 됩니다.)<br>            iii. Headers<br>                1. [key:value]로 이루어진 header 값을 기준으로 일치하는 Queue에 메세지 전송(Multicast)<br>                2. 예시<br>                <a href=\"https://user-images.githubusercontent.com/62123161/95046280-d8a46d80-071e-11eb-9236-aed3b3cb2760.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95046280-d8a46d80-071e-11eb-9236-aed3b3cb2760.png\" alt=\"image\"></a><br>            iv. Fanout<br>                1. 해당 Exchange에 등록된 모든 Queue에 메세지 전송(Broadcast)<br>                2. 예시<br>                <a href=\"https://user-images.githubusercontent.com/62123161/95046342-f83b9600-071e-11eb-8f27-e5352204a36e.png\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/95046342-f83b9600-071e-11eb-8f27-e5352204a36e.png\" alt=\"image\"></a></p>\n<pre><code>- Binding\n    a. Exchange에게 메세지를 라우팅 할 규칙을 지정하는 행위</code></pre><h1 id=\"HiveMQ-특성\"><a href=\"#HiveMQ-특성\" class=\"headerlink\" title=\"HiveMQ 특성\"></a>HiveMQ 특성</h1><pre><code>- 자세한 정보가 너무 없음.\n- 샘플소스코드에 대한 링크는 아래와 같음\n    a. https://www.hivemq.com/blog/how-to-get-started-with-mqtt/\n- 다른MQTT Message Broker과 다른점\n    a. WebSockets native support for all common WebSocket versions\n        i. 웹소켓을 지원함은 물론이고, 클라이언트 인증서를 통한 통신이 가능함.\n    b. PROXY protocol for advanced load balancer integrations\n        i. TCP 프로토콜(로드밸런서) 뒤에 위치하는 것이 효율이 가장 좋다고 함.\n    c. Open-source extension SDK an extension framework to extend HiveMQ with custom business logic or integrate practically any system into HiveMQ\n    d. HiveMQ Enterprise Extensions for Kafka to seamlessly integrate MQTT messages with one or more Kafka clusters\n        i. HiveMQ MQTT 브로커에서 메시지를 버퍼링하여 Kafka 클러스터를 일시적으로 사용할 수 없을 때마다 고가용성 및 장애 허용성을 보장\n        [![image](https://user-images.githubusercontent.com/62123161/95046590-6c763980-071f-11eb-97aa-41faad3acc20.png)](https://user-images.githubusercontent.com/62123161/95046590-6c763980-071f-11eb-97aa-41faad3acc20.png)\n    e. HiveMQ Enterprise Security Extension to secure your MQTT deployment\n        i. SQL 데이터베이스 를 통한 인증 및 권한 부여에 대한 완전한 지원\n        ii. JSON 웹 토큰을 통한 인증에 대한 완전한 지원\n        iii. 클라이언트별로 주제 권한을 개별화하는 동적 권한 자리 표시 자\n        iv. 데이터를 모니터링하고 잠재적 인 보안 위반을 추적하는 데 도움이되는 자세한 액세스 로그\n        v. 액세스 제어 에 대한 역할 기반 액세스 제어 (RBAC)를 포함 HiveMQ 제어 센터 (ESE 버전 1.2.0 이상)\n- 라이센스 있음(https://www.hivemq.com/hivemq/editions/)</code></pre><h1 id=\"Mosca-MQTT\"><a href=\"#Mosca-MQTT\" class=\"headerlink\" title=\"Mosca MQTT\"></a>Mosca MQTT</h1><pre><code>- 특성(https://github.com/moscajs/mosca)\n    a. 구조가 단순\n    b. 사용 환경에 따라 customizing 하기도 용이\n        i. REDIS나 MongoDB를 활용한 storage option도 지원\n    c. 무료 사용이 가능한 license\n    d. MQTT 3.1, 3.1.1 호환.\n    e. QoS 0 또는 QoS 1 지원.\n    f. 클라이언트 인증(토픽을 제한하는데 사용)\n        i. #authenticate\n        ii. #authorizePublish\n        iii. #authorizeSubscribe\n    g. MIT License</code></pre>","text":"공통적인 MQTT 특성QOS (QUALITY OF SERVICE)MQTT는 시스템에 참여하는 장치들의 처리 능력, 네트워크 대역폭, 메시지 오버헤드 등 주변상황에 맞게 시스템이 동작할 수 있도록 3단계 QoS(Quality of Service) 를 제","link":"","raw":null,"photos":[],"categories":[{"name":"mqtt","slug":"mqtt","count":1,"path":"api/categories/mqtt.json"}],"tags":[{"name":"MQTT","slug":"MQTT","count":1,"path":"api/tags/MQTT.json"},{"name":"Message","slug":"Message","count":1,"path":"api/tags/Message.json"},{"name":"Broker","slug":"Broker","count":1,"path":"api/tags/Broker.json"}]},{"title":"기상청과 연동한 날씨 Data서버 구축","slug":"WeatherServer","date":"2020-08-15T03:06:45.000Z","updated":"2020-08-15T01:30:51.984Z","comments":true,"pin":null,"path":"api/articles/WeatherServer.json","excerpt":"","keywords":null,"cover":null,"content":"<p>2016년 C#에 이어 Python으로 개발을 진행했었다.<br>특별한 시나리오는 없다.</p>\n<ol>\n<li>AWS Cloudwatch의 CRON 설정을 통해 매 시간 전국의 날씨 상황정보를 받아옴.</li>\n<li>DataBase에 저장</li>\n<li>API를 통하여 날씨 정보를 제공</li>\n<li>(추후) TAC 청정환기를 위한 대기질 정보 수신부 추가예정</li>\n</ol>\n<h3 id=\"Python-Batch용\"><a href=\"#Python-Batch용\" class=\"headerlink\" title=\"Python Batch용\"></a>Python Batch용</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><figcaption><span>python Weather</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import json</span><br><span class=\"line\">import os</span><br><span class=\"line\">import pymysql</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import time</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Refactored</span></span><br><span class=\"line\">from pytz import timezone</span><br><span class=\"line\">from navien.util.logger import Logger as Log</span><br><span class=\"line\">from navien.util.secrets_manager import getSecretString</span><br><span class=\"line\">from datetime import datetime, timedelta</span><br><span class=\"line\">from navien.util.scenario.base.scenario import Scenario</span><br><span class=\"line\"></span><br><span class=\"line\">KWEATHER_URL = \\</span><br><span class=\"line\">  <span class=\"string\">'http://apis.data.go.kr/1360000/VilageFcstInfoService/getUltraSrtFcst'</span> \\</span><br><span class=\"line\">  <span class=\"string\">'?serviceKey=(SERVICE_KEY)&amp;numOfRows=1000&amp;pageNo=1&amp;dataType=JSON&amp;'</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">class ScenarioImpl(Scenario):</span><br><span class=\"line\">  def __init__(self, dbHelper, event, tz):</span><br><span class=\"line\">    super().__init__(dbHelper, event, tz)</span><br><span class=\"line\">    self._parseEvent(event)</span><br><span class=\"line\"></span><br><span class=\"line\">    self._todayList = &#123;&#125;</span><br><span class=\"line\">    self._queryParamList = []</span><br><span class=\"line\"></span><br><span class=\"line\">  def _parseEvent(self, event):</span><br><span class=\"line\">    self._now = datetime.now(timezone(self._tz))-timedelta(hours=1)</span><br><span class=\"line\">    self._lastModifyAt = self._now.strftime(<span class=\"string\">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class=\"line\">    self._registerAt = self._lastModifyAt</span><br><span class=\"line\"></span><br><span class=\"line\">  def _getRegionCodes(self):</span><br><span class=\"line\">    <span class=\"built_in\">return</span> self._dbHelper.fetchAll(</span><br><span class=\"line\">        <span class=\"string\">\"\"</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">        select * </span></span><br><span class=\"line\"><span class=\"string\">        from REGION_CODE </span></span><br><span class=\"line\"><span class=\"string\">        WHERE REGION_CODE&gt;20000 AND CITY !='' AND DONG='';    </span></span><br><span class=\"line\"><span class=\"string\">        \"</span><span class=\"string\">\"\"</span>, ()</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">  def _requestWeatherInfo(self, server, nx, ny):</span><br><span class=\"line\">    additionalValue = <span class=\"string\">'base_date='</span> + self._now.strftime(<span class=\"string\">\"%Y%m%d\"</span>) + \\</span><br><span class=\"line\">                      <span class=\"string\">'&amp;base_time='</span> + self._now.strftime(<span class=\"string\">\"%H00\"</span>) + \\</span><br><span class=\"line\">                      <span class=\"string\">'&amp;'</span> + <span class=\"string\">'nx='</span> + str(nx) + \\</span><br><span class=\"line\">                      <span class=\"string\">'&amp;'</span> + <span class=\"string\">'ny='</span> + str(ny)</span><br><span class=\"line\">    <span class=\"comment\"># Log.d('URL : &#123;&#125;&#123;&#125;'.format(server, additionalValue))</span></span><br><span class=\"line\">    _r = requests.get(server + additionalValue)</span><br><span class=\"line\">    <span class=\"built_in\">return</span> json.loads(_r.text)</span><br><span class=\"line\"></span><br><span class=\"line\">  @staticmethod</span><br><span class=\"line\">  def _isResponseOkay(response):</span><br><span class=\"line\">    resultCode = response[<span class=\"string\">'response'</span>][<span class=\"string\">'header'</span>][<span class=\"string\">'resultCode'</span>]</span><br><span class=\"line\">    resultMessage = response[<span class=\"string\">'response'</span>][<span class=\"string\">'header'</span>][<span class=\"string\">'resultMsg'</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> resultCode != <span class=\"string\">'00'</span>:</span><br><span class=\"line\">      Log.e(<span class=\"string\">'ResultCode : &#123;&#125;, ResultMessage : &#123;&#125;'</span>.format(resultCode, resultMessage))</span><br><span class=\"line\">      <span class=\"built_in\">return</span> False</span><br><span class=\"line\">    <span class=\"built_in\">return</span> True</span><br><span class=\"line\"></span><br><span class=\"line\">  def _cleanUpTables(self):</span><br><span class=\"line\">    self._dbHelper.execute(<span class=\"string\">'TRUNCATE STATUS_DAY;'</span>, ())</span><br><span class=\"line\">    self._dbHelper.execute(<span class=\"string\">'TRUNCATE STATUS_YDAY;'</span>, ())</span><br><span class=\"line\"></span><br><span class=\"line\">  def _updateTemperatureGap(self):</span><br><span class=\"line\">    yesterdayBegin = datetime.now(timezone(self._tz))-timedelta(hours=26)</span><br><span class=\"line\">    yesterdayEnd = datetime.now(timezone(self._tz))-timedelta(hours=22)</span><br><span class=\"line\">    yesterdayStatus = self._dbHelper.fetchAll(</span><br><span class=\"line\">        <span class=\"string\">\"\"</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">        SELECT * </span></span><br><span class=\"line\"><span class=\"string\">        FROM STATUS_LOG </span></span><br><span class=\"line\"><span class=\"string\">        WHERE REG_TIME BETWEEN %s AND %s GROUP BY REGION_CODE;</span></span><br><span class=\"line\"><span class=\"string\">        \"</span><span class=\"string\">\"\"</span>, (yesterdayBegin, yesterdayEnd)</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    Log.d(<span class=\"string\">'yesterdayBegin : &#123;&#125;'</span>.format(yesterdayBegin))</span><br><span class=\"line\">    Log.d(<span class=\"string\">'yesterdayEnd : &#123;&#125;'</span>.format(yesterdayEnd))</span><br><span class=\"line\">    Log.d(<span class=\"string\">'status : &#123;&#125;'</span>.format(yesterdayStatus))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> yesterdayStatus:</span><br><span class=\"line\">      try:</span><br><span class=\"line\">        todayTemp = int(self._todayList[row[<span class=\"string\">'REGION_CODE'</span>]][<span class=\"string\">'T1H'</span>])</span><br><span class=\"line\">        yesterdayTemp = int(row[<span class=\"string\">'T1H'</span>])</span><br><span class=\"line\">        diff = todayTemp - yesterdayTemp</span><br><span class=\"line\">        self._dbHelper.execute(</span><br><span class=\"line\">            <span class=\"string\">\"\"</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">            INSERT INTO STATUS_YDAY (</span></span><br><span class=\"line\"><span class=\"string\">            REGION_CODE, STATE, CITY, DONG, TODAY_TEMP, YESTERDAY_TEMP, DIFFERENCE, UPDATE_TIME</span></span><br><span class=\"line\"><span class=\"string\">            ) VALUES (%s, %s, %s, %s, %s, %s, %s, %s);</span></span><br><span class=\"line\"><span class=\"string\">            \"</span><span class=\"string\">\"\"</span>, (</span><br><span class=\"line\">              row[<span class=\"string\">'REGION_CODE'</span>], row[<span class=\"string\">'STATE'</span>], row[<span class=\"string\">'CITY'</span>], row[<span class=\"string\">'DONG'</span>],</span><br><span class=\"line\">              todayTemp, yesterdayTemp, diff, self._lastModifyAt</span><br><span class=\"line\">            )</span><br><span class=\"line\">        )</span><br><span class=\"line\">      except:</span><br><span class=\"line\">        <span class=\"built_in\">continue</span></span><br><span class=\"line\"></span><br><span class=\"line\">  def _insertStatus(self):</span><br><span class=\"line\">    self._dbHelper.executeMany(</span><br><span class=\"line\">        <span class=\"string\">\"\"</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">        INSERT INTO STATUS_DAY (</span></span><br><span class=\"line\"><span class=\"string\">        REGION_CODE, STATE, CITY, DONG, SKY, T1H, REH, </span></span><br><span class=\"line\"><span class=\"string\">        RN1, PTY, VEC, WSD, LGT, UUU, VVV, UPDATE_TIME</span></span><br><span class=\"line\"><span class=\"string\">        ) VALUES (%s, %s, %s, %s, %s, </span></span><br><span class=\"line\"><span class=\"string\">        %s, %s, %s, %s, </span></span><br><span class=\"line\"><span class=\"string\">        %s, %s, %s, %s, %s, %s);</span></span><br><span class=\"line\"><span class=\"string\">        \"</span><span class=\"string\">\"\"</span>, self._queryParamList)</span><br><span class=\"line\">    self._dbHelper.executeMany(</span><br><span class=\"line\">        <span class=\"string\">\"\"</span><span class=\"string\">\"</span></span><br><span class=\"line\"><span class=\"string\">        INSERT INTO STATUS_LOG (</span></span><br><span class=\"line\"><span class=\"string\">        REGION_CODE, STATE, CITY, DONG, SKY, T1H, REH, </span></span><br><span class=\"line\"><span class=\"string\">        RN1, PTY, VEC, WSD, LGT, UUU, VVV, REG_TIME</span></span><br><span class=\"line\"><span class=\"string\">        ) VALUES (%s, %s, %s, %s, </span></span><br><span class=\"line\"><span class=\"string\">        %s, %s, %s, %s, </span></span><br><span class=\"line\"><span class=\"string\">        %s, %s, %s, %s, %s, %s, %s);</span></span><br><span class=\"line\"><span class=\"string\">        \"</span><span class=\"string\">\"\"</span>, self._queryParamList)</span><br><span class=\"line\"></span><br><span class=\"line\">  def _fetchWeatherInfo(self):</span><br><span class=\"line\">    regionCodes = self._getRegionCodes()</span><br><span class=\"line\">    <span class=\"keyword\">for</span> region <span class=\"keyword\">in</span> regionCodes:</span><br><span class=\"line\">      response = self._requestWeatherInfo(KWEATHER_URL, region[<span class=\"string\">'NX'</span>], region[<span class=\"string\">'NY'</span>])</span><br><span class=\"line\">      <span class=\"keyword\">if</span> not self._isResponseOkay(response):</span><br><span class=\"line\">        <span class=\"built_in\">continue</span></span><br><span class=\"line\"></span><br><span class=\"line\">      weather = &#123;</span><br><span class=\"line\">        <span class=\"string\">'REGION_CODE'</span>: region[<span class=\"string\">'REGION_CODE'</span>],</span><br><span class=\"line\">        <span class=\"string\">'STATE'</span>: region[<span class=\"string\">'STATE'</span>],</span><br><span class=\"line\">        <span class=\"string\">'CITY'</span>: region[<span class=\"string\">'CITY'</span>],</span><br><span class=\"line\">        <span class=\"string\">'DONG'</span>: region[<span class=\"string\">'DONG'</span>]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">for</span> item <span class=\"keyword\">in</span> response[<span class=\"string\">'response'</span>][<span class=\"string\">'body'</span>][<span class=\"string\">'items'</span>][<span class=\"string\">'item'</span>]:</span><br><span class=\"line\">        currentTime = (self._now + timedelta(hours=+1)).strftime(<span class=\"string\">'%H00'</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> item[<span class=\"string\">'fcstTime'</span>] == currentTime:</span><br><span class=\"line\">          weather[item[<span class=\"string\">'category'</span>]] = item[<span class=\"string\">'fcstValue'</span>]</span><br><span class=\"line\">      <span class=\"comment\"># Log.d('weather : &#123;&#125;'.format(weather))</span></span><br><span class=\"line\">      self._todayList[weather[<span class=\"string\">'REGION_CODE'</span>]] = weather</span><br><span class=\"line\">      self._queryParamList.append((</span><br><span class=\"line\">        weather[<span class=\"string\">'REGION_CODE'</span>], weather[<span class=\"string\">'STATE'</span>], weather[<span class=\"string\">'CITY'</span>], weather[<span class=\"string\">'DONG'</span>],</span><br><span class=\"line\">        weather[<span class=\"string\">'SKY'</span>], weather[<span class=\"string\">'T1H'</span>], weather[<span class=\"string\">'REH'</span>], weather[<span class=\"string\">'RN1'</span>],</span><br><span class=\"line\">        weather[<span class=\"string\">'PTY'</span>], weather[<span class=\"string\">'VEC'</span>], weather[<span class=\"string\">'WSD'</span>], weather[<span class=\"string\">'LGT'</span>],</span><br><span class=\"line\">        weather[<span class=\"string\">'UUU'</span>], weather[<span class=\"string\">'VVV'</span>], self._lastModifyAt</span><br><span class=\"line\">      ))</span><br><span class=\"line\"></span><br><span class=\"line\">  def action(self):</span><br><span class=\"line\">    self._fetchWeatherInfo()</span><br><span class=\"line\">    self._cleanUpTables()</span><br><span class=\"line\">    self._updateTemperatureGap()</span><br><span class=\"line\">    self._insertStatus()</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"Java-Spring-Boot-Batch용\"><a href=\"#Java-Spring-Boot-Batch용\" class=\"headerlink\" title=\"Java(Spring Boot) Batch용\"></a>Java(Spring Boot) Batch용</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.kdnavien.mate.api.service;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.fasterxml.jackson.databind.JsonNode;</span><br><span class=\"line\">import com.kdnavien.mate.api.entity.NewWeatherRegionCode;</span><br><span class=\"line\">import com.kdnavien.mate.api.entity.NewWeatherStatusDay;</span><br><span class=\"line\">import com.kdnavien.mate.api.entity.NewWeatherStatusLog;</span><br><span class=\"line\">import com.kdnavien.mate.api.entity.NewWeatherStatusYDay;</span><br><span class=\"line\">import com.kdnavien.mate.api.helper.HttpHelper;</span><br><span class=\"line\">import com.kdnavien.mate.api.repository.NewWeatherRegionCodeRepository;</span><br><span class=\"line\">import com.kdnavien.mate.api.repository.NewWeatherStatusDayRepository;</span><br><span class=\"line\">import com.kdnavien.mate.api.repository.NewWeatherStatusLogRepository;</span><br><span class=\"line\">import com.kdnavien.mate.api.repository.NewWeatherStatusYDayRepository;</span><br><span class=\"line\">import lombok.extern.slf4j.Slf4j;</span><br><span class=\"line\">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\">import org.springframework.context.annotation.Profile;</span><br><span class=\"line\">import org.springframework.http.ResponseEntity;</span><br><span class=\"line\">import org.springframework.scheduling.annotation.Scheduled;</span><br><span class=\"line\">import org.springframework.stereotype.Component;</span><br><span class=\"line\">import org.springframework.util.StringUtils;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.net.URLEncoder;</span><br><span class=\"line\">import java.time.ZoneId;</span><br><span class=\"line\">import java.time.ZonedDateTime;</span><br><span class=\"line\">import java.time.format.DateTimeFormatter;</span><br><span class=\"line\">import java.util.*;</span><br><span class=\"line\">import java.util.stream.Collectors;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * https://www.baeldung.com/spring-scheduled-enabled-conditionally</span><br><span class=\"line\"> */</span><br><span class=\"line\">@Profile(<span class=\"string\">\"dev\"</span>)</span><br><span class=\"line\">@Slf4j</span><br><span class=\"line\">@Component</span><br><span class=\"line\">public class WeatherBatchJob &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    NewWeatherRegionCodeRepository newWeatherRegionCodeRepository;</span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    NewWeatherStatusDayRepository newWeatherStatusDayRepository;</span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    NewWeatherStatusLogRepository newWeatherStatusLogRepository;</span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    NewWeatherStatusYDayRepository newWeatherStatusYDayRepository;</span><br><span class=\"line\"></span><br><span class=\"line\">    private Integer Minute = 60*1000;</span><br><span class=\"line\">    private Integer Day = 24*3600*1000;</span><br><span class=\"line\"></span><br><span class=\"line\">//    @Scheduled(cron = <span class=\"string\">\"* * * * * *\"</span>) //https://javafactory.tistory.com/1386</span><br><span class=\"line\">    @Scheduled(cron = <span class=\"string\">\"0 0 * * * *\"</span>) //https://javafactory.tistory.com/1386</span><br><span class=\"line\">    public void temp() throws Exception &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 1. 정의된 지역정보 모두 받아오기.</span><br><span class=\"line\">        List&lt;NewWeatherRegionCode&gt; newWeatherRegionCodeList = newWeatherRegionCodeRepository.findAll();</span><br><span class=\"line\">        //TODO 2. 지역정보 3700개 중에서 구단위만 Sorting 하여 따로 저장.</span><br><span class=\"line\">        List&lt;NewWeatherRegionCode&gt; newWeatherRegionCodeList_gu = newWeatherRegionCodeList.stream()</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; StringUtils.isEmpty(newWeatherRegionCode.getDong()))</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; !StringUtils.isEmpty(newWeatherRegionCode.getCity()))</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; newWeatherRegionCode.getRegionCode()&gt;=20000) //구 Kweather 지역은 제외(총 250개)</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 3. 어느 Region에 설치하든 한국시간을 따라가게 만들려고..(RDS는 이상하게 시스템 시간이 GMT+00:00을 기본값으로 갖고있음.)</span><br><span class=\"line\">        ZonedDateTime nowSeoul = ZonedDateTime.now(ZoneId.of(<span class=\"string\">\"Asia/Seoul\"</span>));</span><br><span class=\"line\">        String ymd = nowSeoul.format(DateTimeFormatter.ofPattern(<span class=\"string\">\"yyyyMMdd\"</span>));</span><br><span class=\"line\">        String h0 = nowSeoul.plusHours(-1).format(DateTimeFormatter.ofPattern(<span class=\"string\">\"HH00\"</span>));</span><br><span class=\"line\">        String h1 = nowSeoul.format(DateTimeFormatter.ofPattern(<span class=\"string\">\"HH00\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        //현재날짜 선언</span><br><span class=\"line\">        Date currDate = new Date();</span><br><span class=\"line\"></span><br><span class=\"line\">        //1.</span><br><span class=\"line\">        long beforeTime = System.currentTimeMillis(); //코드 실행 전에 시간 받아오기</span><br><span class=\"line\">        // TODO 4.구단위 리스트에서 nx, ny만 뽑아서 모두 조회-&gt; 현재는 중복되도 다시 call할 가능성 매우높음.. distict 쿼리문처럼 할지 말지 고민중.</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(NewWeatherRegionCode region : newWeatherRegionCodeList_gu)&#123;</span><br><span class=\"line\">            //String url = <span class=\"string\">\"http://apis.data.go.kr/1360000/VilageFcstInfoService/getUltraSrtFcst?serviceKey=[SERVICE_KEY]&amp;numOfRows=100&amp;pageNo=1&amp;dataType=JSON&amp;base_date=\"</span>+ymd+<span class=\"string\">\"&amp;base_time=\"</span>+h0+<span class=\"string\">\"&amp;nx=\"</span>+region.getNx()+<span class=\"string\">\"&amp;ny=\"</span>+region.getNy();</span><br><span class=\"line\">            StringBuilder urlBuilder = new StringBuilder(<span class=\"string\">\"http://apis.data.go.kr/1360000/VilageFcstInfoService/getUltraSrtFcst\"</span>); /*URL*/</span><br><span class=\"line\">//            urlBuilder.append(<span class=\"string\">\"?\"</span> + URLEncoder.encode(<span class=\"string\">\"ServiceKey\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"[SERVICE_KEY]\"</span>); /*Service Key*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"?\"</span> + URLEncoder.encode(<span class=\"string\">\"ServiceKey\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(<span class=\"string\">\"2YbxZ9cWcxmBPAm5iYgJh4QN59XpzIJximMFQ3qpXfxd9D8SsCLGrzZbG7x5YmXdSaIi0BsVJ+JreWVak7ZYDw==\"</span>, <span class=\"string\">\"UTF-8\"</span>)); /*서비스 인증*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"base_date\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(ymd, <span class=\"string\">\"UTF-8\"</span>)); /*‘15년 12월 1일 발표*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"base_time\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(h0, <span class=\"string\">\"UTF-8\"</span>)); /*06시 발표(정시단위) -매시각 40분 이후 호출*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"nx\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(region.getNx().toString(), <span class=\"string\">\"UTF-8\"</span>)); /*예보지점의 X 좌표값*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"ny\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(region.getNy().toString(), <span class=\"string\">\"UTF-8\"</span>)); /*예보지점의 Y 좌표값*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"numOfRows\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(<span class=\"string\">\"1000\"</span>, <span class=\"string\">\"UTF-8\"</span>)); /*한 페이지 결과 수*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"pageNo\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(<span class=\"string\">\"1\"</span>, <span class=\"string\">\"UTF-8\"</span>)); /*페이지 번호*/</span><br><span class=\"line\">            urlBuilder.append(<span class=\"string\">\"&amp;\"</span> + URLEncoder.encode(<span class=\"string\">\"dataType\"</span>,<span class=\"string\">\"UTF-8\"</span>) + <span class=\"string\">\"=\"</span> + URLEncoder.encode(<span class=\"string\">\"JSON\"</span>, <span class=\"string\">\"UTF-8\"</span>)); /*xml(기본값), json*/</span><br><span class=\"line\">            String url = urlBuilder.toString();</span><br><span class=\"line\"></span><br><span class=\"line\">            //---------------</span><br><span class=\"line\">            //1. <span class=\"keyword\">for</span>문 내 실행시간측정</span><br><span class=\"line\">            long beforeForTime = System.currentTimeMillis(); //코드 실행 전에 시간 받아오기</span><br><span class=\"line\"></span><br><span class=\"line\">            //TODO 5. 데이터를 url통해 기상청에서 받아온 뒤, 파싱하여 Data저장.(Throw 썻는데 이게 맞나..?)</span><br><span class=\"line\">            insertData(newWeatherStatusDayRepository, newWeatherStatusLogRepository, region, url, currDate, h1);</span><br><span class=\"line\"></span><br><span class=\"line\">            long afterForTime = System.currentTimeMillis(); // 코드 실행 후에 시간 받아오기</span><br><span class=\"line\">            long secDiffTime = (afterForTime - beforeForTime); //두 시간에 차 계산</span><br><span class=\"line\">            System.out.println(region.getRegionCode()+<span class=\"string\">\"/\"</span>+region.getState()+<span class=\"string\">\"/\"</span>+region.getCity()+<span class=\"string\">\"For문 내 시간차이(millisec) : \"</span>+secDiffTime);</span><br><span class=\"line\">            //---------------</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        long afterTime = System.currentTimeMillis(); // 코드 실행 후에 시간 받아오기</span><br><span class=\"line\">        long secDiffTime = (afterTime - beforeTime); //두 시간에 차 계산</span><br><span class=\"line\"></span><br><span class=\"line\">        log.info(<span class=\"string\">\"총 RunningTime(millisec) : \"</span>+ secDiffTime);</span><br><span class=\"line\">        log.info(newWeatherRegionCodeList_gu.toString());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void insertData(NewWeatherStatusDayRepository newWeatherStatusDayRepository,</span><br><span class=\"line\">                            NewWeatherStatusLogRepository newWeatherStatusLogRepository,</span><br><span class=\"line\">                            NewWeatherRegionCode region,</span><br><span class=\"line\">                            String url,</span><br><span class=\"line\">                            Date currDate,</span><br><span class=\"line\">                            String currHour) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        try&#123;</span><br><span class=\"line\">            // TODO 5. HTTP Get(1.1)</span><br><span class=\"line\">            ResponseEntity&lt;JsonNode&gt; returnValue = HttpHelper.sendGetRetry(url);</span><br><span class=\"line\">            JsonNode resultCode = returnValue.getBody().path(<span class=\"string\">\"response\"</span>).get(<span class=\"string\">\"header\"</span>).get(<span class=\"string\">\"resultCode\"</span>);</span><br><span class=\"line\">            // TODO 5.1 받아온 값의 코드를 보고 에러상황 or 정상상황 확인..</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(resultCode.asText().equals(<span class=\"string\">\"00\"</span>))&#123;</span><br><span class=\"line\">                JsonNode weather = returnValue.getBody().path(<span class=\"string\">\"response\"</span>).get(<span class=\"string\">\"body\"</span>).get(<span class=\"string\">\"items\"</span>).get(<span class=\"string\">\"item\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                //각 Attribute 선언</span><br><span class=\"line\">                String LGT = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String PTY = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String RN1 = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String SKY = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String T1H = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String REH = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String UUU = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String VVV = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String VEC = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                String WSD = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">                // TODO 6. item만 뽑아내서 변수값 넣어줌.</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(JsonNode weatherJson : weather)&#123;</span><br><span class=\"line\">                    //낙뢰</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"LGT\"</span>))&#123;</span><br><span class=\"line\">                        LGT = (weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //강수형태</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"PTY\"</span>))&#123;</span><br><span class=\"line\">                        PTY=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //1시간 강수량</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"RN1\"</span>))&#123;</span><br><span class=\"line\">                        RN1=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //하늘상태</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"SKY\"</span>))&#123;</span><br><span class=\"line\">                        SKY=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //기온</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"T1H\"</span>))&#123;</span><br><span class=\"line\">                        T1H=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //습도</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"REH\"</span>))&#123;</span><br><span class=\"line\">                        REH=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //동서바람성분</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"UUU\"</span>))&#123;</span><br><span class=\"line\">                        UUU=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //남북바람성분</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"VVV\"</span>))&#123;</span><br><span class=\"line\">                        VVV=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //풍향</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"VEC\"</span>))&#123;</span><br><span class=\"line\">                        VEC=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    //풍속</span><br><span class=\"line\">                    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(weatherJson.get(<span class=\"string\">\"fcstTime\"</span>).asText().equals(currHour) &amp;&amp; weatherJson.get(<span class=\"string\">\"category\"</span>).asText().equals(<span class=\"string\">\"WSD\"</span>))&#123;</span><br><span class=\"line\">                        WSD=(weatherJson.get(<span class=\"string\">\"fcstValue\"</span>).asText());</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                //TODO 7.1 WeatherStatusDay 테이블 채워줄 값</span><br><span class=\"line\">                NewWeatherStatusDay newWeatherStatusDay = new NewWeatherStatusDay();</span><br><span class=\"line\">                newWeatherStatusDay.setRegionCode(region.getRegionCode());</span><br><span class=\"line\">                newWeatherStatusDay.setState(region.getState());</span><br><span class=\"line\">                newWeatherStatusDay.setCity(region.getCity());</span><br><span class=\"line\">                newWeatherStatusDay.setDong(region.getDong());</span><br><span class=\"line\">                newWeatherStatusDay.setT1H(T1H);</span><br><span class=\"line\">                newWeatherStatusDay.setRN1(RN1);</span><br><span class=\"line\">                newWeatherStatusDay.setSKY(SKY);</span><br><span class=\"line\">                newWeatherStatusDay.setUUU(UUU);</span><br><span class=\"line\">                newWeatherStatusDay.setVVV(VVV);</span><br><span class=\"line\">                newWeatherStatusDay.setREH(REH);</span><br><span class=\"line\">                newWeatherStatusDay.setPTY(PTY);</span><br><span class=\"line\">                newWeatherStatusDay.setLGT(LGT);</span><br><span class=\"line\">                newWeatherStatusDay.setVEC(VEC);</span><br><span class=\"line\">                newWeatherStatusDay.setWSD(WSD);</span><br><span class=\"line\">                newWeatherStatusDay.setUpdateTime(currDate);</span><br><span class=\"line\"></span><br><span class=\"line\">                //TODO 7.2 WeatherStatusLog 테이블 채워줄 값</span><br><span class=\"line\">                NewWeatherStatusLog newWeatherStatusLog = new NewWeatherStatusLog();</span><br><span class=\"line\">                newWeatherStatusLog.setRegionCode(region.getRegionCode());</span><br><span class=\"line\">                newWeatherStatusLog.setState(region.getState());</span><br><span class=\"line\">                newWeatherStatusLog.setCity(region.getCity());</span><br><span class=\"line\">                newWeatherStatusLog.setDong(region.getDong());</span><br><span class=\"line\">                newWeatherStatusLog.setT1H(T1H);</span><br><span class=\"line\">                newWeatherStatusLog.setRN1(RN1);</span><br><span class=\"line\">                newWeatherStatusLog.setSKY(SKY);</span><br><span class=\"line\">                newWeatherStatusLog.setUUU(UUU);</span><br><span class=\"line\">                newWeatherStatusLog.setVVV(VVV);</span><br><span class=\"line\">                newWeatherStatusLog.setREH(REH);</span><br><span class=\"line\">                newWeatherStatusLog.setPTY(PTY);</span><br><span class=\"line\">                newWeatherStatusLog.setLGT(LGT);</span><br><span class=\"line\">                newWeatherStatusLog.setVEC(VEC);</span><br><span class=\"line\">                newWeatherStatusLog.setWSD(WSD);</span><br><span class=\"line\">                newWeatherStatusLog.setRegTime(currDate);</span><br><span class=\"line\"></span><br><span class=\"line\">                //TODO 7.3 전송!</span><br><span class=\"line\">                newWeatherStatusDayRepository.save(newWeatherStatusDay);</span><br><span class=\"line\">                newWeatherStatusLogRepository.save(newWeatherStatusLog);</span><br><span class=\"line\"></span><br><span class=\"line\">                //TODO 8. Thread Sleep;</span><br><span class=\"line\">                Thread.sleep(10);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">                System.out.println(<span class=\"string\">\"Error : \"</span>+resultCode.asText());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; catch (Exception e)&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"StackTrace : \"</span>+e.getMessage());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//    @Scheduled(cron = <span class=\"string\">\"* * * * * *\"</span>) //https://javafactory.tistory.com/1386 //디버깅용...바로시작</span><br><span class=\"line\">    @Scheduled(cron = <span class=\"string\">\"0 5 20 * * *\"</span>) //https://javafactory.tistory.com/1386 //매일 오후 8시 5분 0초에 시작함.</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">yDayBatch</span></span>()&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 1. 정의된 지역정보 모두 받아오기.</span><br><span class=\"line\">        List&lt;NewWeatherRegionCode&gt; newWeatherRegionCodeList = newWeatherRegionCodeRepository.findAll();</span><br><span class=\"line\">        //TODO 2. 지역정보 3700개 중에서 구단위만 Sorting 하여 따로 저장.</span><br><span class=\"line\">        List&lt;NewWeatherRegionCode&gt; newWeatherRegionCodeList_gu = newWeatherRegionCodeList.stream()</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; StringUtils.isEmpty(newWeatherRegionCode.getDong()))</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; !StringUtils.isEmpty(newWeatherRegionCode.getCity()))</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; newWeatherRegionCode.getRegionCode()&gt;=20000) //구 Kweather 지역은 제외(총 250개)</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 3. 어느 Region에 설치하든 한국시간을 따라가게 만들려고..(RDS는 이상하게 시스템 시간이 GMT+00:00을 기본값으로 갖고있음.)</span><br><span class=\"line\">        ZonedDateTime nowSeoul = ZonedDateTime.now(ZoneId.of(<span class=\"string\">\"Asia/Seoul\"</span>));</span><br><span class=\"line\">        Date currDate = new Date();</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 9. WeatherStatusYDay 테이블 채우기(먼저 이전 시간대 데이터 갖고오기)</span><br><span class=\"line\">        //TODO 9.1 조회하려는 Region의 리스트 받아오기.</span><br><span class=\"line\">        List&lt;Integer&gt; regionList = new ArrayList&lt;&gt;();</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(NewWeatherRegionCode region : newWeatherRegionCodeList_gu)&#123;</span><br><span class=\"line\">            regionList.add(region.getRegionCode());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        //초기화</span><br><span class=\"line\">        newWeatherStatusYDayRepository.deleteAll();</span><br><span class=\"line\">        long currentDateTime = System.currentTimeMillis();</span><br><span class=\"line\">        long before30MinuteDateTime = currentDateTime - Day - 30*Minute; //TODO 여기에 Day추가해야함.-&gt;완료.</span><br><span class=\"line\">        long before90MinuteDateTime = currentDateTime - Day - 90*Minute; //(현시간) - (하루) - (30분 or 90분)</span><br><span class=\"line\"></span><br><span class=\"line\">        //로그테이블에서 1일전 데이터 찾기</span><br><span class=\"line\">        List&lt;NewWeatherStatusLog&gt; newWeatherStatusLogList = newWeatherStatusLogRepository.findAll();</span><br><span class=\"line\">        List&lt;NewWeatherStatusLog&gt; oldDataList = newWeatherStatusLogList.stream()</span><br><span class=\"line\">//                .filter(newWeatherStatusLog -&gt; newWeatherStatusLog.getRegionCode().equals(<span class=\"built_in\">integer</span>))</span><br><span class=\"line\">                //러프하게 30~90분 이전의 데이터를 검색함.(만약, 없으면 어떻게하지? 이전리스트 전부받아서 가장 최근걸로 해야되나?)</span><br><span class=\"line\">                .filter(newWeatherStatusLog -&gt; newWeatherStatusLog.getRegTime().getTime() &lt;= before30MinuteDateTime &amp;&amp; newWeatherStatusLog.getRegTime().getTime() &gt; before90MinuteDateTime)</span><br><span class=\"line\">                .sorted((o1, o2) -&gt; o2.getRegTime().compareTo(o1.getRegTime())) //order by desc(내림차순)</span><br><span class=\"line\">//                .<span class=\"built_in\">limit</span>(1) //Top N</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">        //최신테이블에서 현재 데이터 찾기</span><br><span class=\"line\">        List&lt;NewWeatherStatusDay&gt; newWeatherStatusDayList = newWeatherStatusDayRepository.findAll();</span><br><span class=\"line\">        List&lt;NewWeatherStatusDay&gt; newDataList = newWeatherStatusDayList.stream()</span><br><span class=\"line\">//                .filter(NewWeatherStatusDay -&gt; NewWeatherStatusDay.getRegionCode().equals(<span class=\"built_in\">integer</span>))</span><br><span class=\"line\">//                .<span class=\"built_in\">limit</span>(1) //Top N</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\">        //TODO 9.2 Region으로 WeatherStatusLog 테이블에서 데이터 추출(가장최근 30분~90분사이에 있는 데이터 중 가장 최근 것 1개만)</span><br><span class=\"line\">        <span class=\"keyword\">for</span>(Integer <span class=\"built_in\">integer</span> : regionList)&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            //TODO 9.3 newWeatherStatusLogList1에서 받은 데이터 중 온도(T1H)와 현재 가진데이터 비교</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(oldDataList.size() &gt; 0 &amp;&amp; newDataList.size() &gt; 0)&#123;</span><br><span class=\"line\">                // oldDataList에서 지역코드로 값 검색</span><br><span class=\"line\">                List&lt;NewWeatherStatusLog&gt; oldList = new ArrayList&lt;&gt;();</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(int i = 0; i &lt; oldDataList.size(); i++)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(oldDataList.get(i).getRegionCode().equals(<span class=\"built_in\">integer</span>))&#123;</span><br><span class=\"line\">                        oldList.add(oldDataList.get(i));</span><br><span class=\"line\">                        <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                // newDataList에서 지역코드로 값 검색</span><br><span class=\"line\">                List&lt;NewWeatherStatusDay&gt; newList = new ArrayList&lt;&gt;();</span><br><span class=\"line\">                <span class=\"keyword\">for</span>(int i = 0; i &lt; newDataList.size(); i++)&#123;</span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(newDataList.get(i).getRegionCode().equals(<span class=\"built_in\">integer</span>))&#123;</span><br><span class=\"line\">                        newList.add(newDataList.get(i));</span><br><span class=\"line\">                        <span class=\"built_in\">break</span>;</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                String bf_T1H = oldList.get(0).getT1H(); //과거데이터</span><br><span class=\"line\">                String nw_T1H = newList.get(0).getT1H(); //최근데이터</span><br><span class=\"line\">                int differnce = (Integer.parseInt(bf_T1H) - Integer.parseInt(nw_T1H)); // +4 이상이면 푸시발송해야함.(푸시는 아직 구현안됨)</span><br><span class=\"line\"></span><br><span class=\"line\">                NewWeatherStatusYDay newWeatherStatusYDay = new NewWeatherStatusYDay();</span><br><span class=\"line\">                newWeatherStatusYDay.setRegionCode(<span class=\"built_in\">integer</span>);</span><br><span class=\"line\">                newWeatherStatusYDay.setState(oldList.get(0).getState());</span><br><span class=\"line\">                newWeatherStatusYDay.setCity(oldList.get(0).getCity());</span><br><span class=\"line\">                newWeatherStatusYDay.setDong(oldList.get(0).getDong());</span><br><span class=\"line\">                newWeatherStatusYDay.setTodayTemp(nw_T1H);</span><br><span class=\"line\">                newWeatherStatusYDay.setYesterdayTemp(bf_T1H);</span><br><span class=\"line\">                newWeatherStatusYDay.setDifference(Integer.toString(differnce));</span><br><span class=\"line\">                newWeatherStatusYDay.setUpdateTime(currDate);</span><br><span class=\"line\"></span><br><span class=\"line\">                //TODO 9.4 WeatherStatusYDay 전송</span><br><span class=\"line\">                newWeatherStatusYDayRepository.save(newWeatherStatusYDay);</span><br><span class=\"line\"></span><br><span class=\"line\">                //TODO 9.5 푸시발송--&gt; 현재는 구현하려면 핑거푸시를 뚫어야한다.(최신대 차장님꺼 쓸거 아니라면..)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Scheduled(cron = <span class=\"string\">\"* 30 2 * * *\"</span>) //https://javafactory.tistory.com/1386 //매일 새벽 2시 30분 90일이상 된 자료 지움.</span><br><span class=\"line\">    public void <span class=\"function\"><span class=\"title\">deleteThreeMonthExpireData</span></span>()&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        //3달전의 연월일시분초 -&gt; Millisecond(Unix time)</span><br><span class=\"line\">        Calendar calendar = Calendar.getInstance(new SimpleTimeZone(0x1ee6280, <span class=\"string\">\"KST\"</span>));</span><br><span class=\"line\">//        calendar.set(Calendar.HOUR_OF_DAY, 13);</span><br><span class=\"line\">//        calendar.set(Calendar.MINUTE, 10);</span><br><span class=\"line\">//        calendar.set(Calendar.SECOND, 0);</span><br><span class=\"line\">        calendar.add(Calendar.DATE, -90);</span><br><span class=\"line\">        long calenderMillis = calendar.getTimeInMillis();</span><br><span class=\"line\"></span><br><span class=\"line\">        //TODO 1. 삭제대상 조회</span><br><span class=\"line\">        List&lt;NewWeatherStatusLog&gt; newWeatherStatusLogList = newWeatherStatusLogRepository.findAll().stream()</span><br><span class=\"line\">                .filter(newWeatherStatusLog -&gt; newWeatherStatusLog.getRegTime().getTime() &lt;= calenderMillis)</span><br><span class=\"line\">                .filter(newWeatherRegionCode -&gt; newWeatherRegionCode.getRegionCode()&lt;=20000) //구 Kweather 지역은 제외(총 250개)</span><br><span class=\"line\">                .collect(Collectors.toList());</span><br><span class=\"line\"></span><br><span class=\"line\">        newWeatherStatusLogRepository.deleteAll(newWeatherStatusLogList);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n\n<h3 id=\"Java-Spring-Boot-API용\"><a href=\"#Java-Spring-Boot-API용\" class=\"headerlink\" title=\"Java(Spring Boot) API용\"></a>Java(Spring Boot) API용</h3><div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Autowired</span><br><span class=\"line\">    private NewWeatherRegionCodeService newWeatherRegionCodeService;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    private NewWeatherStatusDayService newWeatherStatusDayService;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    private NewWeatherStatusLogService newWeatherStatusLogService;</span><br><span class=\"line\"></span><br><span class=\"line\">    @Autowired</span><br><span class=\"line\">    private NewWeatherVersionService newWeatherVersionService;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 지역 정보 조회</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Response <span class=\"function\"><span class=\"title\">requestRegionCode</span></span>() &#123;</span><br><span class=\"line\">        List&lt;NewWeatherRegionCode&gt; newWeatherRegionCodeList = newWeatherRegionCodeService.findAllWeatherRegionCode();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newWeatherRegionCodeList.size() == 0) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> ErrorCode.getErrorResponse(ErrorCode.COMMON_NO_DATA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Response response = SuccessCode.getSuccessResponse();</span><br><span class=\"line\">        ResRegionCode resRegionCode = new ResRegionCode();</span><br><span class=\"line\">        NewWeatherVersionEntity newWeatherVersionEntity = newWeatherVersionService.findNewWeatherVersion();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newWeatherVersionEntity != null) &#123;</span><br><span class=\"line\">            resRegionCode.setVersion(newWeatherVersionEntity.getServiceVersion());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">        // state 별 그룹핑</span><br><span class=\"line\">        Map&lt;String, List&lt;NewWeatherRegionCity&gt;&gt; map = newWeatherRegionCodeList</span><br><span class=\"line\">                .stream()</span><br><span class=\"line\">                .collect(Collectors.groupingBy(</span><br><span class=\"line\">                        newWeatherRegionCode -&gt; newWeatherRegionCode.getState(),</span><br><span class=\"line\">                        LinkedHashMap::new,</span><br><span class=\"line\">                        Collectors.mapping(newWeatherRegionCode -&gt; &#123;</span><br><span class=\"line\">                                    NewWeatherRegionCity regionCity = new NewWeatherRegionCity();</span><br><span class=\"line\">                                    regionCity.setCity(newWeatherRegionCode.getCity());</span><br><span class=\"line\">                                    regionCity.setRegionCode(newWeatherRegionCode.getRegionCode());</span><br><span class=\"line\">                                    regionCity.setNx(newWeatherRegionCode.getNx());</span><br><span class=\"line\">                                    regionCity.setNy(newWeatherRegionCode.getNy());</span><br><span class=\"line\">                                    <span class=\"built_in\">return</span> regionCity;</span><br><span class=\"line\">                                &#125;,</span><br><span class=\"line\">                                Collectors.toList())));</span><br><span class=\"line\"></span><br><span class=\"line\">        List&lt;NewWeatherRegionState&gt; newWeatherRegionStateList = new ArrayList&lt;&gt;();</span><br><span class=\"line\">        NewWeatherRegionState newWeatherRegionState;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (String key : map.keySet()) &#123;</span><br><span class=\"line\">            newWeatherRegionState = new NewWeatherRegionState();</span><br><span class=\"line\">            newWeatherRegionState.setState(key);</span><br><span class=\"line\">            newWeatherRegionState.setCities(map.get(key));</span><br><span class=\"line\">            newWeatherRegionStateList.add(newWeatherRegionState);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        resRegionCode.setRegionCodeList(newWeatherRegionStateList);</span><br><span class=\"line\">        response.setData(resRegionCode);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> response;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 코드로 기상 정보 조회</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param regionCode</span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Response requestInfoByCode(Integer regionCode) &#123;</span><br><span class=\"line\">        NewWeatherStatusDay newWeatherStatusDay = newWeatherStatusDayService.findWeatherStatusDayById(regionCode);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newWeatherStatusDay == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> ErrorCode.getErrorResponse(ErrorCode.COMMON_NO_DATA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Response response = SuccessCode.getSuccessResponse();</span><br><span class=\"line\">        ResWeatherInfo resWeatherInfo = new ResWeatherInfo();</span><br><span class=\"line\">        resWeatherInfo.setWeatherInfo(newWeatherStatusDay);</span><br><span class=\"line\">        response.setData(resWeatherInfo);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> response;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 지역 이름으로 기상 정보 조회</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param state</span><br><span class=\"line\">     * @param city</span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Response requestInfoByStateAndCity(String state, String city) &#123;</span><br><span class=\"line\">        // 충북, 충남, 전북, 전남, 경북, 경남 예외처리</span><br><span class=\"line\">        String fState = BusinessLogicUtils.shortNameOfStateToFullName(state);</span><br><span class=\"line\">        NewWeatherStatusDay newWeatherStatusDay = newWeatherStatusDayService.findWeatherStatusDayByStateAndCity(</span><br><span class=\"line\">                fState, city);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newWeatherStatusDay == null) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> ErrorCode.getErrorResponse(ErrorCode.COMMON_NO_DATA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Response response = SuccessCode.getSuccessResponse();</span><br><span class=\"line\">        ResWeatherInfo resWeatherInfo = new ResWeatherInfo();</span><br><span class=\"line\">        resWeatherInfo.setWeatherInfo(newWeatherStatusDay);</span><br><span class=\"line\">        response.setData(resWeatherInfo);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> response;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * 기상 정보 이력 조회</span><br><span class=\"line\">     *</span><br><span class=\"line\">     * @param reqWeatherHistory</span><br><span class=\"line\">     * @<span class=\"built_in\">return</span></span><br><span class=\"line\">     */</span><br><span class=\"line\">    public Response <span class=\"built_in\">history</span>(ReqWeatherHistory reqWeatherHistory) &#123;</span><br><span class=\"line\">        List&lt;NewWeatherStatusLog&gt; newWeatherStatusLogList = newWeatherStatusLogService.findAllWeatherStatus(</span><br><span class=\"line\">                reqWeatherHistory.getRegionCode(), reqWeatherHistory.getStartMillis(), reqWeatherHistory.getEndMillis());</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (newWeatherStatusLogList.size() == 0) &#123;</span><br><span class=\"line\">            <span class=\"built_in\">return</span> ErrorCode.getErrorResponse(ErrorCode.COMMON_NO_DATA);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Response response = SuccessCode.getSuccessResponse();</span><br><span class=\"line\">        response.setData(newWeatherStatusLogList);</span><br><span class=\"line\">        <span class=\"built_in\">return</span> response;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure></div>\n\n\n<h3 id=\"기상청-Database-DDL\"><a href=\"#기상청-Database-DDL\" class=\"headerlink\" title=\"기상청 Database DDL\"></a>기상청 Database DDL</h3><ol>\n<li><p>Create Database</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/*-------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class=\"line\">Create Database</span><br><span class=\"line\">-------------------------------------------------------------------------------------------------------------------------------------------------------*/</span><br><span class=\"line\">-- CREATE SCHEMA `WEATHER` DEFAULT CHARACTER SET utf8mb4 ;</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>Create Table</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/*-------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class=\"line\">Set Using Schema</span><br><span class=\"line\">-------------------------------------------------------------------------------------------------------------------------------------------------------*/</span><br><span class=\"line\">USE WEATHER;</span><br><span class=\"line\"> </span><br><span class=\"line\">/*-------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class=\"line\">Drop Table</span><br><span class=\"line\">-------------------------------------------------------------------------------------------------------------------------------------------------------*/</span><br><span class=\"line\">DROP TABLE IF EXISTS `KMA_WEATHER_STATUS_DAY`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `KMA_WEATHER_STATUS_YDAY`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `KMA_WEATHER_STATUS_LOG`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `WEATHER_VERSION`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `KMA_WEATHER_REGION_CD`;</span><br><span class=\"line\"> </span><br><span class=\"line\">DROP TABLE IF EXISTS `APP_UPDATE`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `APP_DOCUMENTS`;</span><br><span class=\"line\">DROP TABLE IF EXISTS `SERVER_MAINTENANCE`;</span><br><span class=\"line\"> </span><br><span class=\"line\">/*-------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class=\"line\">Create Table</span><br><span class=\"line\">-------------------------------------------------------------------------------------------------------------------------------------------------------*/</span><br><span class=\"line\">CREATE TABLE `KMA_WEATHER_REGION_CD` (</span><br><span class=\"line\">    `REGION_CODE`   int(11) NOT NULL,</span><br><span class=\"line\">    `STATE` varchar(20) NOT NULL,</span><br><span class=\"line\">    `CITY`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `DONG`  varchar(20) NULL,</span><br><span class=\"line\">    `NX`    smallint(4) NOT NULL,</span><br><span class=\"line\">    `NY`    smallint(4) NOT NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `KMA_WEATHER_STATUS_DAY` (</span><br><span class=\"line\">    `REGION_CODE`   int(11) NOT NULL,</span><br><span class=\"line\">    `STATE` varchar(20) NOT NULL,</span><br><span class=\"line\">    `CITY`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `DONG`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `T1H`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `RN1`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `SKY`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `UUU`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `VVV`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `REH`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `PTY`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `LGT`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `VEC`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `WSD`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `KMA_WEATHER_STATUS_YDAY` (</span><br><span class=\"line\">    `REGION_CODE`   int(11) NOT NULL,</span><br><span class=\"line\">    `STATE` varchar(20) NOT NULL,</span><br><span class=\"line\">    `CITY`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `DONG`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `TODAY_TEMP`    decimal(3,1)    NULL,</span><br><span class=\"line\">    `YESTERDAY_TEMP`    decimal(3,1)    NULL,</span><br><span class=\"line\">    `TEMP_DIFF` decimal(3,1)    NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `WEATHER_VERSION` (</span><br><span class=\"line\">    `SERVICE_SEQ`   int(11) NOT NULL auto_increment COMMENT <span class=\"string\">'Auto Increment'</span>,</span><br><span class=\"line\">    `SERVICE_NAME`  varchar(100)    NULL,</span><br><span class=\"line\">    `SERVICE_VERSION`   varchar(100)    NULL,</span><br><span class=\"line\">    `DESCRIPTION`   varchar(100)    NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3),</span><br><span class=\"line\">     CONSTRAINT `PK_WEATHER_VERSION` PRIMARY KEY (`SERVICE_SEQ`)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `KMA_WEATHER_STATUS_LOG` (</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `REGION_CODE`   int(11) NOT NULL,</span><br><span class=\"line\">    `STATE` varchar(20) NOT NULL,</span><br><span class=\"line\">    `CITY`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `DONG`  varchar(20) NOT NULL,</span><br><span class=\"line\">    `T1H`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `RN1`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `SKY`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `UUU`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `VVV`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `REH`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `PTY`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `LGT`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `VEC`   varchar(10) NOT NULL,</span><br><span class=\"line\">    `WSD`   varchar(10) NOT NULL</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `APP_UPDATE` (</span><br><span class=\"line\">    `APP_TARGET`    varchar(100)    NOT NULL,</span><br><span class=\"line\">    `APP_OS_TYPE`   tinyint(1)  NOT NULL,</span><br><span class=\"line\">    `APP_VERSION`   varchar(100)    NOT NULL,</span><br><span class=\"line\">    `FORCE_UPDATE`  tinyint(1)  NOT NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `APP_DOCUMENTS` (</span><br><span class=\"line\">    `SERVICE_CODE`  int(11) NOT NULL,</span><br><span class=\"line\">    `DOC_TYPE`  varchar(1)  NOT NULL    COMMENT <span class=\"string\">'문서 구분(P:개인정보취급방침, T:이용약관)'</span>,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `DOC_TITLE` varchar(100)    NOT NULL,</span><br><span class=\"line\">    `DOC_CONTENTS`  text    NOT NULL    COMMENT <span class=\"string\">'앱에 표시'</span>,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br><span class=\"line\"> </span><br><span class=\"line\">CREATE TABLE `SERVER_MAINTENANCE` (</span><br><span class=\"line\">    `SM_SEQ`    int(11) NOT NULL  auto_increment    COMMENT <span class=\"string\">'Auto Increment'</span>,</span><br><span class=\"line\">    `SM_YN` tinyint(1)  NOT NULL,</span><br><span class=\"line\">    `SM_TITLE`  varchar(100)    NULL,</span><br><span class=\"line\">    `SM_MSG`    varchar(100)    NULL,</span><br><span class=\"line\">    `SM_PERIOD` varchar(100)    NULL,</span><br><span class=\"line\">    `REGISTER_AT`   timestamp(3)    NOT NULL,</span><br><span class=\"line\">    `LAST_MODIFY_AT`    timestamp(3)    NOT NULL    DEFAULT CURRENT_TIMESTAMP(3),</span><br><span class=\"line\">    CONSTRAINT `PK_SERVER_MAINTENANCE` PRIMARY KEY (`SM_SEQ`)</span><br><span class=\"line\">) default charset=utf8mb4 collate=utf8mb4_general_ci;</span><br></pre></td></tr></table></figure></div></li>\n</ol>\n","text":"2016년 C#에 이어 Python으로 개발을 진행했었다.<br>특별한 시나리오는 없다.AWS Cloudwatch의 CRON 설정을 통해 매 시간 전국의 날씨 상황정보를 받아옴.DataBase에 저장API를 통하여 날씨 정보를 제공(추후) TAC 청정","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":4,"path":"api/categories/tip.json"}],"tags":[{"name":"기상청","slug":"기상청","count":1,"path":"api/tags/기상청.json"},{"name":"Weather","slug":"Weather","count":1,"path":"api/tags/Weather.json"},{"name":"API","slug":"API","count":1,"path":"api/tags/API.json"}]},{"title":"Google 어시스턴트를 활용한 스피커 연동","slug":"GoogleAssistant","date":"2020-08-15T00:46:47.000Z","updated":"2020-11-23T01:31:25.288Z","comments":true,"pin":null,"path":"api/articles/GoogleAssistant.json","excerpt":"","keywords":null,"cover":"https://user-images.githubusercontent.com/62123161/90300780-2ba83400-ded7-11ea-97f6-52507c3d8a75.jpg","content":"<p>구글 어시스턴트에 온수매트를 연동할 업무가 주어졌다.<br>구글 어시스턴트에 대해서 진행해보자.<br>google home url : <a href=\"https://developers.google.com/assistant/smarthome/overview\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/assistant/smarthome/overview</a><br>google assistant : <a href=\"https://console.actions.google.com/u/1/\" target=\"_blank\" rel=\"noopener\">https://console.actions.google.com/u/1/</a></p>\n<ol>\n<li>구글은 Fullfillment URL을 1개만 허용한다.<br>(즉, 1개의 Endpoint만을 사용하여 연동을 진행할 수 있다.)</li>\n</ol>\n<ul>\n<li>Fullfilment URL<br><a href=\"https://kraigsnm.naviensmartcontrol.com/google-nm\" target=\"_blank\" rel=\"noopener\">https://kraigsnm.naviensmartcontrol.com/google-nm</a></li>\n</ul>\n<ol start=\"2\">\n<li>Account Linking (계정 연동)</li>\n</ol>\n<ul>\n<li>Spring OAuth2.0 기반으로 제공(<a href=\"https://developers.google.com/assistant/identity/oauth2?oauth=code\" target=\"_blank\" rel=\"noopener\">https://developers.google.com/assistant/identity/oauth2?oauth=code</a>)</li>\n<li>client id, client secret, Authorization URL, Token URL로 구성.</li>\n<li>Authorization URL : <a href=\"https://kraigsnm.naviensmartcontrol.com/oauth/authorize\" target=\"_blank\" rel=\"noopener\">https://kraigsnm.naviensmartcontrol.com/oauth/authorize</a></li>\n<li>Token URL : <a href=\"https://kraigsnm.naviensmartcontrol.com/oauth/token\" target=\"_blank\" rel=\"noopener\">https://kraigsnm.naviensmartcontrol.com/oauth/token</a></li>\n</ul>\n<ol start=\"3\">\n<li>Smart home intents</li>\n</ol>\n<ul>\n<li>sync : 사용자 디바이스 리스트 + 타입 + 특성</li>\n<li>query : 사용자 디바이스 상태 조회</li>\n<li>execute : 사용자 디바이스 명령</li>\n<li>disconnect : assistant 로그아웃</li>\n</ul>\n<ol start=\"4\">\n<li>Report state</li>\n</ol>\n<ul>\n<li>구글 홈한테 최신 디바이스 상태를 제공하는 것</li>\n<li>처음 개발 당시에는 선택사항(Option)이었지만, 이후 필수사항으로 변경되었다.</li>\n</ul>\n<ol start=\"5\">\n<li>개발환경</li>\n</ol>\n<ul>\n<li>Spring Boot 2.1.3</li>\n<li>SDK : Amazon Corretto 11</li>\n<li>JAVA 1.8<ul>\n<li>netty(main서버 TCP통신을 위함)</li>\n</ul>\n</li>\n</ul>\n<ol start=\"6\">\n<li>테스트<h3 id=\"구글-홈-발화-테스트\"><a href=\"#구글-홈-발화-테스트\" class=\"headerlink\" title=\"구글 홈 발화 테스트\"></a>구글 홈 발화 테스트</h3>Q. 온수매트 켜줘 (thermostatMode : on)<br>A. 네, 국내 개발용 온수매트 전원을 켭니다.</li>\n</ol>\n<p>Q. 온수매트 꺼줘 (thermostatMode : off)<br>A. 네, 국내 개발용 온수매트 전원을 끕니다.</p>\n<p>Q. 온수매트 난방으로 해줘 (thermostatMode : heat)<br>A. 네, 국내 개발용 온수매트 모드를 난방 모드로 변경합니다.</p>\n<p>Q. 나비엔메이트 온도를 올려주세요. (나비엔 메이트 온도 올려주세요.)<br>A. 네, 나비엔메이트의 온도를 높입니다.</p>\n<p>Q. 나비엔메이트 온도를 낮춰주세요. (나비엔 메이트 온도 낮춰주세요.)<br>A. 네, 나비엔에이트의 온도를 낮춥니다.</p>\n<p>Q. 나비엔메이트 온도 5도 내려주세요.<br>A. 네, 나비엔메이트의 온도를 낮춥니다.</p>\n<p>Q. 나비엔메이트 온도를 30도로 설정하세요.<br>A. 네, 나비엔메이트의 온도를 30도로 설정합니다.</p>\n<ol start=\"7\">\n<li><p>Google에서 API 키를 받아서 사용</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"type\"</span>: <span class=\"string\">\"service_account\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"project_id\"</span>: <span class=\"string\">\"navienmate-fb96b\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"private_key_id\"</span>: <span class=\"string\">\"211021b7995718069dc173fc15645d5ff4bcfb92\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"private_key\"</span>: <span class=\"string\">\"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC1pJKVhDzG/OAo\\njWqS1fXgcvHnRTxKwRnm+RHc9tgP9h(이하생략)\\n-----END PRIVATE KEY-----\\n\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"client_email\"</span>: <span class=\"string\">\"navien-mate-test@navienmate-fb96b.iam.gserviceaccount.com\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"client_id\"</span>: <span class=\"string\">\"110045969321551856962\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"auth_uri\"</span>: <span class=\"string\">\"https://accounts.google.com/o/oauth2/auth\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"token_uri\"</span>: <span class=\"string\">\"https://oauth2.googleapis.com/token\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"auth_provider_x509_cert_url\"</span>: <span class=\"string\">\"https://www.googleapis.com/oauth2/v1/certs\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"client_x509_cert_url\"</span>: <span class=\"string\">\"https://www.googleapis.com/robot/v1/metadata/x509/navien-mate-test%40navienmate-fb96b.iam.gserviceaccount.com\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>실제연동화면 및 응답예제<br><a href=\"https://user-images.githubusercontent.com/62123161/90300780-2ba83400-ded7-11ea-97f6-52507c3d8a75.jpg\" target=\"_blank\" rel=\"noopener\"><img src=\"https://user-images.githubusercontent.com/62123161/90300780-2ba83400-ded7-11ea-97f6-52507c3d8a75.jpg\" alt=\"mattress_reply\"></a></p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><figcaption><span>구글의 응답</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"requestId\"</span>: <span class=\"string\">\"8028308867350609607\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"payload\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"agentUserId\"</span>: <span class=\"string\">\"minseok\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"devices\"</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"string\">\"id\"</span>: <span class=\"string\">\"84720720d74e1719\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"type\"</span>: <span class=\"string\">\"action.devices.types.MATTRESS\"</span>,</span><br><span class=\"line\">        <span class=\"string\">\"traits\"</span>: [</span><br><span class=\"line\">          <span class=\"string\">\"action.devices.traits.TemperatureSetting\"</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"string\">\"name\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"defaultNames\"</span>: [</span><br><span class=\"line\">            <span class=\"string\">\"나비엔 온수매트\"</span></span><br><span class=\"line\">          ],</span><br><span class=\"line\">          <span class=\"string\">\"name\"</span>: <span class=\"string\">\"국내 개발용\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"nicknames\"</span>: []</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"willReportState\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">\"deviceInfo\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"manufacturer\"</span>: <span class=\"string\">\"주식회사 경동나비엔\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"model\"</span>: <span class=\"string\">\"EQM-572-SS\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"hwVersion\"</span>: <span class=\"string\">\"13\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"swVersion\"</span>: <span class=\"string\">\"1\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"attributes\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"availableThermostatModes\"</span>: <span class=\"string\">\"off,heat,on\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"thermostatTemperatureUnit\"</span>: <span class=\"string\">\"C\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"string\">\"customData\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"string\">\"selection\"</span>: 0</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>Postman 테스트용 예제</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"BASH\"><figure class=\"iseeu highlight bash\"><figcaption><span>구글테스트용 Postman</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br><span class=\"line\">818</span><br><span class=\"line\">819</span><br><span class=\"line\">820</span><br><span class=\"line\">821</span><br><span class=\"line\">822</span><br><span class=\"line\">823</span><br><span class=\"line\">824</span><br><span class=\"line\">825</span><br><span class=\"line\">826</span><br><span class=\"line\">827</span><br><span class=\"line\">828</span><br><span class=\"line\">829</span><br><span class=\"line\">830</span><br><span class=\"line\">831</span><br><span class=\"line\">832</span><br><span class=\"line\">833</span><br><span class=\"line\">834</span><br><span class=\"line\">835</span><br><span class=\"line\">836</span><br><span class=\"line\">837</span><br><span class=\"line\">838</span><br><span class=\"line\">839</span><br><span class=\"line\">840</span><br><span class=\"line\">841</span><br><span class=\"line\">842</span><br><span class=\"line\">843</span><br><span class=\"line\">844</span><br><span class=\"line\">845</span><br><span class=\"line\">846</span><br><span class=\"line\">847</span><br><span class=\"line\">848</span><br><span class=\"line\">849</span><br><span class=\"line\">850</span><br><span class=\"line\">851</span><br><span class=\"line\">852</span><br><span class=\"line\">853</span><br><span class=\"line\">854</span><br><span class=\"line\">855</span><br><span class=\"line\">856</span><br><span class=\"line\">857</span><br><span class=\"line\">858</span><br><span class=\"line\">859</span><br><span class=\"line\">860</span><br><span class=\"line\">861</span><br><span class=\"line\">862</span><br><span class=\"line\">863</span><br><span class=\"line\">864</span><br><span class=\"line\">865</span><br><span class=\"line\">866</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"string\">\"variables\"</span>: [],</span><br><span class=\"line\">\t<span class=\"string\">\"info\"</span>: &#123;</span><br><span class=\"line\">\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"Google Home Navien Mate\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"_postman_id\"</span>: <span class=\"string\">\"fc37b07d-1a1b-c9dd-5920-15418cd55148\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"description\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">\t\t<span class=\"string\">\"schema\"</span>: <span class=\"string\">\"https://schema.getpostman.com/json/collection/v2.0.0/collection.json\"</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"string\">\"item\"</span>: [</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/authorize?state=qwer123&amp;client_id=client-google&amp;scope=all&amp;response_type=code&amp;redirect_uri=http://localhost:18080\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/authorize?state=qwer123&amp;client_id=client-google&amp;scope=all&amp;response_type=code&amp;redirect_uri=http://localhost:18080\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"protocol\"</span>: <span class=\"string\">\"http\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"host\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"localhost\"</span></span><br><span class=\"line\">\t\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"port\"</span>: <span class=\"string\">\"18080\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"path\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"oauth\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"authorize\"</span></span><br><span class=\"line\">\t\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"query\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"state\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"qwer123\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"equals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"client_id\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"client-google\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"equals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"scope\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"all\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"equals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"response_type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"code\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"equals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"redirect_uri\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"http://localhost:18080\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"equals\"</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"variable\"</span>: []</span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"GET\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/token\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/token\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/x-www-form-urlencoded\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Basic Y2xpZW50LWdvb2dsZToxMTExMTExMQ==\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"urlencoded\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"urlencoded\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"grant_type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"authorization_code\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"text\"</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"code\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"2Bb6B3\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"text\"</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"redirect_uri\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"http://localhost:18080\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"text\"</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t]</span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/token\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"auth\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"basic\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"basic\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"username\"</span>: <span class=\"string\">\"client-google\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"password\"</span>: <span class=\"string\">\"11111111\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"saveHelperData\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"showPassword\"</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/oauth/token\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/x-www-form-urlencoded\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Basic Y2xpZW50LWdvb2dsZToxMTExMTExMQ==\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"urlencoded\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"urlencoded\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"grant_type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"refresh_token\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"text\"</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"refresh_token\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"1a7e9be1-7d85-48fa-a29e-2f84fbf0490e\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"string\">\"type\"</span>: <span class=\"string\">\"text\"</span></span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t]</span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"SYNC\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"description\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer 9dae2380-c493-4e2e-a8ba-a64d112f92d5\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"description\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"ff36a3cc-ec34-11e6-b1a0-64510650abcf\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.SYNC\\\"\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer 1d213f8d-f40e-4d42-abcf-557ff0f5eee3\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"ff36a3cc-ec34-11e6-b1a0-64510650abcf\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\r\\n      \\\"payload\\\": &#123;\\r\\n        \\\"devices\\\": [&#123;\\r\\n          \\\"id\\\": \\\"8472070096451ff1-A\\\",\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 1\\r\\n          &#125;\\r\\n        &#125;, &#123;\\r\\n        \\\"id\\\": \\\"8472070096451ff1-L\\\",\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 2\\r\\n          &#125;\\r\\n        &#125;, &#123;\\r\\n        \\\"id\\\": \\\"8472070096451ff1-R\\\",\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 3\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"QUERY\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"description\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"description\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"ff36a3cc-ec34-11e6-b1a0-64510650abcf\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\r\\n      \\\"payload\\\": &#123;\\r\\n        \\\"devices\\\": [&#123;\\r\\n          \\\"id\\\": \\\"84720720d74e1719\\\",\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 0\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"EXECUTE - single - on, off, heat\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [&#123;\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 1\\r\\n          &#125;,\\r\\n          \\\"id\\\": \\\"84720720d74e1719\\\"\\r\\n        &#125;],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatMode\\\": \\\"on\\\"\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"EXECUTE - single - temp\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [&#123;\\r\\n          \\\"customData\\\": &#123;\\r\\n            \\\"selection\\\": 1\\r\\n          &#125;,\\r\\n          \\\"id\\\": \\\"84720720d74e1719\\\"\\r\\n        &#125;],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatTemperatureSetpoint\\\": 30.0\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"EXECUTE - single - heat or on with temp\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"13007409608146609977\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"commands\\\": [\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 1\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatMode\\\": \\\"heat\\\"\\n                &#125;\\n              &#125;,\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatTemperatureSetpoint\\\": 35\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ]\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"10069869892260357892\\\",\\r\\n  \\\"inputs\\\": [\\r\\n    &#123;\\r\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\r\\n      \\\"payload\\\": &#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 2\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 3\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-R\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 1\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-A\\\"\\r\\n          &#125;\\r\\n        ]\\r\\n      &#125;\\r\\n    &#125;\\r\\n  ]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"10069869892260357892\\\",\\r\\n  \\\"inputs\\\": [\\r\\n    &#123;\\r\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\r\\n      \\\"payload\\\": &#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 2\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 3\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-R\\\"\\r\\n          &#125;\\r\\n        ]\\r\\n      &#125;\\r\\n    &#125;\\r\\n  ]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"10069869892260357892\\\",\\r\\n  \\\"inputs\\\": [\\r\\n    &#123;\\r\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\r\\n      \\\"payload\\\": &#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"customData\\\": &#123;\\r\\n              \\\"selection\\\": 2\\r\\n            &#125;,\\r\\n            \\\"id\\\": \\\"84720720d74e1719-R\\\"\\r\\n          &#125;\\r\\n        ]\\r\\n      &#125;\\r\\n    &#125;\\r\\n  ]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1720-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1720-R\\\"\\r\\n          &#125;,\\r\\n                    &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1721-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatMode\\\": \\\"heat\\\"\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - double - mode\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatMode\\\": \\\"off\\\"\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - left - mode\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatMode\\\": \\\"on\\\"\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - right - mode\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"1797884029292078552\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"commands\\\": [\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 2\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719-R\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatSetMode\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatMode\\\": \\\"on\\\"\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ],\\n  \\\"accessToken\\\": null\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatTemperatureSetpoint\\\": 30.0\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - L\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatTemperatureSetpoint\\\": 34.0\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - R\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"thermostatTemperatureSetpoint\\\": 33.0\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"16703243701606581761\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"commands\\\": [\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 2\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719-L\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatTemperatureSetpoint\\\": 31\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;,\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 3\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719-R\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatTemperatureSetpoint\\\": 32\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ]\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"9453929798011120368\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"commands\\\": [\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 2\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719-L\\\"\\n              &#125;,\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 3\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e1719-R\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.ThermostatTemperatureSetpoint\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"thermostatTemperatureSetpoint\\\": 34\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ]\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/sendReportState - double\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/navienMate/sendReportState\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\": \\\"6a759368-a67b-45e8-b0e2-57731d9680d3\\\",\\n  \\\"userId\\\": \\\"jisoo\\\",\\n  \\\"hexData\\\": \\\"F703010184720720D74E1719066C004E367759794337614C713035596C6856383469653050326372707946566336444C64422F6A35573639374A7269306747593256554B464E573234547A576C432F4C3252737541575338423163654F4466515075796E30527A756C71316838687847787749747337746B716B3D3C46\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/sendReportState - single\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/navienMate/sendReportState\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\": \\\"8cb583a7-5445-4492-88ef-08c3bb6a027e\\\",\\n  \\\"userId\\\": \\\"jisoo\\\",\\n  \\\"hexData\\\": \\\"F703010184720720D74E1719066C004E367759794337614C713035596C6856383469653050326372707946566336444C64422F6A35573639374A7269306747593256554B464E573234547A576C432F4C3252737541575338423163654F4466515075796E30527A756C71316838687847787749747337746B716B3D3C46\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/sendReportState - double - v\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/sendReportState\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\": \\\"8cb583a7-5445-4492-88ef-08c3bb6a027e\\\",\\n  \\\"userId\\\": \\\"jisoo\\\",\\n  \\\"hexData\\\": \\\"F703010184720700966F171906C0004B4C346377434E39786C647735655835323464562B546370614130384E46416D477279577854665A615137795A724B6D2B727850506B5A6A645152684B6234534A414B7730454E5772796275323077715059666753583745667A667962434C3169717950357A6E582B72426E69446F7354586239467546546449655830476D2B75566D674276317A61655856706462373951675A634C344C377A5850755259654744733946754C44787473643077567562315A484542352B316B5848496371415FEE\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/navienMate/requestSync\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/navienMate/requestSync\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\": \\\"6a759368-a67b-45e8-b0e2-57731d9680d3\\\",\\n  \\\"userId\\\": \\\"jisoo\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/findAll\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/findAll\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"GET\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/find\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/find\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\":\\\"2c9cd4f7-2ade-46f6-975e-e7cc72887b16\\\",\\n  \\\"userId\\\":\\\"google11111\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/delete\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/delete\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\":\\\"2c9cd4f7-2ade-46f6-975e-e7cc72887b16\\\",\\n  \\\"userId\\\":\\\"qqqqq\\\",\\n  \\\"clientId\\\":\\\"client-google\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/update\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/partnerApprovals/update\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"key\\\":\\\"2c9cd4f7-2ade-46f6-975e-e7cc72887b16\\\",\\n  \\\"userId\\\":\\\"google7777\\\",\\n  \\\"clientId\\\":\\\"client-google\\\",\\n  \\\"useFlag\\\":\\\"Y\\\"\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - double - on off\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.OnOff\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"on\\\": true\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - left - on off\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1719-L\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.OnOff\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"on\\\": false\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - double - temp\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-L\\\"\\r\\n          &#125;,\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.SetTemperature\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"temperature\\\": 33\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - right - temp\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer c47d8fb8-3a17-4b2f-8c68-a871c10b58f8\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e1ff8-R\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.SetTemperature\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"temperature\\\": 37\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - single - onOff\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer 8a377e94-f968-4d71-a68f-17723a6204e1\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\r\\n  \\\"requestId\\\": \\\"13268283809070521413\\\",\\r\\n  \\\"inputs\\\": [&#123;\\r\\n    \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\r\\n    \\\"payload\\\": &#123;\\r\\n      \\\"commands\\\": [&#123;\\r\\n        \\\"devices\\\": [\\r\\n          &#123;\\r\\n            \\\"id\\\": \\\"84720720d74e18df\\\"\\r\\n          &#125;\\r\\n        ],\\r\\n      \\\"execution\\\": [&#123;\\r\\n          \\\"command\\\": \\\"action.devices.commands.OnOff\\\",\\r\\n          \\\"params\\\": &#123;\\r\\n            \\\"on\\\": false\\r\\n          &#125;\\r\\n        &#125;]\\r\\n      &#125;]\\r\\n    &#125;\\r\\n  &#125;]\\r\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - dobule - onOFF\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer 8a377e94-f968-4d71-a68f-17723a6204e1\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"11221506480772703248\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.EXECUTE\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"commands\\\": [\\n          &#123;\\n            \\\"devices\\\": [\\n              &#123;\\n                \\\"customData\\\": &#123;\\n                  \\\"selection\\\": 2\\n                &#125;,\\n                \\\"id\\\": \\\"84720720d74e18df-L\\\"\\n              &#125;\\n            ],\\n            \\\"execution\\\": [\\n              &#123;\\n                \\\"command\\\": \\\"action.devices.commands.OnOff\\\",\\n                \\\"params\\\": &#123;\\n                  \\\"on\\\": false\\n                &#125;\\n              &#125;\\n            ]\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ],\\n  \\\"accessToken\\\": null\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"name\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm - query - double - L\"</span>,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"request\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"url\"</span>: <span class=\"string\">\"http://localhost:18080/google-nm\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"method\"</span>: <span class=\"string\">\"POST\"</span>,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"header\"</span>: [</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Content-Type\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"application/json\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"key\"</span>: <span class=\"string\">\"Authorization\"</span>,</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"string\">\"value\"</span>: <span class=\"string\">\"Bearer 8a377e94-f968-4d71-a68f-17723a6204e1\"</span></span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t],</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"body\"</span>: &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"mode\"</span>: <span class=\"string\">\"raw\"</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"string\">\"raw\"</span>: <span class=\"string\">\"&#123;\\n  \\\"requestId\\\": \\\"14908270187502446593\\\",\\n  \\\"inputs\\\": [\\n    &#123;\\n      \\\"intent\\\": \\\"action.devices.QUERY\\\",\\n      \\\"payload\\\": &#123;\\n        \\\"devices\\\": [\\n          &#123;\\n            \\\"customData\\\": &#123;\\n              \\\"selection\\\": 2\\n            &#125;,\\n            \\\"id\\\": \\\"84720720d74e18df-L\\\"\\n          &#125;\\n        ]\\n      &#125;\\n    &#125;\\n  ],\\n  \\\"accessToken\\\": null\\n&#125;\"</span></span><br><span class=\"line\">\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t<span class=\"string\">\"description\"</span>: null</span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t<span class=\"string\">\"response\"</span>: []</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div></li>\n</ol>\n","text":"구글 어시스턴트에 온수매트를 연동할 업무가 주어졌다.<br>구글 어시스턴트에 대해서 진행해보자.<br>google home url : https://developers.google.com/assistant/smarthome/overview<br>goo","link":"","raw":null,"photos":[],"categories":[{"name":"google","slug":"google","count":1,"path":"api/categories/google.json"}],"tags":[{"name":"Google","slug":"Google","count":1,"path":"api/tags/Google.json"},{"name":"Assistant","slug":"Assistant","count":1,"path":"api/tags/Assistant.json"},{"name":"speaker","slug":"speaker","count":1,"path":"api/tags/speaker.json"}]},{"title":"OAuth 2.0 마스터 (Mastering OAuth 2.0)","slug":"OAuth2-0","date":"2020-06-29T03:46:47.000Z","updated":"2020-06-29T03:47:52.417Z","comments":true,"pin":null,"path":"api/articles/OAuth2-0.json","excerpt":"","keywords":null,"cover":null,"content":"<p>OAuth 2.0은 서로 다른 두 집단이 정보와 리소스를 안전하고 신뢰할 수 있는 방법으로 공유할 수 있게 해주는 프로토콜이다.</p>\n<p>※ OAuth 2.0은 OAuth 1.0과 호환되지 않는다.</p>\n<ul>\n<li>인증과 인가</li>\n</ul>\n<ul>\n<li>인증(authentication) : 누군가(또는 시스템)가 그들이 말하는 그 사람이 맞는지 실제로 확인하는 절차</li>\n<li>인가(authorization) : 일단 인증이 됐다면 당신이 하고자 하는 어떤 일을 할 수 있는 권한이 있는지 판단하는 절차</li>\n</ul>\n<p>결국에는 보호된 리소스에 해당 리소스 소유자 대신해서 접근하는 것</p>\n<ul>\n<li>연합된 신원(federated identity) : 어떤 서비스가 다른 서비스의 계정을 이용한 인증을 허용하는 것</li>\n<li>권한 위임(delegated authority) : 어떤 서비스나 어플리케이션이 사용자의 리소스에 대신 접근할 수 있는 것</li>\n</ul>\n<p>OAuth 2.0 동작<br>사용자 동의(user consent)</p>\n<ul>\n<li>그랜트(grant) 유형</li>\n</ul>\n<ul>\n<li>인가 코드 그랜트(authorization code grant) : 서버 사이드 워크플로우</li>\n<li>암시적 그랜트(implicit grant) : 클라이언트 사이드 워크플로우<br>위 2가지를 가장 많이 사용되고 OAuth 2.0 스펙에는 추가적인 2가지 유형의 그랜트가 있다.</li>\n<li>리소스 소유자 비밀번호 자격증명 그랜트(resource owner password credentials grant)</li>\n<li>클라이언트 자격증명 그랜트(client credentials grant)</li>\n</ul>\n<p>OAuth 2.0 클라이언트에는 2가지 신뢰 레벨의 클라이언트만 있다.</p>\n<ul>\n<li>신뢰 클라이언트 (trusted client)</li>\n<li>비신뢰 클라이언트 (untrusted client)<br>신뢰 레벨을 판단하는 요소 : 안전하게 정보를 저장하고 전송하는 능력</li>\n</ul>\n<ol>\n<li>신뢰 클라이언트</li>\n</ol>\n<p>-&gt; 클라이언트 자격증명과 토큰 또는 어플리케이션이 필요로 하는 다른 리소스를 안전하게 저장할 수 있음<br>-&gt; ex) 기밀 정보를 안전하게 저장하고 전송할 수 있는 백엔드 서버가 존재하는 전형적인 3계층 클라이언트-서버-데이터베이스 어플리케이션</p>\n<ol start=\"2\">\n<li>비신뢰 클라이언트</li>\n</ol>\n<p>-&gt; 기밀 정보를 안전하게 저장하거나 전송할 수 없음<br>-&gt; 정보를 안전하게 저장해주는 서버가 없음<br>-&gt; ex) 브라우저 기반의 어플리케이션</p>\n<p>※ OAuth 2.0 스펙에서 trusted(신뢰) = confidential, untrusted(비신뢰) = public</p>\n<ul>\n<li>클라이언트 사이드 워크플로우<br>비신뢰 클라이언트에 가장 적합한 것이 암시적 그랜트이다.<br>ex) GoodApp이 암시적 그랜트를 이용해 페이스북의 친구 목록에 대한 접근 요청</li>\n</ul>\n<p>-&gt; GoodApp은 비신뢰 클라이언트이므로 신분 증명이나 토큰을 저장할 수 없다.</p>\n<ol>\n<li>GoodApp은 사용자를 페이스북에 연결한다. 페이스북은 사용자에게 GoodApp이 사용자의 친구 목록에 접근하는 것을 허용하는지 물어본다.</li>\n<li>(사용자가 허락한다.) 페이스북은 GoodApp에게 사용자의 페이스북 친구 목록에 접근하는데 사용할 수 있는 키를 전달한다.</li>\n<li>GoodApp은 페이스북으로부터 전달받은 키를 이용해 페이스북에게 사용자의 친구 목록을 요청한다.</li>\n<li>페이스북은 전달된 키를 확인한 후 GoodApp에게 사용자의 친구 목록을 전달한다.</li>\n<li>GoodApp은 전달받은 친구 목록으로 자기 서비스를 제공한다.</li>\n</ol>\n<p>엑세스토큰과 bearer 토큰<br>-&gt; 엑세스토큰은 보호된 리소스에 접근할 수 있는 권한을 나타내는 문자열 값<br>-&gt; bearer 토큰은 엑세스토큰의 한 유형<br>-&gt; 가장 많이 사용되는 토큰 유형<br>-&gt; bearer 토큰은 토큰만 가지고 있으면 더 이상 필요한 것이 없다는 의미에서 이름이 붙여짐, 즉 특정 리소스에 접근하기 위해 토큰 외에 다른 것은 필요 없음</p>\n<p>언제 암시적 그랜트를 사용해야 하는가?<br>-&gt; 비신뢰 클라이언트를 위해<br>-&gt; 사용자의 데이터를 오랜 기간 저장할 필요가 없는 클라이언트 (ex. 웹 브라우저 기반 어플리케이션)</p>\n<p>비신뢰 클라이언트의 장단점<br>장점) 간편함, 구현이 단순함<br>단점) 보안성이 낮음<br>      단기간 접근만 가능 : 비신뢰 클라이언트이므로 오랜 기간 키를 저장할 수 없기 때문에 사용자는 신뢰 클라이언트보다 더 자주 인증을 다시 받고 토큰을 재발급해야 한다.</p>\n<h3 id=\"개발가이드\"><a href=\"#개발가이드\" class=\"headerlink\" title=\"개발가이드\"></a>개발가이드</h3><p>-&gt; 암시적 그랜트 유형을 이용하는 비신뢰 클라이언트를 개발한다면 읽기 전용 모드의 요청만 할 수 있도록 제한하는 것이 좋다.</p>\n<ul>\n<li>서버 사이드 워크플로우<br>신뢰 클라이언트는 클라이언트 자격증명과 같은 기밀 정보를 안전하게 저장할 수 있어야 한다.</li>\n</ul>\n<p>-&gt; 이번 GoodApp은 신뢰 클라이언트</p>\n<ol>\n<li>GoodApp은 사용자를 페이스북에 연결한다. 페이스북은 사용자에게 GoodApp이 사용자의 친구 목록에 접근하는 것을 허용하는지 물어본다.</li>\n<li>(사용자가 허락한다.) 페이스북은 GoodApp에게 사용자의 페이스북 친구 목록에 접근하는데 사용할 수 있는 키와 교환할 수 있는 태그(tag)를 준다.</li>\n<li>GoodApp은 페이스북으로부터 전달받은 태그를 이용해 사용자의 페이스북 친구 목록을 요청할 수 있는 키를 요청한다.</li>\n<li>페이스북은 절달된 태그를 확인한 후 GoodApp 서버에게 키를 전달한다.</li>\n<li>GoodApp은 페이스북으로부터 전달받은 키를 이용해 페이스북에게 사용자의 친구 목록을 요청한다.</li>\n<li>페이스북은 전달된 키를 확인한 후 GoodApp에게 사용자의 친구 목록을 전달한다.</li>\n<li>GoodApp은 전달받은 친구 목록으로 자기 서비스를 제공한다.</li>\n</ol>\n<p>[중요] 키를 얻기 위해 사용하는 태그는 한 번만 사용할 수 있다.</p>\n<p>※ OAuth 2.0 스펙에서 인가 코드(authorization code)가 태그에 해당한다.</p>\n<p>[포인트] 비신뢰 클라이언트와 중요한 차이점은 엑세스 토큰이 브라우저에게 절대 전달되지 않는다는 것, 페이스북과 GoodApp 서버 간에 엑세스 토큰이 직접 교환됨 -&gt; 엑세스 토큰 유출 위험도가 낮아짐</p>\n<p>신뢰 클라이언트의 장단점<br>장점) 더 안전<br>      장시간, 오프라인 접근 가능 : 키를 저장할 수 있으므로<br>단점) 더 복잡</p>\n<h3 id=\"개발가이드-1\"><a href=\"#개발가이드-1\" class=\"headerlink\" title=\"개발가이드\"></a>개발가이드</h3><p>많은 개발자들이 SSL이나 TLS와 같은 안전한 전송 프로토콜과 함께 사용하면 정보를 안전하게 저장하고 전송해야 한다는 요구 사항을 만족한다고 생각한다.<br>따라서 그들이 만든 어플리케이션이 신뢰 클라이언트라고 생각하나 문제가 있다…</p>\n<p>OAuth 2.0 클라이언트가 되기 위한 4개의 단계</p>\n<ol>\n<li>클라이언트 어플리케이션 등록</li>\n<li>엑세스 토큰 얻기</li>\n<li>엑세스 토큰을 이용해서 보호된 리소스에 접근</li>\n<li>엑세스 토큰 갱신</li>\n</ol>\n<p>※ 엑세스 토큰 갱신<br>엑세스 토큰 갱신은 신뢰 클라이언트만 가능하다. 클라이언트 어플리케이션이 엑세스 토큰을 갱신하려면 리프레쉬 토큰(refresh token)을 안전하게 저장할 수 있어야 하기 때문에</p>\n<p>1단계 : 클라이언트 어플리케이션 등록<br>어플리케이션 등록 후 사용하게될 정보 셋</p>\n<ul>\n<li>클라이언트 ID(client id) : 클라이언트 어플리케이션의 고유한 ID, 반드시 유일해야함</li>\n<li>클라이언트 시크릿(client secret) : 어플리케이션을 위한 비밀 키, 어플리케이션의 신원</li>\n<li>리다이렉션 엔드포인트(redirection endpoint) : 서비스 제공자가 응답(토큰 또는 에러)을 전달하기 위해 사용하는 엔드포인트, 데스크탑이나 모바일 네이티브 어플리케이션의 경우는 서비스 제공자에 의해 제공 여부가 결정됨</li>\n<li>인가 엔드포인트(authorization endpoint) : 클라이언트 어플리케이션이 인가 플로우를 시작할 때 사용하는 엔드포인트, 서비스 제공자에 의해 제공 여부가 결정</li>\n<li>토큰 엔드포인트(token endpoint) : 클라이언트 어플리케이션이 토큰 플로우를 시작할 때 사용하는 엔드포인트, 서비스 제공자에 의해 제공 여부가 결정</li>\n</ul>\n<p>ex) GoodApp 어플리케이션의 예</p>\n<ul>\n<li>클라이언트 ID(client id) : goodapp-541106</li>\n<li>클라이언트 시크릿(client secret) : 38D83HHHFF873RASDPPEKJ1KHJZL</li>\n<li>리다이렉션 엔드포인트(redirection endpoint) : <a href=\"https://www.goodapp.com/callback\" target=\"_blank\" rel=\"noopener\">https://www.goodapp.com/callback</a></li>\n<li>인가 엔드포인트(authorization endpoint) : <a href=\"https://api.facebook.com/auth\" target=\"_blank\" rel=\"noopener\">https://api.facebook.com/auth</a></li>\n<li>토큰 엔드포인트(token endpoint) : <a href=\"https://api.facebook.com/token\" target=\"_blank\" rel=\"noopener\">https://api.facebook.com/token</a></li>\n</ul>\n<p>[포인트] 비신뢰 클라이언트에게는 클라이언트 시크릿이 제공되지 않을 것, 안전하게 저장할 수 없기 때문에</p>\n<p>*** 엑세스 토큰<br>범위(scope)</p>\n<p>그런 문자열은 서비스 제공자가 정의하는 것이다.</p>\n<p>접근 기간(duration of access)</p>\n<p>영구 토큰(perpetual token)도 있으나 극히 드물다.</p>\n<p>-&gt; 대부분의 서비스 제공자는 대략 몇 분이나 몇 시간 정도의 접근 기간을 가지는 토큰을 발급한다.<br>-&gt; 접근 기간은 요청되는 범위 뿐만 아니라 서비스 제공자에 따라 달라지며, 일반적으로 30분에서 몇 시간 정도로 정해짐<br>-&gt; 또한 읽기/쓰기가 가능한 접근 권한보다 읽기만 가능한 접근 권한이 좀 더 긴 접근 기간을 갖는 경향이 있음</p>\n<p>토큰 폐기(token revocation) : 서비스 제공자가 지원할 수도 있고 지원하지 않을 수도 있고… 그러나 보안상 중요함</p>\n<div class=\"highlight-wrap\"autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" contenteditable=\"true\"data-rel=\"PLAIN\"><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~~~</span><br></pre></td></tr></table></figure></div>\n\n\n\n\n<p>리다이렉션 엔드포인트를 어플리케이션을 등록할 때 설정한다.</p>\n<p>인가 엔드포인트와 토큰 엔드포인트는 서비스 제공자가 결정하는 것</p>\n<p>@@@ 암시적 그랜트 플로우 @@@</p>\n<p>1) 인가 요청</p>\n<p>인가 요청을 보내는 곳 : 서비스 제공자의 인가 엔드포인트<br>필요한 파라미터도 함께 전달하고 전달되는 파라미터는 application/x-www-form-urlencoded 포멧으로 인코딩돼야 한다.</p>\n<p>ex) 일반적인 형태의 인가 요청<br>GET /authorize?<br>response_type=token&amp;<br>client_id=[CLIENT_ID]&amp;<br>redirect_uri=[REDIRECT_URI]&amp;<br>scope=[SCOPE]&amp;<br>state=[STATE] http/1.1<br>Host: server.example.com</p>\n<ul>\n<li>response_type : (필수) 암시적 그랜트 플로우를 사용하고 있음을 나타내기 위해 값을 token으로 세팅해야 한다.</li>\n<li>client_id : (필수) 어플리케이션의 고유한 클라이언트 ID</li>\n<li>redirect_uri : (선택) 서비스 제공자가 요청에 대한 응답을 전달하기 위해 사용하게 될 리다이렉션 엔트포인트. 서비스 제공자는 요청이 성공하면 엑세스 토큰을, 실패하면 에러 메시지를 전달한다.</li>\n<li>scpoe : (선택) 클라이언트가 요청하는 접근 권한의 범위를 나타냄</li>\n<li>state : (권장) 사용하는 것이 좋다. 클라이언트가 서비스 제공자에게 전달하면 서비스 제공자는 이 값을 다시 응답에 포함해서 전달한다. CSRF(Cross-Site Request Forgery) 공격을 차단하기 위한 목적으로 사용될 수 있다.</li>\n</ul>\n<p>ex) 인가 응답(성공)<br>HTTP/1.1 302 Found<br>Location: [REDIRECT_URI]#<br>access_token=[ACCESS_TOKEN]&amp;<br>token_type=[TOKEN_TYPE]&amp;<br>expires_in=[EXPIRES_IN]&amp;<br>scope=[SCOPE]&amp;<br>state=[STATE]</p>\n<ul>\n<li>access_token : (필수) 얻고자 한 토큰, 이 토큰을 이용해서 사용자의 프로파일과 글에 접근할 수 있다.</li>\n<li>token_type : (필수) 전달된 토큰의 유형. 이는 거의 bearer 토큰 유형일 것</li>\n<li>expires_in : (선택) 토큰의 유효 기간(초 단위), 이 값은 선택 사항으로 서비스 제공자는 이 값을 전달하지 않을 수도 있다.</li>\n<li>scope : (조건부로 필수) 인가된 접근 범위가 요청된 범위와 일치한다면 이 값은 아마 생략될 것이다. 하지만 요청된 범위와 인가된 범위가 다르다면 이 파라미터를 통해 인가된 범위가 전달</li>\n<li><ul>\n<li>[중요] : OAuth 2.0 스펙에서는 공백으로 구분한다. 비록 많은 서비스 제공자가 콤마도 지원하겠지만…</li>\n</ul>\n</li>\n<li>state : (조건부로 필수) 인가 요청에 state 파라미터가 포함됐다면 응답에도 이 파라미터가 존재해야 한다.</li>\n</ul>\n<p>ex) 인가 응답(실패)<br>HTTP/1.1 302 Found<br>Location: [REDIRECT_URI]#<br>error=[ERROR_CODE]&amp;<br>error_description=[ERROR_DESCRIPTION]&amp;<br>error_uri=[ERROR_URI]&amp;<br>state=[STATE]</p>\n<ul>\n<li>error : (필수) 에러 코드로 인가 요청에 실패한 이유를 나타냄</li>\n<li>-에러 코드 종류</li>\n<li>– invalid_request : 요청 데이터가 잘못돼서 처리할 수 없음</li>\n<li>– unauthorized_client : 클라이언트 어플리케이션이 요청을 전달할 권한이 없음</li>\n<li>– access_denied : 사용자가 인가 요청을 거부함</li>\n<li>– unsupported_response_type : 잘못된 응답 유형이 사용됐음. 앞에서 암시적 그랜트 유형을 사용했기 때문에 응답 유형으로 token을 사용해야 한다.</li>\n<li>– invalid_scope : 잘못된 범위가 사용됐음</li>\n<li>– server_error : 서버 내에서 에러가 발생해 인가 요청을 제대로 처리할 수 없음</li>\n<li>– temporarily_unavailable : 인가 서버가 일시적인 장애 상태임</li>\n<li>error_description : (선택) 사람이 읽을 수 있는 형태의 에러 메시지</li>\n<li>error_uri : (선택) 에러에 대해 좀 더 자세한 정보를 담고 있는 웹 문서에 대한 링크</li>\n<li>state : (조건부 필수) 인가 요청에 state 파라미터가 포함됐다면 응답에도 이 파라미터가 존재해야 한다.</li>\n</ul>\n<p>[중요] 클라이언트가 인가 요청을 보내는 엔드포인트는 서비스 제공자의 서버에 위치해야 한다는 것</p>\n<p>@@@ 서버 사이드 플로우 (인가 코드 그랜트 플로우) @@@<br>-&gt; 클라이언트 사이드 플로우(암시적 그랜트 플로우)보다는 좀 더 복잡하지만 더욱 안전함<br>-&gt; 일반적으로 백엔드와 함께 동작하는 웹 어플리케이션에서 사용됨<br>-&gt; 인가 코드를 전달할 때 프론트엔드가 아닌 백엔드 즉 서버에 전달한다.<br>[중요] 서버 사이드에서 인가 코드를 교환하는 것이 차이점으로 클라이언트 자격증명과 토큰을 안전하게 관리하고 전송할 수 있어야 한다.<br>비신뢰 클라이언트는 그런 자격증명을 안전하게 저장할 수 없기 때문에(브라우저는 안전하다고 여겨지지 않는다.) 인가 코드 그랜트 플로우를 사용할 수 없다.</p>\n<p>@ 인가 요청<br>-&gt; 암시적 그랜트 플로우와 유일한 차이점은 response_type 파라미터의 값이 token이 아닌 code로 세팅돼야 함<br>ex) 일반적인 형태의 인가 요청<br>GET /authorize?<br>response_type=code&amp;<br>client_id=[CLIENT_ID]&amp;<br>redirect_uri=[REDIRECT_URI]&amp;<br>scope=[SCOPE]&amp;<br>state=[STATE] http/1.1<br>Host: server.example.com</p>\n<ul>\n<li>response_type : (필수) 인가 코드 그랜트 플로우를 사용한다는 것을 나타내기 위해 값을 code로 세팅해야 한다.</li>\n<li>client_id : (필수) 어플리케이션의 고유한 클라이언트 ID</li>\n<li>redirect_uri : (선택) 서비스 제공자가 요청에 대한 응답을 전달하기 위해 사용하게 될 리다이렉션 엔트포인트. 서비스 제공자는 요청이 성공하면 엑세스 토큰을, 실패하면 에러 메시지를 전달한다.</li>\n<li>scpoe : (선택) 클라이언트가 요청하는 접근 권한의 범위를 나타냄</li>\n<li>state : (권장) 사용하는 것이 좋다. 클라이언트가 서비스 제공자에게 전달하면 서비스 제공자는 이 값을 다시 응답에 포함해서 전달한다. CSRF(Cross-Site Request Forgery) 공격을 차단하기 위한 목적으로 사용될 수 있다.</li>\n</ul>\n<p>ex) 샘플 어플리케이션의 경우</p>\n<ul>\n<li>response_type : code</li>\n<li>client_id : wmiig-550106</li>\n<li>redirect_uri : <a href=\"http://wmiig.com/callback\" target=\"_blank\" rel=\"noopener\">http://wmiig.com/callback</a></li>\n<li>scope : public_profile, user_posts</li>\n</ul>\n<p>@ 인가 응답 (성공)<br>ex)<br>HTTP/1.1 302 Found<br>Location: [REDIRECT_URI]?<br>code=[AUTHORIZATION_CODE]&amp;<br>scope=[SCOPE]</p>\n<p>[중요] 응답 값이 URL 프래그먼트가 아닌 URL 질의 컴포넌트로 전달</p>\n<ul>\n<li>code : (필수) 엑세스 토큰과 교환하는 데 사용하는 인가 코드</li>\n<li>state : (조건부로 필수) : 인가 요청에 state 파라미터가 포함됐다면 응답에도 이 파라미터가 존재해야 한다.</li>\n</ul>\n<p>[중요] 인가 코드는 한 번만 사용할 수 있고 짧은 만료 시간을 가진다.(OAuth 2.0 스펙은 10분으로 제한 권장) 따라서 클라이언트는 인가 코드를 받으면 그것을 곧바로 사용해야 한다.</p>\n<p>@ 인가 응답 (에러)<br>ex) 응답 값이 URL 프래그먼트가 아닌 URL 질의 컴포넌트로 전달<br>HTTP/1.1 302 Found<br>Location: [REDIRECT_URI]#<br>error=[ERROR_CODE]&amp;<br>error_description=[ERROR_DESCRIPTION]&amp;<br>error_uri=[ERROR_URI]&amp;<br>state=[STATE]</p>\n<ul>\n<li>error : (필수) 에러 코드로 인가 요청에 실패한 이유를 나타냄</li>\n<li>-에러 코드 종류</li>\n<li>– invalid_request : 요청 데이터가 잘못돼서 처리할 수 없음</li>\n<li>– unauthorized_client : 클라이언트 어플리케이션이 요청을 전달할 권한이 없음</li>\n<li>– access_denied : 사용자가 인가 요청을 거부함</li>\n<li>– unsupported_response_type : 잘못된 응답 유형이 사용됐음. 앞에서 암시적 그랜트 유형을 사용했기 때문에 응답 유형으로 token을 사용해야 한다.</li>\n<li>– invalid_scope : 잘못된 범위가 사용됐음</li>\n<li>– server_error : 서버 내에서 에러가 발생해 인가 요청을 제대로 처리할 수 없음</li>\n<li>– temporarily_unavailable : 인가 서버가 일시적인 장애 상태임</li>\n<li>error_description : (선택) 사람이 읽을 수 있는 형태의 에러 메시지</li>\n<li>error_uri : (선택) 에러에 대해 좀 더 자세한 정보를 담고 있는 웹 문서에 대한 링크</li>\n<li>state : (조건부 필수) 인가 요청에 state 파라미터가 포함됐다면 응답에도 이 파라미터가 존재해야 한다.</li>\n</ul>\n<p>@ 액세스 토큰 요청<br>-&gt; 서비스 제공자의 토큰 엔드포인트로 필요한 파라미터와 함께 POST 요청을 보내야 한다.<br>-&gt; application/x-www-form-urlencoded 포멧으로 전달해야 함<br>ex)<br>POST /token HTTP/1.1<br>Host: server.example.com<br>Authorization: Basic [ENCODED_CLIENT_CREDENTIALS]<br>Content-Type: application/x-www-form-urlencoded</p>\n<p>grant_type=authorization_code&amp;<br>code=[AUTHORIZATION_CODE]&amp;<br>redirect_uri=[REDIRECT_URI]&amp;<br>client_id=[CLIENT_ID]</p>\n<ul>\n<li>grant_type : (필수) 액세스 토큰으로 교환하고자 한다는 것을 나타내기 위해 authorization_code로 세팅해야 한다.</li>\n<li>code : (필수) 인가 요청에 의해 전달받은 인가 코드 값</li>\n<li>redirect_uri : (조건부로 필수) 인가 요청에 리다이렉션 엔드포인트가 포함된다면 액세스 토큰 요청에도 리다이렉션 엔드포인트가 포함돼야 한다.</li>\n<li>client_id : (필수) 어플리케이션의 고유한 클라이언트 ID</li>\n</ul>\n<p>엑세스 토큰을 요청하려면 위 파라미터 전달 뿐만 아니라 클라이언트 어플리케이션은 서비스 제공자에게 자기 자신을 증명해야 한다.<br>OAuth 2.0 스펙에는 클라이언트 인증을 위해 어떤 특정한 인증 메커니즘을 사용해야 한다고 말하지 않지만 일반적으로 HTTP 기본 인증(HTTP basic authentication)을 사용한다.<br>이는 위의 Authorization 헤더로 구현된다.<br>즉 HTTP 헤더의 Authorization 부분에는 인증 유형을 나타내는 ‘Basic’과 HTTP 기본 인증 스펙에서 정의한 인코딩 방식인 Base64로 인코딩된 클라이언트 자경증명이 포함된다.<br>[CLIENT_ID] : [CLIENT_SECRET]</p>\n<p>HTTP 기본 인증 프로토콜 = 기본 인증</p>\n<p>이를 사용하지 않는 예전 방식의 요청<br>ex)<br>POST /token HTTP/1.1<br>Host: server.example.com<br>Content-Type: application/x-www-form-urlencoded</p>\n<p>grant_type=authorization_code&amp;<br>code=[AUTHORIZATION_CODE]&amp;<br>redirect_uri=[REDIRECT_URI]&amp;<br>client_id=[CLIENT_ID]&amp;<br>client_secret=[CLIENT_SECRET]</p>\n<p>@엑세스 토큰 응답</p>\n<ul>\n<li>성공인 경우<br>ex)<br>HTTP/1.1 200 OK<br>Content-Type: application/json;charset=UTF-8<br>Cache-Control: no-store<br>Pragma: no-cache<br>{<br>  “access_token”:”???”,<br>  “token_type”:”bearer”,<br>  “expires_in”:3600,<br>  “refresh_token”:”???”,<br>}</li>\n</ul>\n<p>보통 JSON 포멧으로 전달됌, XML이나 Key-Value 포멧일 수도 있다.</p>\n<ul>\n<li>실패인 경우</li>\n<li><blockquote>\n<p>HTTP 400(Bad Request) 에러 코드를 반환할 것이다.<br>ex) HTTP/1.1 400 Bad Request<br>Content-Type: application/json;charset=UTF-8<br>Cache-Control: no-store<br>Pragma: no-cache<br>{<br>   “error”:”invalid_client”<br>}</p>\n</blockquote>\n</li>\n</ul>\n","text":"OAuth 2.0은 서로 다른 두 집단이 정보와 리소스를 안전하고 신뢰할 수 있는 방법으로 공유할 수 있게 해주는 프로토콜이다.※ OAuth 2.0은 OAuth 1.0과 호환되지 않는다.인증과 인가인증(authentication) : 누군가(또는 시스","link":"","raw":null,"photos":[],"categories":[{"name":"tip","slug":"tip","count":4,"path":"api/categories/tip.json"}],"tags":[{"name":"Security","slug":"Security","count":1,"path":"api/tags/Security.json"},{"name":"OAuth","slug":"OAuth","count":1,"path":"api/tags/OAuth.json"},{"name":"Master","slug":"Master","count":1,"path":"api/tags/Master.json"}]}]}